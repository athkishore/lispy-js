(self.webpackChunklispy_js=self.webpackChunklispy_js||[]).push([[179],{838:(_r,Xn,Rt)=>{"use strict";function J(e){return"function"==typeof e}function _(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const A=_(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function m(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class S{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(J(r))try{r()}catch(o){t=o instanceof A?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{I(o)}catch(s){t=null!=t?t:[],s instanceof A?t=[...t,...s.errors]:t.push(s)}}if(t)throw new A(t)}}add(t){var n;if(t&&t!==this)if(this.closed)I(t);else{if(t instanceof S){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&m(n,t)}remove(t){const{_finalizers:n}=this;n&&m(n,t),t instanceof S&&t._removeParent(this)}}S.EMPTY=(()=>{const e=new S;return e.closed=!0,e})();const w=S.EMPTY;function y(e){return e instanceof S||e&&"closed"in e&&J(e.remove)&&J(e.add)&&J(e.unsubscribe)}function I(e){J(e)?e():e.unsubscribe()}const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},p={setTimeout(e,t,...n){const{delegate:r}=p;return(null==r?void 0:r.setTimeout)?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=p;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function v(e){p.setTimeout(()=>{const{onUnhandledError:t}=E;if(!t)throw e;t(e)})}function b(){}const f=l("C",void 0,void 0);function l(e,t,n){return{kind:e,value:t,error:n}}let d=null;function g(e){if(E.useDeprecatedSynchronousErrorHandling){const t=!d;if(t&&(d={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=d;if(d=null,n)throw r}}else e()}class M extends S{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,y(t)&&t.add(this)):this.destination=U}static create(t,n,r){return new L(t,n,r)}next(t){this.isStopped?G(function a(e){return l("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?G(function c(e){return l("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?G(f,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const O=Function.prototype.bind;function R(e,t){return O.call(e,t)}class T{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){B(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){B(r)}else B(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){B(n)}}}class L extends M{constructor(t,n,r){let i;if(super(),J(t)||!t)i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let o;this&&E.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&R(t.next,o),error:t.error&&R(t.error,o),complete:t.complete&&R(t.complete,o)}):i=t}this.destination=new T(i)}}function B(e){E.useDeprecatedSynchronousErrorHandling?function D(e){E.useDeprecatedSynchronousErrorHandling&&d&&(d.errorThrown=!0,d.error=e)}(e):v(e)}function G(e,t){const{onStoppedNotification:n}=E;n&&p.setTimeout(()=>n(e,t))}const U={closed:!0,next:b,error:function F(e){throw e},complete:b},k="function"==typeof Symbol&&Symbol.observable||"@@observable";function H(e){return e}let ne=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function _e(e){return e&&e instanceof M||function Se(e){return e&&J(e.next)&&J(e.error)&&J(e.complete)}(e)&&y(e)}(n)?n:new L(n,r,i);return g(()=>{const{operator:s,source:u}=this;o.add(s?s.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ie(r))((i,o)=>{const s=new L({next:u=>{try{n(u)}catch(h){o(h),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[k](){return this}pipe(...n){return function K(e){return 0===e.length?H:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=ie(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function ie(e){var t;return null!==(t=null!=e?e:E.Promise)&&void 0!==t?t:Promise}const Ne=_(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let N=(()=>{class e extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ee(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ne}next(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?w:(this.currentObservers=null,o.push(n),new S(()=>{this.currentObservers=null,m(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new ne;return n.source=this,n}}return e.create=(t,n)=>new ee(t,n),e})();class ee extends N{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:w}}function W(e){return t=>{if(function z(e){return J(null==e?void 0:e.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function V(e,t,n,r,i){return new de(e,t,n,r,i)}class de extends M{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(u){try{n(u)}catch(h){t.error(h)}}:super._next,this._error=i?function(u){try{i(u)}catch(h){t.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function sn(e){return this instanceof sn?(this.v=e,this):new sn(e)}function Eo(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(j){r[j]&&(i[j]=function(q){return new Promise(function(Y,te){o.push([j,q,Y,te])>1||u(j,q)})})}function u(j,q){try{!function h(j){j.value instanceof sn?Promise.resolve(j.value.v).then(C,x):P(o[0][2],j)}(r[j](q))}catch(Y){P(o[0][3],Y)}}function C(j){u("next",j)}function x(j){u("throw",j)}function P(j,q){j(q),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Mo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function ni(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(u,h){!function i(o,s,u,h){Promise.resolve(h).then(function(C){o({value:C,done:u})},s)}(u,h,(s=e[o](s)).done,s.value)})}}}const vr=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function mr(e){return J(null==e?void 0:e.then)}function yr(e){return J(e[k])}function Cr(e){return Symbol.asyncIterator&&J(null==e?void 0:e[Symbol.asyncIterator])}function br(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Sr=function ii(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wr(e){return J(null==e?void 0:e[Sr])}function Dr(e){return Eo(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield sn(n.read());if(i)return yield sn(void 0);yield yield sn(r)}}finally{n.releaseLock()}})}function Er(e){return J(null==e?void 0:e.getReader)}function an(e){if(e instanceof ne)return e;if(null!=e){if(yr(e))return function oi(e){return new ne(t=>{const n=e[k]();if(J(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(vr(e))return function si(e){return new ne(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(mr(e))return function ai(e){return new ne(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,v)})}(e);if(Cr(e))return Mr(e);if(wr(e))return function ci(e){return new ne(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Er(e))return function li(e){return Mr(Dr(e))}(e)}throw br(e)}function Mr(e){return new ne(t=>{(function ui(e,t){var n,r,i,o;return function Gt(e,t,n,r){return new(n||(n=Promise))(function(o,s){function u(x){try{C(r.next(x))}catch(P){s(P)}}function h(x){try{C(r.throw(x))}catch(P){s(P)}}function C(x){x.done?o(x.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(x.value).then(u,h)}C((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Mo(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Ht(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function xr(e,t,n=1/0){return J(t)?xr((r,i)=>function he(e,t){return W((n,r)=>{let i=0;n.subscribe(V(r,o=>{r.next(e.call(t,o,i++))}))})}((o,s)=>t(r,o,i,s))(an(e(r,i))),n):("number"==typeof t&&(n=t),W((r,i)=>function fi(e,t,n,r,i,o,s,u){const h=[];let C=0,x=0,P=!1;const j=()=>{P&&!h.length&&!C&&t.complete()},q=te=>C<r?Y(te):h.push(te),Y=te=>{o&&t.next(te),C++;let oe=!1;an(n(te,x++)).subscribe(V(t,se=>{null==i||i(se),o?q(se):t.next(se)},()=>{oe=!0},void 0,()=>{if(oe)try{for(C--;h.length&&C<r;){const se=h.shift();s?Ht(t,s,()=>Y(se)):Y(se)}j()}catch(se){t.error(se)}}))};return e.subscribe(V(t,q,()=>{P=!0,j()})),()=>{null==u||u()}}(r,i,e,n)))}const Qn=new ne(e=>e.complete());function Jn(e){return e[e.length-1]}function Tr(e,t=0){return W((n,r)=>{n.subscribe(V(r,i=>Ht(r,e,()=>r.next(i),t),()=>Ht(r,e,()=>r.complete(),t),i=>Ht(r,e,()=>r.error(i),t)))})}function Ar(e,t=0){return W((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Lr(e,t){if(!e)throw new Error("Iterable cannot be null");return new ne(n=>{Ht(n,t,()=>{const r=e[Symbol.asyncIterator]();Ht(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Ir(e,t){return t?function Si(e,t){if(null!=e){if(yr(e))return function vi(e,t){return an(e).pipe(Ar(t),Tr(t))}(e,t);if(vr(e))return function yi(e,t){return new ne(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(mr(e))return function mi(e,t){return an(e).pipe(Ar(t),Tr(t))}(e,t);if(Cr(e))return Lr(e,t);if(wr(e))return function Ci(e,t){return new ne(n=>{let r;return Ht(n,t,()=>{r=e[Sr](),Ht(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>J(null==r?void 0:r.return)&&r.return()})}(e,t);if(Er(e))return function bi(e,t){return Lr(Dr(e),t)}(e,t)}throw br(e)}(e,t):an(e)}function wi(...e){const t=function _i(e){return function pi(e){return e&&J(e.schedule)}(Jn(e))?e.pop():void 0}(e),n=function gi(e,t){return"number"==typeof Jn(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?an(r[0]):function di(e=1/0){return xr(H,e)}(n)(Ir(r,t)):Qn}function er(e,t,...n){return!0===t?(e(),null):!1===t?null:t(...n).pipe(function Di(e){return e<=0?()=>Qn:W((t,n)=>{let r=0;t.subscribe(V(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}(1)).subscribe(()=>e())}function Be(e){for(let t in e)if(e[t]===Be)return t;throw Error("Could not find renamed property on target object.")}function Fe(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Fe).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Or(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ko=Be({__forward_ref__:Be});function kr(e){return e.__forward_ref__=kr,e.toString=function(){return Fe(this())},e}function we(e){return function Mi(e){return"function"==typeof e&&e.hasOwnProperty(ko)&&e.__forward_ref__===kr}(e)?e():e}class ke extends Error{constructor(t,n){super(function Pr(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function be(e){return"string"==typeof e?e:null==e?"":String(e)}function et(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():be(e)}function Fr(e,t){const n=t?` in ${t}`:"";throw new ke(-201,`No provider for ${et(e)} found${n}`)}function lt(e,t){null==e&&function xe(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function He(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function tt(e){return{providers:e.providers||[],imports:e.imports||[]}}function vt(e){return Ye(e,Yt)||Ye(e,hn)}function Ye(e,t){return e.hasOwnProperty(t)?e[t]:null}function En(e){return e&&(e.hasOwnProperty(tr)||e.hasOwnProperty(nr))?e[tr]:null}const Yt=Be({\u0275prov:Be}),tr=Be({\u0275inj:Be}),hn=Be({ngInjectableDef:Be}),nr=Be({ngInjectorDef:Be});var ve=(()=>((ve=ve||{})[ve.Default=0]="Default",ve[ve.Host=1]="Host",ve[ve.Self=2]="Self",ve[ve.SkipSelf=4]="SkipSelf",ve[ve.Optional=8]="Optional",ve))();let Hr;function mt(e){const t=Hr;return Hr=e,t}function Mn(e,t,n){const r=vt(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ve.Optional?null:void 0!==t?t:void Fr(Fe(e),"Injector")}function rr(e){return{toString:e}.toString()}var pn=(()=>((pn=pn||{})[pn.OnPush=0]="OnPush",pn[pn.Default=1]="Default",pn))(),xn=(()=>{return(e=xn||(xn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",xn;var e})();const Wv="undefined"!=typeof globalThis&&globalThis,qv="undefined"!=typeof window&&window,$v="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ve=Wv||"undefined"!=typeof global&&global||qv||$v,Li={},Ue=[],Us=Be({\u0275cmp:Be}),uc=Be({\u0275dir:Be}),fc=Be({\u0275pipe:Be}),gf=Be({\u0275mod:Be}),Un=Be({\u0275fac:Be}),Bo=Be({__NG_ELEMENT_ID__:Be});let Gv=0;function jr(e){return rr(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===pn.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||Ue,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||xn.Emulated,id:"c",styles:e.styles||Ue,_:null,setInput:null,schemas:e.schemas||null,tView:null},i=e.directives,o=e.features,s=e.pipes;return r.id+=Gv++,r.inputs=Cf(e.inputs,n),r.outputs=Cf(e.outputs),o&&o.forEach(u=>u(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(vf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(mf):null,r})}function vf(e){return yt(e)||function ir(e){return e[uc]||null}(e)}function mf(e){return function Ur(e){return e[fc]||null}(e)}const yf={};function Vr(e){return rr(()=>{const t={type:e.type,bootstrap:e.bootstrap||Ue,declarations:e.declarations||Ue,imports:e.imports||Ue,exports:e.exports||Ue,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(yf[e.id]=e.type),t})}function Cf(e,t){if(null==e)return Li;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}const Zt=jr;function yt(e){return e[Us]||null}function Xt(e,t){const n=e[gf]||null;if(!n&&!0===t)throw new Error(`Type ${Fe(e)} does not have '\u0275mod' property.`);return n}function Tn(e){return Array.isArray(e)&&"object"==typeof e[1]}function gn(e){return Array.isArray(e)&&!0===e[1]}function pc(e){return 0!=(8&e.flags)}function $s(e){return 2==(2&e.flags)}function Gs(e){return 1==(1&e.flags)}function vn(e){return null!==e.template}function Jv(e){return 0!=(512&e[2])}function $r(e,t){return e.hasOwnProperty(Un)?e[Un]:null}class nm{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Vo(){return Sf}function Sf(e){return e.type.prototype.ngOnChanges&&(e.setInput=im),rm}function rm(){const e=Df(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Li)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function im(e,t,n,r){const i=Df(e)||function om(e,t){return e[wf]=t}(e,{previous:Li,current:null}),o=i.current||(i.current={}),s=i.previous,u=this.declaredInputs[n],h=s[u];o[u]=new nm(h&&h.currentValue,t,s===Li),e[r]=t}Vo.ngInherit=!0;const wf="__ngSimpleChanges__";function Df(e){return e[wf]||null}let yc;function Xe(e){return!!e.listen}const Ef={createRenderer:(e,t)=>function Cc(){return void 0!==yc?yc:"undefined"!=typeof document?document:void 0}()};function it(e){for(;Array.isArray(e);)e=e[0];return e}function en(e,t){return it(t[e.index])}function bc(e,t){return e.data[t]}function Ut(e,t){const n=t[e];return Tn(n)?n:n[0]}function Mf(e){return 4==(4&e[2])}function Sc(e){return 128==(128&e[2])}function or(e,t){return null==t?null:e[t]}function xf(e){e[18]=0}function wc(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const De={lFrame:Ff(null),bindingsEnabled:!0};function Af(){return De.bindingsEnabled}function re(){return De.lFrame.lView}function Pe(){return De.lFrame.tView}function Dc(e){return De.lFrame.contextLView=e,e[8]}function ut(){let e=Lf();for(;null!==e&&64===e.type;)e=e.parent;return e}function Lf(){return De.lFrame.currentTNode}function An(e,t){const n=De.lFrame;n.currentTNode=e,n.isParent=t}function Ec(){return De.lFrame.isParent}function Fi(){return De.lFrame.bindingIndex++}function Sm(e,t){const n=De.lFrame;n.bindingIndex=n.bindingRootIndex=e,xc(t)}function xc(e){De.lFrame.currentDirectiveIndex=e}function Of(){return De.lFrame.currentQueryIndex}function Ac(e){De.lFrame.currentQueryIndex=e}function Dm(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function kf(e,t,n){if(n&ve.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&ve.Host||(i=Dm(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;t=i,e=o}const r=De.lFrame=Pf();return r.currentTNode=t,r.lView=e,!0}function Zs(e){const t=Pf(),n=e[1];De.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Pf(){const e=De.lFrame,t=null===e?null:e.child;return null===t?Ff(e):t}function Ff(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Bf(){const e=De.lFrame;return De.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Nf=Bf;function Xs(){const e=Bf();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Et(){return De.lFrame.selectedIndex}function sr(e){De.lFrame.selectedIndex=e}function Qs(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:u,ngAfterViewInit:h,ngAfterViewChecked:C,ngOnDestroy:x}=o;s&&(e.contentHooks||(e.contentHooks=[])).push(-n,s),u&&((e.contentHooks||(e.contentHooks=[])).push(n,u),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,u)),h&&(e.viewHooks||(e.viewHooks=[])).push(-n,h),C&&((e.viewHooks||(e.viewHooks=[])).push(n,C),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,C)),null!=x&&(e.destroyHooks||(e.destroyHooks=[])).push(n,x)}}function Js(e,t,n){Hf(e,t,3,n)}function ea(e,t,n,r){(3&e[2])===n&&Hf(e,t,n,r)}function Lc(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Hf(e,t,n,r){const o=null!=r?r:-1,s=t.length-1;let u=0;for(let h=void 0!==r?65535&e[18]:0;h<s;h++)if("number"==typeof t[h+1]){if(u=t[h],null!=r&&u>=r)break}else t[h]<0&&(e[18]+=65536),(u<o||-1==o)&&(Om(e,n,t,h),e[18]=(4294901760&e[18])+h+2),h++}function Om(e,t,n,r){const i=n[r]<0,o=n[r+1],u=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(u)}finally{}}}else try{o.call(u)}finally{}}class zo{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ta(e,t,n){const r=Xe(e);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],u=n[i++],h=n[i++];r?e.setAttribute(t,u,h,s):t.setAttributeNS(s,u,h)}else{const s=o,u=n[++i];Rc(s)?r&&e.setProperty(t,s,u):r?e.setAttribute(t,s,u):t.setAttribute(s,u),i++}}return i}function jf(e){return 3===e||4===e||6===e}function Rc(e){return 64===e.charCodeAt(0)}function na(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Vf(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Vf(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const u=e[o++];if("number"==typeof u){if(u===t){s=-1;break}if(u>t){s=o-1;break}}}for(;o<e.length;){const u=e[o];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Uf(e){return-1!==e}function Bi(e){return 32767&e}function Ni(e,t){let n=function Nm(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Oc=!0;function ra(e){const t=Oc;return Oc=e,t}let Hm=0;function qo(e,t){const n=Pc(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,kc(r.data,e),kc(t,null),kc(r.blueprint,null));const i=ia(e,t),o=e.injectorIndex;if(Uf(i)){const s=Bi(i),u=Ni(i,t),h=u[1].data;for(let C=0;C<8;C++)t[o+C]=u[s+C]|h[s+C]}return t[o+8]=i,o}function kc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Pc(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function ia(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const o=i[1],s=o.type;if(r=2===s?o.declTNode:1===s?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function oa(e,t,n){!function jm(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Bo)&&(r=n[Bo]),null==r&&(r=n[Bo]=Hm++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function qf(e,t,n){if(n&ve.Optional)return e;Fr(t,"NodeInjector")}function $f(e,t,n,r){if(n&ve.Optional&&void 0===r&&(r=null),0==(n&(ve.Self|ve.Host))){const i=e[9],o=mt(void 0);try{return i?i.get(t,r,n&ve.Optional):Mn(t,r,n&ve.Optional)}finally{mt(o)}}return qf(r,t,n)}function Gf(e,t,n,r=ve.Default,i){if(null!==e){const o=function Wm(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Bo)?e[Bo]:void 0;return"number"==typeof t?t>=0?255&t:Um:t}(n);if("function"==typeof o){if(!kf(t,e,r))return r&ve.Host?qf(i,n,r):$f(t,n,r,i);try{const s=o(r);if(null!=s||r&ve.Optional)return s;Fr(n)}finally{Nf()}}else if("number"==typeof o){let s=null,u=Pc(e,t),h=-1,C=r&ve.Host?t[16][6]:null;for((-1===u||r&ve.SkipSelf)&&(h=-1===u?ia(e,t):t[u+8],-1!==h&&Zf(r,!1)?(s=t[1],u=Bi(h),t=Ni(h,t)):u=-1);-1!==u;){const x=t[1];if(Yf(o,u,x.data)){const P=zm(u,t,n,s,r,C);if(P!==Kf)return P}h=t[u+8],-1!==h&&Zf(r,t[1].data[u+8]===C)&&Yf(o,u,t)?(s=x,u=Bi(h),t=Ni(h,t)):u=-1}}}return $f(t,n,r,i)}const Kf={};function Um(){return new Hi(ut(),re())}function zm(e,t,n,r,i,o){const s=t[1],u=s.data[e+8],x=sa(u,s,n,null==r?$s(u)&&Oc:r!=s&&0!=(3&u.type),i&ve.Host&&o===u);return null!==x?$o(t,s,x,u):Kf}function sa(e,t,n,r,i){const o=e.providerIndexes,s=t.data,u=1048575&o,h=e.directiveStart,x=o>>20,j=i?u+x:e.directiveEnd;for(let q=r?u:u+x;q<j;q++){const Y=s[q];if(q<h&&n===Y||q>=h&&Y.type===n)return q}if(i){const q=s[h];if(q&&vn(q)&&q.type===n)return h}return null}function $o(e,t,n,r){let i=e[n];const o=t.data;if(function km(e){return e instanceof zo}(i)){const s=i;s.resolving&&function Po(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ke(-200,`Circular dependency in DI detected for ${e}${n}`)}(et(o[n]));const u=ra(s.canSeeViewProviders);s.resolving=!0;const h=s.injectImpl?mt(s.injectImpl):null;kf(e,r,ve.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Rm(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Sf(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o))}(n,o[n],t)}finally{null!==h&&mt(h),ra(u),s.resolving=!1,Nf()}}return i}function Yf(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Zf(e,t){return!(e&ve.Self||e&ve.Host&&t)}class Hi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Gf(this._tNode,this._lView,t,r,n)}}const Vi="__parameters__";function zi(e,t,n){return rr(()=>{const r=function Nc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return u.annotation=s,u;function u(h,C,x){const P=h.hasOwnProperty(Vi)?h[Vi]:Object.defineProperty(h,Vi,{value:[]})[Vi];for(;P.length<=x;)P.push(null);return(P[x]=P[x]||[]).push(s),h}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class je{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=He({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function tn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),tn(r,t)):t!==e&&t.push(r)}return t}function Ln(e,t){e.forEach(n=>Array.isArray(n)?Ln(n,t):t(n))}function Qf(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function aa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Zo={},Uc="__NG_DI_FLAG__",la="ngTempTokenPath",ny=/\n/gm,rd="__source",iy=Be({provide:String,useValue:Be});let Xo;function id(e){const t=Xo;return Xo=e,t}function oy(e,t=ve.Default){if(void 0===Xo)throw new ke(203,"");return null===Xo?Mn(e,void 0,t):Xo.get(e,t&ve.Optional?null:void 0,t)}function ze(e,t=ve.Default){return(function Fo(){return Hr}()||oy)(we(e),t)}const sy=ze;function zc(e){const t=[];for(let n=0;n<e.length;n++){const r=we(e[n]);if(Array.isArray(r)){if(0===r.length)throw new ke(900,"");let i,o=ve.Default;for(let s=0;s<r.length;s++){const u=r[s],h=ay(u);"number"==typeof h?-1===h?i=u.token:o|=h:i=u}t.push(ze(i,o))}else t.push(ze(r))}return t}function Qo(e,t){return e[Uc]=t,e.prototype[Uc]=t,e}function ay(e){return e[Uc]}const ua=Qo(zi("Optional"),8),fa=Qo(zi("SkipSelf"),4),Dd="__ngContext__";function bt(e,t){e[Dd]=t}function Jc(e){const t=function rs(e){return e[Dd]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function tl(e){return e.ngOriginalError}function Jy(e,...t){e.error(...t)}class is{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=function Qy(e){return e&&e.ngErrorLogger||Jy}(t);r(this._console,"ERROR",t),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&tl(t);for(;n&&tl(n);)n=tl(n);return n||null}}const u0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ve))();function Rn(e){return e instanceof Function?e():e}var Wt=(()=>((Wt=Wt||{})[Wt.Important=1]="Important",Wt[Wt.DashCase=2]="DashCase",Wt))();function rl(e,t){return undefined(e,t)}function os(e){const t=e[3];return gn(t)?t[3]:t}function il(e){return Od(e[13])}function ol(e){return Od(e[4])}function Od(e){for(;null!==e&&!gn(e);)e=e[4];return e}function Ki(e,t,n,r,i){if(null!=r){let o,s=!1;gn(r)?o=r:Tn(r)&&(s=!0,r=r[0]);const u=it(r);0===e&&null!==n?null==i?Hd(t,n,u):Gr(t,n,u,i||null,!0):1===e&&null!==n?Gr(t,n,u,i||null,!0):2===e?function $d(e,t,n){const r=va(e,t);r&&function D0(e,t,n,r){Xe(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,u,s):3===e&&t.destroyNode(u),null!=o&&function x0(e,t,n,r,i){const o=n[7];o!==it(n)&&Ki(t,e,r,o,i);for(let u=10;u<n.length;u++){const h=n[u];ss(h[1],h,e,t,r,o)}}(t,e,o,n,i)}}function al(e,t,n){if(Xe(e))return e.createElement(t,n);{const r=null!==n?function lm(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function Pd(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,wc(i,-1)),n.splice(r,1)}function cl(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Pd(i,r),t>0&&(e[n-1][4]=r[4]);const o=aa(e,10+t);!function g0(e,t){ss(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Fd(e,t){if(!(256&t[2])){const n=t[11];Xe(n)&&n.destroyNode&&ss(e,t,n,3,null,null),function y0(e){let t=e[13];if(!t)return ll(e[1],e);for(;t;){let n=null;if(Tn(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Tn(t)&&ll(t[1],t),t=t[3];null===t&&(t=e),Tn(t)&&ll(t[1],t),n=t&&t[4]}t=n}}(t)}}function ll(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function w0(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof zo)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const u=i[o[s]],h=o[s+1];try{h.call(u)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function S0(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+1],u="function"==typeof s?s(t):it(t[s]),h=r[i=n[o+2]],C=n[o+3];"boolean"==typeof C?u.removeEventListener(n[o],h,C):C>=0?r[i=C]():r[i=-C].unsubscribe(),o+=2}else{const s=r[i=n[o+1]];n[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();t[7]=null}}(e,t),1===t[1].type&&Xe(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&gn(t[3])){n!==t[3]&&Pd(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Bd(e,t,n){return function Nd(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===xn.None||i===xn.Emulated)return null}return en(r,n)}(e,t.parent,n)}function Gr(e,t,n,r,i){Xe(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Hd(e,t,n){Xe(e)?e.appendChild(t,n):t.appendChild(n)}function jd(e,t,n,r,i){null!==r?Gr(e,t,n,r,i):Hd(e,t,n)}function va(e,t){return Xe(e)?e.parentNode(t):t.parentNode}let zd=function Ud(e,t,n){return 40&e.type?en(e,n):null};function ma(e,t,n,r){const i=Bd(e,r,t),o=t[11],u=function Vd(e,t,n){return zd(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let h=0;h<n.length;h++)jd(o,i,n[h],u,!1);else jd(o,i,n,u,!1)}function ya(e,t){if(null!==t){const n=t.type;if(3&n)return en(t,e);if(4&n)return fl(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return ya(e,r);{const i=e[t.index];return gn(i)?fl(-1,i):it(i)}}if(32&n)return rl(t,e)()||it(e[t.index]);{const r=qd(e,t);return null!==r?Array.isArray(r)?r[0]:ya(os(e[16]),r):ya(e,t.next)}}return null}function qd(e,t){return null!==t?e[16][6].projection[t.projection]:null}function fl(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return ya(r,i)}return t[7]}function dl(e,t,n,r,i,o,s){for(;null!=n;){const u=r[n.index],h=n.type;if(s&&0===t&&(u&&bt(it(u),r),n.flags|=4),64!=(64&n.flags))if(8&h)dl(e,t,n.child,r,i,o,!1),Ki(t,e,i,u,o);else if(32&h){const C=rl(n,r);let x;for(;x=C();)Ki(t,e,i,x,o);Ki(t,e,i,u,o)}else 16&h?Gd(e,t,r,n,i,o):Ki(t,e,i,u,o);n=s?n.projectionNext:n.next}}function ss(e,t,n,r,i,o){dl(n,r,e.firstChild,t,i,o,!1)}function Gd(e,t,n,r,i,o){const s=n[16],h=s[6].projection[r.projection];if(Array.isArray(h))for(let C=0;C<h.length;C++)Ki(t,e,i,h[C],o);else dl(e,t,h,s[3],i,o,!0)}function Kd(e,t,n){Xe(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function hl(e,t,n){Xe(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Yd(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}const Zd="ng-template";function A0(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Yd(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Xd(e){return 4===e.type&&e.value!==Zd}function L0(e,t,n){return t===(4!==e.type||n?e.value:Zd)}function I0(e,t,n){let r=4;const i=e.attrs||[],o=function k0(e){for(let t=0;t<e.length;t++)if(jf(e[t]))return t;return e.length}(i);let s=!1;for(let u=0;u<t.length;u++){const h=t[u];if("number"!=typeof h){if(!s)if(4&r){if(r=2|1&r,""!==h&&!L0(e,h,n)||""===h&&1===t.length){if(mn(r))return!1;s=!0}}else{const C=8&r?h:t[++u];if(8&r&&null!==e.attrs){if(!A0(e.attrs,C,n)){if(mn(r))return!1;s=!0}continue}const P=R0(8&r?"class":h,i,Xd(e),n);if(-1===P){if(mn(r))return!1;s=!0;continue}if(""!==C){let j;j=P>o?"":i[P+1].toLowerCase();const q=8&r?j:null;if(q&&-1!==Yd(q,C,0)||2&r&&C!==j){if(mn(r))return!1;s=!0}}}}else{if(!s&&!mn(r)&&!mn(h))return!1;if(s&&mn(h))continue;s=!1,r=h|1&r}}return mn(r)||s}function mn(e){return 0==(1&e)}function R0(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let u=t[++i];for(;"string"==typeof u;)u=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function P0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Qd(e,t,n=!1){for(let r=0;r<t.length;r++)if(I0(e,t[r],n))return!0;return!1}function Jd(e,t){return e?":not("+t.trim()+")":t}function B0(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const u=e[++n];i+="["+s+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!mn(s)&&(t+=Jd(o,i),i=""),r=s,o=o||!mn(r);n++}return""!==i&&(t+=Jd(o,i)),t}const Ee={};function xt(e){eh(Pe(),re(),Et()+e,!1)}function eh(e,t,n,r){if(!r)if(3==(3&t[2])){const o=e.preOrderCheckHooks;null!==o&&Js(t,o,n)}else{const o=e.preOrderHooks;null!==o&&ea(t,o,0,n)}sr(n)}function fh(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const s=e.data[o];Ac(i),s.contentQueries(2,t[o],o)}}}function as(e,t,n,r,i,o,s,u,h,C){const x=t.blueprint.slice();return x[0]=i,x[2]=140|r,xf(x),x[3]=x[15]=e,x[8]=n,x[10]=s||e&&e[10],x[11]=u||e&&e[11],x[12]=h||e&&e[12]||null,x[9]=C||e&&e[9]||null,x[6]=o,x[16]=2==t.type?e[16]:x,x}function Yi(e,t,n,r,i){let o=e.data[t];if(null===o)o=function El(e,t,n,r,i){const o=Lf(),s=Ec(),h=e.data[t]=function tC(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=h),null!==o&&(s?null==o.child&&null!==h.parent&&(o.child=h):null===o.next&&(o.next=h)),h}(e,t,n,r,i),function bm(){return De.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Uo(){const e=De.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return An(o,!0),o}function Zi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function cs(e,t,n){Zs(t);try{const r=e.viewQuery;null!==r&&kl(1,r,n);const i=e.template;null!==i&&dh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&fh(e,t),e.staticViewQueries&&kl(2,e.viewQuery,n);const o=e.components;null!==o&&function Q0(e,t){for(let n=0;n<t.length;n++)yC(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Xs()}}function Xi(e,t,n,r){const i=t[2];if(256!=(256&i)){Zs(t);try{xf(t),function If(e){return De.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&dh(e,t,n,2,r);const s=3==(3&i);if(s){const C=e.preOrderCheckHooks;null!==C&&Js(t,C,null)}else{const C=e.preOrderHooks;null!==C&&ea(t,C,0,null),Lc(t,0)}if(function vC(e){for(let t=il(e);null!==t;t=ol(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],o=i[3];0==(1024&i[2])&&wc(o,1),i[2]|=1024}}}(t),function gC(e){for(let t=il(e);null!==t;t=ol(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];Sc(r)&&Xi(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&fh(e,t),s){const C=e.contentCheckHooks;null!==C&&Js(t,C)}else{const C=e.contentHooks;null!==C&&ea(t,C,1),Lc(t,1)}!function Z0(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)sr(~i);else{const o=i,s=n[++r],u=n[++r];Sm(s,o),u(2,t[o])}}}finally{sr(-1)}}(e,t);const u=e.components;null!==u&&function X0(e,t){for(let n=0;n<t.length;n++)mC(e,t[n])}(t,u);const h=e.viewQuery;if(null!==h&&kl(2,h,r),s){const C=e.viewCheckHooks;null!==C&&Js(t,C)}else{const C=e.viewHooks;null!==C&&ea(t,C,2),Lc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-73,1024&t[2]&&(t[2]&=-1025,wc(t[3],-1))}finally{Xs()}}}function J0(e,t,n,r){const i=t[10],s=Mf(t);try{!s&&i.begin&&i.begin(),s&&cs(e,t,r),Xi(e,t,n,r)}finally{!s&&i.end&&i.end()}}function dh(e,t,n,r,i){const o=Et(),s=2&r;try{sr(-1),s&&t.length>20&&eh(e,t,20,!1),n(r,i)}finally{sr(o)}}function Ml(e,t,n){!Af()||(function cC(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||qo(n,t),bt(r,t);const s=n.initialInputs;for(let u=i;u<o;u++){const h=e.data[u],C=vn(h);C&&hC(t,n,h);const x=$o(t,e,u,n);bt(x,t),null!==s&&pC(0,u-i,x,h,0,s),C&&(Ut(n.index,t)[8]=x)}}(e,t,n,en(n,t)),128==(128&n.flags)&&function lC(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,u=function wm(){return De.lFrame.currentDirectiveIndex}();try{sr(s);for(let h=r;h<i;h++){const C=e.data[h],x=t[h];xc(h),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&bh(C,x)}}finally{sr(-1),xc(u)}}(e,t,n))}function xl(e,t,n=en){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],u=-1===s?n(t,e):e[s];e[i++]=u}}}function ph(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=wa(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function wa(e,t,n,r,i,o,s,u,h,C){const x=20+r,P=x+i,j=function eC(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Ee);return n}(x,P),q="function"==typeof C?C():C;return j[1]={type:e,blueprint:j,template:n,queries:null,viewQuery:u,declTNode:t,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:h,consts:q,incompleteFirstPass:!1}}function vh(e,t,n,r){const i=xh(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Th(e).push(r,i.length-1))}function mh(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Tl(e,t,n,r){let i=!1;if(Af()){const o=function uC(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Qd(n,s.selectors,!1)&&(i||(i=[]),oa(qo(n,t),e,s.type),vn(s)?(Sh(e,n),i.unshift(s)):i.push(s))}return i}(e,t,n),s=null===r?null:{"":-1};if(null!==o){i=!0,wh(n,e.data.length,o.length);for(let x=0;x<o.length;x++){const P=o[x];P.providersResolver&&P.providersResolver(P)}let u=!1,h=!1,C=Zi(e,t,o.length,null);for(let x=0;x<o.length;x++){const P=o[x];n.mergedAttrs=na(n.mergedAttrs,P.hostAttrs),Dh(e,n,t,C,P),dC(C,P,s),null!==P.contentQueries&&(n.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(n.flags|=128);const j=P.type.prototype;!u&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),u=!0),!h&&(j.ngOnChanges||j.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),h=!0),C++}!function nC(e,t){const r=t.directiveEnd,i=e.data,o=t.attrs,s=[];let u=null,h=null;for(let C=t.directiveStart;C<r;C++){const x=i[C],P=x.inputs,j=null===o||Xd(t)?null:_C(P,o);s.push(j),u=mh(P,C,u),h=mh(x.outputs,C,h)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=16),u.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=u,t.outputs=h}(e,n)}s&&function fC(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new ke(-301,!1);r.push(t[i],o)}}}(n,r,s)}return n.mergedAttrs=na(n.mergedAttrs,n.attrs),i}function Ch(e,t,n,r,i,o){const s=o.hostBindings;if(s){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const h=~t.index;(function aC(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=h&&u.push(h),u.push(r,i,s)}}function bh(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Sh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function dC(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;vn(t)&&(n[""]=e)}}function wh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Dh(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=$r(i.type)),s=new zo(o,vn(i),null);e.blueprint[r]=s,n[r]=s,Ch(e,t,0,r,Zi(e,n,i.hostVars,Ee),i)}function hC(e,t,n){const r=en(t,e),i=ph(n),o=e[10],s=Da(e,as(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=s}function pC(e,t,n,r,i,o){const s=o[t];if(null!==s){const u=r.setInput;for(let h=0;h<s.length;){const C=s[h++],x=s[h++],P=s[h++];null!==u?r.setInput(n,P,C,x):n[x]=P}}}function _C(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Eh(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function mC(e,t){const n=Ut(t,e);if(Sc(n)){const r=n[1];80&n[2]?Xi(r,n,r.template,n[8]):n[5]>0&&Ll(n)}}function Ll(e){for(let r=il(e);null!==r;r=ol(r))for(let i=10;i<r.length;i++){const o=r[i];if(1024&o[2]){const s=o[1];Xi(s,o,s.template,o[8])}else o[5]>0&&Ll(o)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ut(n[r],e);Sc(i)&&i[5]>0&&Ll(i)}}function yC(e,t){const n=Ut(t,e),r=n[1];(function CC(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),cs(r,n,n[8])}function Da(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Il(e){for(;e;){e[2]|=64;const t=os(e);if(Jv(e)&&!t)return e;e=t}return null}function Mh(e){!function Rl(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Jc(n),i=r[1];J0(i,r,i.template,n)}}(e[8])}function kl(e,t,n){Ac(0),t(e,n)}const SC=(()=>Promise.resolve(null))();function xh(e){return e[7]||(e[7]=[])}function Th(e){return e.cleanup||(e.cleanup=[])}function Lh(e,t){const n=e[9],r=n?n.get(is,null):null;r&&r.handleError(t)}function Ih(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],u=n[o++],h=t[s],C=e.data[s];null!==C.setInput?C.setInput(h,i,r,u):h[u]=i}}function $n(e,t,n){const r=function Ks(e,t){return it(t[e])}(t,e);!function kd(e,t,n){Xe(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function Ea(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const u=t[s];"number"==typeof u?o=u:1==o?i=Or(i,u):2==o&&(r=Or(r,u+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Pl=new je("INJECTOR",-1);class Rh{get(t,n=Zo){if(n===Zo){const r=new Error(`NullInjectorError: No provider for ${Fe(t)}!`);throw r.name="NullInjectorError",r}return n}}const Fl=new je("Set Injector scope."),ls={},EC={};let Bl;function Oh(){return void 0===Bl&&(Bl=new Rh),Bl}function kh(e,t=null,n=null,r){const i=Ph(e,t,n,r);return i._resolveInjectorDefTypes(),i}function Ph(e,t=null,n=null,r){return new MC(e,n,t||Oh(),r)}class MC{constructor(t,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];n&&Ln(n,u=>this.processProvider(u,t,n)),Ln([t],u=>this.processInjectorType(u,[],o)),this.records.set(Pl,Qi(void 0,this));const s=this.records.get(Fl);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:Fe(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=Zo,r=ve.Default){this.assertNotDestroyed();const i=id(this),o=mt(void 0);try{if(!(r&ve.SkipSelf)){let u=this.records.get(t);if(void 0===u){const h=function kC(e){return"function"==typeof e||"object"==typeof e&&e instanceof je}(t)&&vt(t);u=h&&this.injectableDefInScope(h)?Qi(Nl(t),ls):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&ve.Self?Oh():this.parent).get(t,n=r&ve.Optional&&n===Zo?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[la]=s[la]||[]).unshift(Fe(t)),i)throw s;return function cy(e,t,n,r){const i=e[la];throw t[rd]&&i.unshift(t[rd]),e.message=function ly(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=Fe(t);if(Array.isArray(t))i=t.map(Fe).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let u=t[s];o.push(s+":"+("string"==typeof u?JSON.stringify(u):Fe(u)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(ny,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[la]=null,e}(s,t,"R3InjectorError",this.source)}throw s}finally{mt(o),id(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,i)=>t.push(Fe(i))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(t,n,r){if(!(t=we(t)))return!1;let i=En(t);const o=null==i&&t.ngModule||void 0,s=void 0===o?t:o,u=-1!==r.indexOf(s);if(void 0!==o&&(i=En(o)),null==i)return!1;if(null!=i.imports&&!u){let x;r.push(s);try{Ln(i.imports,P=>{this.processInjectorType(P,n,r)&&(void 0===x&&(x=[]),x.push(P))})}finally{}if(void 0!==x)for(let P=0;P<x.length;P++){const{ngModule:j,providers:q}=x[P];Ln(q,Y=>this.processProvider(Y,j,q||Ue))}}this.injectorDefTypes.add(s);const h=$r(s)||(()=>new s);this.records.set(s,Qi(h,ls));const C=i.providers;if(null!=C&&!u){const x=t;Ln(C,P=>this.processProvider(P,x,C))}return void 0!==o&&void 0!==t.providers}processProvider(t,n,r){let i=Ji(t=we(t))?t:we(t&&t.provide);const o=function TC(e,t,n){return Bh(e)?Qi(void 0,e.useValue):Qi(function Fh(e,t,n){let r;if(Ji(e)){const i=we(e);return $r(i)||Nl(i)}if(Bh(e))r=()=>we(e.useValue);else if(function LC(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...zc(e.deps||[]));else if(function AC(e){return!(!e||!e.useExisting)}(e))r=()=>ze(we(e.useExisting));else{const i=we(e&&(e.useClass||e.provide));if(!function RC(e){return!!e.deps}(e))return $r(i)||Nl(i);r=()=>new i(...zc(e.deps))}return r}(e),ls)}(t);if(Ji(t)||!0!==t.multi)this.records.get(i);else{let s=this.records.get(i);s||(s=Qi(void 0,ls,!0),s.factory=()=>zc(s.multi),this.records.set(i,s)),i=t,s.multi.push(t)}this.records.set(i,o)}hydrate(t,n){return n.value===ls&&(n.value=EC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function OC(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=we(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Nl(e){const t=vt(e),n=null!==t?t.factory:$r(e);if(null!==n)return n;if(e instanceof je)throw new ke(204,!1);if(e instanceof Function)return function xC(e){const t=e.length;if(t>0)throw function Yo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new ke(204,!1);const n=function dn(e){const t=e&&(e[Yt]||e[hn]);if(t){const n=function jt(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new ke(204,!1)}function Qi(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Bh(e){return null!==e&&"object"==typeof e&&iy in e}function Ji(e){return"function"==typeof e}let kn=(()=>{class e{static create(n,r){var i;if(Array.isArray(n))return kh({name:""},r,n,"");{const o=null!==(i=n.name)&&void 0!==i?i:"";return kh({name:o},n.parent,n.providers,o)}}}return e.THROW_IF_NOT_FOUND=Zo,e.NULL=new Rh,e.\u0275prov=He({token:e,providedIn:"any",factory:()=>ze(Pl)}),e.__NG_ELEMENT_ID__=-1,e})();function UC(e,t){Qs(Jc(e)[1],ut())}let Ma=null;function eo(){if(!Ma){const e=Ve.Symbol;if(e&&e.iterator)Ma=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ma=r)}}}return Ma}function us(e){return!!function Ul(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&eo()in e)}function St(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Gn(e,t,n,r,i,o,s,u){const h=re(),C=Pe(),x=e+20,P=C.firstCreatePass?function JC(e,t,n,r,i,o,s,u,h){const C=t.consts,x=Yi(t,e,4,s||null,or(C,u));Tl(t,n,x,or(C,h)),Qs(t,x);const P=x.tViews=wa(2,x,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,C);return null!==t.queries&&(t.queries.template(t,x),P.queries=t.queries.embeddedTView(x)),x}(x,C,h,t,n,r,i,o,s):C.data[x];An(P,!1);const j=h[11].createComment("");ma(C,h,j,P),bt(j,h),Da(h,h[x]=Eh(j,h,j,P)),Gs(P)&&Ml(C,h,P),null!=s&&xl(h,P,u)}function Ie(e,t=ve.Default){const n=re();return null===n?ze(e,t):Gf(ut(),n,we(e),t)}function Pt(e,t,n){const r=re();return St(r,Fi(),t)&&function qt(e,t,n,r,i,o,s,u){const h=en(t,n);let x,C=t.inputs;!u&&null!=C&&(x=C[r])?(Ih(e,n,x,r,i),$s(t)&&function iC(e,t){const n=Ut(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function rC(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,Xe(o)?o.setProperty(h,r,i):Rc(r)||(h.setProperty?h.setProperty(r,i):h[r]=i))}(Pe(),function Qe(){const e=De.lFrame;return bc(e.tView,e.selectedIndex)}(),r,e,t,r[11],n,!1),Pt}function Gl(e,t,n,r,i){const s=i?"class":"style";Ih(e,n,t.inputs[s],s,r)}function pe(e,t,n,r){const i=re(),o=Pe(),s=20+e,u=i[11],h=i[s]=al(u,t,function Im(){return De.lFrame.currentNamespace}()),C=o.firstCreatePass?function Sb(e,t,n,r,i,o,s){const u=t.consts,C=Yi(t,e,2,i,or(u,o));return Tl(t,n,C,or(u,s)),null!==C.attrs&&Ea(C,C.attrs,!1),null!==C.mergedAttrs&&Ea(C,C.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,C),C}(s,o,i,0,t,n,r):o.data[s];An(C,!0);const x=C.mergedAttrs;null!==x&&ta(u,h,x);const P=C.classes;null!==P&&hl(u,h,P);const j=C.styles;return null!==j&&Kd(u,h,j),64!=(64&C.flags)&&ma(o,i,h,C),0===function _m(){return De.lFrame.elementDepthCount}()&&bt(h,i),function gm(){De.lFrame.elementDepthCount++}(),Gs(C)&&(Ml(o,i,C),function hh(e,t,n){if(pc(t)){const i=t.directiveEnd;for(let o=t.directiveStart;o<i;o++){const s=e.data[o];s.contentQueries&&s.contentQueries(1,n[o],o)}}}(o,C,i)),null!==r&&xl(i,C),pe}function ge(){let e=ut();Ec()?function Mc(){De.lFrame.isParent=!1}():(e=e.parent,An(e,!1));const t=e;!function vm(){De.lFrame.elementDepthCount--}();const n=Pe();return n.firstCreatePass&&(Qs(n,e),pc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Fm(e){return 0!=(16&e.flags)}(t)&&Gl(n,t,re(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Bm(e){return 0!=(32&e.flags)}(t)&&Gl(n,t,re(),t.stylesWithoutHost,!1),ge}function Tt(e,t,n,r){return pe(e,t,n,r),ge(),Tt}function Zl(){return re()}function Xl(e){return!!e&&"function"==typeof e.then}const Db=function mp(e){return!!e&&"function"==typeof e.subscribe};function Yr(e,t,n,r){const i=re(),o=Pe(),s=ut();return function Cp(e,t,n,r,i,o,s,u){const h=Gs(r),x=e.firstCreatePass&&Th(e),P=t[8],j=xh(t);let q=!0;if(3&r.type||u){const oe=en(r,t),se=u?u(oe):oe,Q=j.length,le=u?Me=>u(it(Me[r.index])):r.index;if(Xe(n)){let Me=null;if(!u&&h&&(Me=function Eb(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const u=t[7],h=i[o+2];return u.length>h?u[h]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=o,Me.__ngLastListenerFn__=o,q=!1;else{o=Ql(r,t,P,o,!1);const Oe=n.listen(se,i,o);j.push(o,Oe),x&&x.push(i,le,Q,Q+1)}}else o=Ql(r,t,P,o,!0),se.addEventListener(i,o,s),j.push(o),x&&x.push(i,le,Q,s)}else o=Ql(r,t,P,o,!1);const Y=r.outputs;let te;if(q&&null!==Y&&(te=Y[i])){const oe=te.length;if(oe)for(let se=0;se<oe;se+=2){const It=t[te[se]][te[se+1]].subscribe(o),Zn=j.length;j.push(o,It),x&&x.push(i,r.index,Zn,-(Zn+1))}}}(o,i,i[11],s,e,t,!!n,r),Yr}function bp(e,t,n,r){try{return!1!==n(r)}catch(i){return Lh(e,i),!1}}function Ql(e,t,n,r,i){return function o(s){if(s===Function)return r;const u=2&e.flags?Ut(e.index,t):t;0==(32&t[2])&&Il(u);let h=bp(t,0,r,s),C=o.__ngNextListenerFn__;for(;C;)h=bp(t,0,C,s)&&h,C=C.__ngNextListenerFn__;return i&&!1===h&&(s.preventDefault(),s.returnValue=!1),h}}function Jl(e=1){return function Em(e){return(De.lFrame.contextLView=function Mm(e,t){for(;e>0;)t=t[15],e--;return t}(e,De.lFrame.contextLView))[8]}(e)}function fe(e,t=""){const n=re(),r=Pe(),i=e+20,o=r.firstCreatePass?Yi(r,i,1,t,null):r.data[i],s=n[i]=function sl(e,t){return Xe(e)?e.createText(t):e.createTextNode(t)}(n[11],t);ma(r,n,s,o),An(o,!1)}function nu(e){return La("",e,""),nu}function La(e,t,n){const r=re(),i=function no(e,t,n,r){return St(e,Fi(),n)?t+be(n)+r:Ee}(r,e,t,n);return i!==Ee&&$n(r,Et(),i),La}const Ia="en-US";let h_=Ia;class N_{}class _w{resolveComponentFactory(t){throw function pw(e){const t=Error(`No component factory found for ${Fe(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Fa=(()=>{class e{}return e.NULL=new _w,e})();function gw(){return _o(ut(),re())}function _o(e,t){return new go(en(e,t))}let go=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=gw,e})();function vw(e){return e instanceof go?e.nativeElement:e}class j_{}let Cw=(()=>{class e{}return e.\u0275prov=He({token:e,providedIn:"root",factory:()=>null}),e})();class lu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const bw=new lu("13.3.11"),uu={};function Ba(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];if(null!==o&&r.push(it(o)),gn(o))for(let u=10;u<o.length;u++){const h=o[u],C=h[1].firstChild;null!==C&&Ba(h[1],h,C,r)}const s=n.type;if(8&s)Ba(e,t,n.child,r);else if(32&s){const u=rl(n,t);let h;for(;h=u();)r.push(h)}else if(16&s){const u=qd(t,n);if(Array.isArray(u))r.push(...u);else{const h=os(t[16]);Ba(h[1],h,u,r,!0)}}n=i?n.projectionNext:n.next}return r}class vs{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Ba(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(gn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(cl(t,r),aa(n,r))}this._attachedToViewContainer=!1}Fd(this._lView[1],this._lView)}onDestroy(t){vh(this._lView[1],this._lView,null,t)}markForCheck(){Il(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Ol(e,t,n){const r=t[10];r.begin&&r.begin();try{Xi(e,t,e.template,n)}catch(i){throw Lh(t,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function m0(e,t){ss(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=t}}class Sw extends vs{constructor(t){super(t),this._view=t}detectChanges(){Mh(this._view)}checkNoChanges(){}get context(){return null}}class U_ extends Fa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=yt(t);return new fu(n,this.ngModule)}}function z_(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class fu extends N_{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function N0(e){return e.map(B0).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return z_(this.componentDef.inputs)}get outputs(){return z_(this.componentDef.outputs)}create(t,n,r,i){const o=(i=i||this.ngModule)?function Dw(e,t){return{get:(n,r,i)=>{const o=e.get(n,uu,i);return o!==uu||r===uu?o:t.get(n,r,i)}}}(t,i.injector):t,s=o.get(j_,Ef),u=o.get(Cw,null),h=s.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",x=r?function gh(e,t,n){if(Xe(e))return e.selectRootElement(t,n===xn.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(h,r,this.componentDef.encapsulation):al(s.createRenderer(null,this.componentDef),C,function ww(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(C)),P=this.componentDef.onPush?576:528,j=function Kh(e,t){return{components:[],scheduler:e||u0,clean:SC,playerHandler:t||null,flags:0}}(),q=wa(0,null,null,1,0,null,null,null,null,null),Y=as(null,q,j,P,null,null,s,h,u,o);let te,oe;Zs(Y);try{const se=function $h(e,t,n,r,i,o){const s=n[1];n[20]=e;const h=Yi(s,20,2,"#host",null),C=h.mergedAttrs=t.hostAttrs;null!==C&&(Ea(h,C,!0),null!==e&&(ta(i,e,C),null!==h.classes&&hl(i,e,h.classes),null!==h.styles&&Kd(i,e,h.styles)));const x=r.createRenderer(e,t),P=as(n,ph(t),null,t.onPush?64:16,n[20],h,r,x,o||null,null);return s.firstCreatePass&&(oa(qo(h,n),s,t.type),Sh(s,h),wh(h,n.length,1)),Da(n,P),n[20]=P}(x,this.componentDef,Y,s,h);if(x)if(r)ta(h,x,["ng-version",bw.full]);else{const{attrs:Q,classes:le}=function H0(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!mn(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);Q&&ta(h,x,Q),le&&le.length>0&&hl(h,x,le.join(" "))}if(oe=bc(q,20),void 0!==n){const Q=oe.projection=[];for(let le=0;le<this.ngContentSelectors.length;le++){const Me=n[le];Q.push(null!=Me?Array.from(Me):null)}}te=function Gh(e,t,n,r,i){const o=n[1],s=function sC(e,t,n){const r=ut();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Dh(e,r,t,Zi(e,t,1,null),n));const i=$o(t,e,r.directiveStart,r);bt(i,t);const o=en(r,t);return o&&bt(o,t),i}(o,n,t);if(r.components.push(s),e[8]=s,i&&i.forEach(h=>h(s,t)),t.contentQueries){const h=ut();t.contentQueries(1,s,h.directiveStart)}const u=ut();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(sr(u.index),Ch(n[1],u,0,u.directiveStart,u.directiveEnd,t),bh(t,s)),s}(se,this.componentDef,Y,j,[UC]),cs(q,Y,null)}finally{Xs()}return new Mw(this.componentType,te,_o(oe,Y),Y,oe)}}class Mw extends class hw{}{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=n,this.hostView=this.changeDetectorRef=new Sw(i),this.componentType=t}get injector(){return new Hi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class vo{}const mo=new Map;class $_ extends vo{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new U_(this);const r=Xt(t);this._bootstrapComponents=Rn(r.bootstrap),this._r3Injector=Ph(t,n,[{provide:vo,useValue:this},{provide:Fa,useValue:this.componentFactoryResolver}],Fe(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=kn.THROW_IF_NOT_FOUND,r=ve.Default){return t===kn||t===vo||t===Pl?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class du extends class Tw{}{constructor(t){super(),this.moduleType=t,null!==Xt(t)&&function Aw(e){const t=new Set;!function n(r){const i=Xt(r,!0),o=i.id;null!==o&&(function W_(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${Fe(t)} vs ${Fe(t.name)}`)}(o,mo.get(o),r),mo.set(o,r));const s=Rn(i.imports);for(const u of s)t.has(u)||(t.add(u),n(u))}(e)}(t)}create(t){return new $_(this.moduleType,t)}}function hu(e){return t=>{setTimeout(e,void 0,t)}}const Nn=class Gw extends N{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var i,o,s;let u=t,h=n||(()=>null),C=r;if(t&&"object"==typeof t){const P=t;u=null===(i=P.next)||void 0===i?void 0:i.bind(P),h=null===(o=P.error)||void 0===o?void 0:o.bind(P),C=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}this.__isAsync&&(h=hu(h),u&&(u=hu(u)),C&&(C=hu(C)));const x=super.subscribe({next:u,error:h,complete:C});return t instanceof S&&t.add(x),x}};function Kw(){return this._results[eo()]()}class pu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=eo(),r=pu.prototype;r[n]||(r[n]=Kw)}get changes(){return this._changes||(this._changes=new Nn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=tn(t);(this._changesDetected=!function Gm(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Kn=(()=>{class e{}return e.__NG_ELEMENT_ID__=Xw,e})();const Yw=Kn,Zw=class extends Yw{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t){const n=this._declarationTContainer.tViews,r=as(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),cs(n,r,t),new vs(r)}};function Xw(){return Na(ut(),re())}function Na(e,t){return 4&e.type?new Zw(t,e,_o(e,t)):null}let Hn=(()=>{class e{}return e.__NG_ELEMENT_ID__=Qw,e})();function Qw(){return eg(ut(),re())}const Jw=Hn,Q_=class extends Jw{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return _o(this._hostTNode,this._hostLView)}get injector(){return new Hi(this._hostTNode,this._hostLView)}get parentInjector(){const t=ia(this._hostTNode,this._hostLView);if(Uf(t)){const n=Ni(t,this._hostLView),r=Bi(t);return new Hi(n[1].data[r+8],n)}return new Hi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=J_(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){const i=t.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(t,n,r,i,o){const s=t&&!function Ko(e){return"function"==typeof e}(t);let u;if(s)u=n;else{const P=n||{};u=P.index,r=P.injector,i=P.projectableNodes,o=P.ngModuleRef}const h=s?t:new fu(yt(t)),C=r||this.parentInjector;if(!o&&null==h.ngModule){const j=(s?C:this.parentInjector).get(vo,null);j&&(o=j)}const x=h.create(C,i,void 0,o);return this.insert(x.hostView,u),x}insert(t,n){const r=t._lView,i=r[1];if(function pm(e){return gn(e[3])}(r)){const x=this.indexOf(t);if(-1!==x)this.detach(x);else{const P=r[3],j=new Q_(P,P[6],P[3]);j.detach(j.indexOf(t))}}const o=this._adjustIndex(n),s=this._lContainer;!function C0(e,t,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],Qf(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function b0(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const u=t[19];null!==u&&u.insertView(e),t[2]|=128}(i,r,s,o);const u=fl(o,s),h=r[11],C=va(h,s[7]);return null!==C&&function v0(e,t,n,r,i,o){r[0]=i,r[6]=t,ss(e,r,n,1,i,o)}(i,s[6],h,r,C,u),t.attachToViewContainerRef(),Qf(_u(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=J_(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=cl(this._lContainer,n);r&&(aa(_u(this._lContainer),n),Fd(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=cl(this._lContainer,n);return r&&null!=aa(_u(this._lContainer),n)?new vs(r):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function J_(e){return e[8]}function _u(e){return e[8]||(e[8]=[])}function eg(e,t){let n;const r=t[e.index];if(gn(r))n=r;else{let i;if(8&e.type)i=it(r);else{const o=t[11];i=o.createComment("");const s=en(e,t);Gr(o,va(o,s),i,function E0(e,t){return Xe(e)?e.nextSibling(t):t.nextSibling}(o,s),!1)}t[e.index]=n=Eh(r,t,i,e),Da(t,n)}return new Q_(n,e,t)}class gu{constructor(t){this.queryList=t,this.matches=null}clone(){return new gu(this.queryList)}setDirty(){this.queryList.setDirty()}}class vu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new vu(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==cg(t,n).matches&&this.queries[n].setDirty()}}class tg{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class mu{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new mu(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class yu{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new yu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,n1(n,o)),this.matchTNodeWithReadOption(t,n,sa(n,t,o,!1,!1))}else r===Kn?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,sa(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===go||i===Hn||i===Kn&&4&n.type)this.addMatch(n.index,-2);else{const o=sa(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function n1(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function i1(e,t,n,r){return-1===n?function r1(e,t){return 11&e.type?_o(e,t):4&e.type?Na(e,t):null}(t,e):-2===n?function o1(e,t,n){return n===go?_o(t,e):n===Kn?Na(t,e):n===Hn?eg(t,e):void 0}(e,t,r):$o(e,e[1],n,t)}function ng(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const o=e.data,s=n.matches,u=[];for(let h=0;h<s.length;h+=2){const C=s[h];u.push(C<0?null:i1(t,o[C],s[h+1],n.metadata.read))}i.matches=u}return i.matches}function Cu(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=ng(e,t,i,n);for(let u=0;u<o.length;u+=2){const h=o[u];if(h>0)r.push(s[u/2]);else{const C=o[u+1],x=t[-h];for(let P=10;P<x.length;P++){const j=x[P];j[17]===j[3]&&Cu(j[1],j,C,r)}if(null!==x[9]){const P=x[9];for(let j=0;j<P.length;j++){const q=P[j];Cu(q[1],q,C,r)}}}}}return r}function rg(e){const t=re(),n=Pe(),r=Of();Ac(r+1);const i=cg(n,r);if(e.dirty&&Mf(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?Cu(n,t,r,[]):ng(n,t,i,r);e.reset(o,vw),e.notifyOnChanges()}return!0}return!1}function ig(e,t,n){const r=Pe();r.firstCreatePass&&(function ag(e,t,n){null===e.queries&&(e.queries=new mu),e.queries.track(new yu(t,n))}(r,new tg(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function sg(e,t,n){const r=new pu(4==(4&n));vh(e,t,r,r.destroy),null===t[19]&&(t[19]=new vu),t[19].queries.push(new gu(r))}(r,re(),t)}function cg(e,t){return e.queries.getByIndex(t)}function Va(...e){}const Eg=new je("Application Initializer");let Mu=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Va,this.reject=Va,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Xl(o))n.push(o);else if(Db(o)){const s=new Promise((u,h)=>{o.subscribe({complete:u,error:h})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(ze(Eg,8))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const bs=new je("AppId",{providedIn:"root",factory:function Mg(){return`${xu()}${xu()}${xu()}`}});function xu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xg=new je("Platform Initializer"),Tg=new je("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),M1=new je("appBootstrapListener"),fr=new je("LocaleId",{providedIn:"root",factory:()=>sy(fr,ve.Optional|ve.SkipSelf)||function x1(){return"undefined"!=typeof $localize&&$localize.locale||Ia}()}),I1=(()=>Promise.resolve(0))();function Tu(e){"undefined"==typeof Zone?I1.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ft{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Nn(!1),this.onMicrotaskEmpty=new Nn(!1),this.onStable=new Nn(!1),this.onError=new Nn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function R1(){let e=Ve.requestAnimationFrame,t=Ve.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function P1(e){const t=()=>{!function k1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ve,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Lu(e),e.isCheckStableRunning=!0,Au(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Lu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,u)=>{try{return Ag(e),n.invokeTask(i,o,s,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Lg(e)}},onInvoke:(n,r,i,o,s,u,h)=>{try{return Ag(e),n.invoke(i,o,s,u,h)}finally{e.shouldCoalesceRunChangeDetection&&t(),Lg(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Lu(e),Au(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ft.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ft.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,O1,Va,Va);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const O1={};function Au(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ag(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Lg(e){e._nesting--,Au(e)}class F1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Nn,this.onMicrotaskEmpty=new Nn,this.onStable=new Nn,this.onError=new Nn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}let Iu=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ft.assertNotInAngularZone(),Tu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(ze(Ft))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),B1=(()=>{class e{constructor(){this._applications=new Map,Ru.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Ru.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();class N1{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}let Ru=new N1,Xr=null;const Ig=new je("AllowMultipleToken"),Rg=new je("PlatformOnDestroy");function Og(e,t,n=[]){const r=`Platform: ${t}`,i=new je(r);return(o=[])=>{let s=Ou();if(!s||s.injector.get(Ig,!1)){const u=[...n,...o,{provide:i,useValue:!0}];e?e(u):function U1(e){if(Xr&&!Xr.get(Ig,!1))throw new ke(400,"");Xr=e;const t=e.get(kg),n=e.get(xg,null);n&&n.forEach(r=>r())}(function W1(e=[],t){return kn.create({name:t,providers:[{provide:Fl,useValue:"platform"},{provide:Rg,useValue:()=>Xr=null},...e]})}(u,r))}return function z1(e){const t=Ou();if(!t)throw new ke(401,"");return t}()}}function Ou(){var e;return null!==(e=null==Xr?void 0:Xr.get(kg))&&void 0!==e?e:null}let kg=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const u=function q1(e,t){let n;return n="noop"===e?new F1:("zone.js"===e?void 0:e)||new Ft({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),h=[{provide:Ft,useValue:u}];return u.run(()=>{const C=kn.create({providers:h,parent:this.injector,name:n.moduleType.name}),x=n.create(C),P=x.injector.get(is,null);if(!P)throw new ke(402,"");return u.runOutsideAngular(()=>{const j=u.onError.subscribe({next:q=>{P.handleError(q)}});x.onDestroy(()=>{ku(this._modules,x),j.unsubscribe()})}),function $1(e,t,n){try{const r=n();return Xl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(P,u,()=>{const j=x.injector.get(Mu);return j.runInitializers(),j.donePromise.then(()=>(function vS(e){lt(e,"Expected localeId to be defined"),"string"==typeof e&&(h_=e.toLowerCase().replace(/_/g,"-"))}(x.injector.get(fr,Ia)||Ia),this._moduleDoBootstrap(x),x))})})}bootstrapModule(n,r=[]){const i=Pg({},r);return function j1(e,t,n){const r=new du(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Fg);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new ke(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Rg,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(ze(kn))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Pg(e,t){return Array.isArray(t)?t.reduce(Pg,e):Object.assign(Object.assign({},e),t)}let Fg=(()=>{class e{constructor(n,r,i,o){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new ne(h=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{h.next(this._stable),h.complete()})}),u=new ne(h=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Ft.assertNotInAngularZone(),Tu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,h.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Ft.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{h.next(!1)}))});return()=>{C.unsubscribe(),x.unsubscribe()}});this.isStable=wi(s,u.pipe(function Ei(e={}){const{connector:t=(()=>new N),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s=null,u=null,h=null,C=0,x=!1,P=!1;const j=()=>{null==u||u.unsubscribe(),u=null},q=()=>{j(),s=h=null,x=P=!1},Y=()=>{const te=s;q(),null==te||te.unsubscribe()};return W((te,oe)=>{C++,!P&&!x&&j();const se=h=null!=h?h:t();oe.add(()=>{C--,0===C&&!P&&!x&&(u=er(Y,i))}),se.subscribe(oe),s||(s=new L({next:Q=>se.next(Q),error:Q=>{P=!0,j(),u=er(q,n,Q),se.error(Q)},complete:()=>{x=!0,j(),u=er(q,r),se.complete()}}),Ir(te).subscribe(s))})(o)}}()))}bootstrap(n,r){if(!this._initStatus.done)throw new ke(405,"");let i;i=n instanceof N_?n:this._injector.get(Fa).resolveComponentFactory(n),this.componentTypes.push(i.componentType);const o=function V1(e){return e.isBoundToModule}(i)?void 0:this._injector.get(vo),u=i.create(kn.NULL,[],r||i.selector,o),h=u.location.nativeElement,C=u.injector.get(Iu,null),x=C&&u.injector.get(B1);return C&&x&&x.registerApplication(h,C),u.onDestroy(()=>{this.detachView(u.hostView),ku(this.components,u),x&&x.unregisterApplication(h)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ku(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(M1,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(ze(Ft),ze(kn),ze(is),ze(Mu))},e.\u0275prov=He({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ku(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let Ng=!0;class zg{constructor(){}supports(t){return us(t)}create(t){return new rD(t)}}const nD=(e,t)=>t;class rD{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||nD}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<qg(r,i,o)?n:r,u=qg(s,i,o),h=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const C=u-i,x=h-i;if(C!=x){for(let j=0;j<C;j++){const q=j<o.length?o[j]:o[j]=0,Y=q+j;x<=Y&&Y<C&&(o[j]=q+1)}o[s.previousIndex]=x-C}}u!==h&&t(s,u,h)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!us(t))throw new ke(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)o=t[u],s=this._trackByFn(u,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,u)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,u),r=!0),n=n._next}else i=0,function QC(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[eo()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,u=>{s=this._trackByFn(i,u),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,u,s,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)):(n=this._mismatch(n,u,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new iD(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wg),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wg),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class iD{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class oD{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Wg{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new oD,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qg(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Gg(){return new Wa([new zg])}let Wa=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Gg()),deps:[[e,new fa,new ua]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ke(901,"")}}return e.\u0275prov=He({token:e,providedIn:"root",factory:Gg}),e})();const uD=Og(null,"core",[]);let fD=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(ze(Fg))},e.\u0275mod=Vr({type:e}),e.\u0275inj=tt({}),e})(),qa=null;function ws(){return qa}const jn=new je("DocumentToken");class rE{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ov=(()=>{class e{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rE(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const u=r.get(o);r.move(u,s),sv(u,i)}});for(let i=0,o=r.length;i<o;i++){const u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{sv(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(Ie(Hn),Ie(Kn),Ie(Wa))},e.\u0275dir=Zt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();function sv(e,t){e.context.$implicit=t.item}let av=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new iE,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){cv("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){cv("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(Ie(Hn),Ie(Kn))},e.\u0275dir=Zt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class iE{constructor(){this.$implicit=null,this.ngIf=null}}function cv(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Fe(t)}'.`)}let fv=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=tt({}),e})();class Qu extends class FE extends class pD{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function hD(e){qa||(qa=e)}(new Qu)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function BE(){return Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null}();return null==n?null:function NE(e){tc=tc||document.createElement("a"),tc.setAttribute("href",e);const t=tc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function eE(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let tc,Ms=null;const pv=new je("TRANSITION_ID"),jE=[{provide:Eg,useFactory:function HE(e,t,n){return()=>{n.get(Mu).donePromise.then(()=>{const r=ws(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[pv,jn,kn],multi:!0}];class Ju{static init(){!function H1(e){Ru=e}(new Ju)}addToWindow(t){Ve.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ve.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ve.getAllAngularRootElements=()=>t.getAllRootElements(),Ve.frameworkStabilizers||(Ve.frameworkStabilizers=[]),Ve.frameworkStabilizers.push(r=>{const i=Ve.getAllAngularTestabilities();let o=i.length,s=!1;const u=function(h){s=s||h,o--,0==o&&r(s)};i.forEach(function(h){h.whenStable(u)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const i=t.getTestability(n);return null!=i?i:r?ws().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let VE=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const nc=new je("EventManagerPlugins");let rc=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(ze(nc),ze(Ft))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();class _v{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=ws().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let gv=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})(),xs=(()=>{class e extends gv{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(vv),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(vv))}}return e.\u0275fac=function(n){return new(n||e)(ze(jn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();function vv(e){ws().remove(e)}const ef={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tf=/%COMP%/g;function ic(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?ic(e,i,n):(i=i.replace(tf,e),n.push(i))}return n}function Cv(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let nf=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new rf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case xn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new GE(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case xn.ShadowDom:return new KE(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=ic(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(ze(rc),ze(xs),ze(bs))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();class rf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(ef[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,r){t&&t.insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=ef[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=ef[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Wt.DashCase|Wt.Important)?t.style.setProperty(n,r,i&Wt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Wt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Cv(r)):this.eventManager.addEventListener(t,n,Cv(r))}}class GE extends rf{constructor(t,n,r,i){super(t),this.component=r;const o=ic(i+"-"+r.id,r.styles,[]);n.addStyles(o),this.contentAttr=function WE(e){return"_ngcontent-%COMP%".replace(tf,e)}(i+"-"+r.id),this.hostAttr=function qE(e){return"_nghost-%COMP%".replace(tf,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class KE extends rf{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=ic(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const u=document.createElement("style");u.textContent=o[s],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let YE=(()=>{class e extends _v{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(ze(jn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const Sv=["alt","control","meta","shift"],XE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wv={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},QE={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let JE=(()=>{class e extends _v{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ws().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="";if(Sv.forEach(h=>{const C=r.indexOf(h);C>-1&&(r.splice(C,1),s+=h+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static getEventFullKey(n){let r="",i=function eM(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&wv.hasOwnProperty(t)&&(t=wv[t]))}return XE[t]||t}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Sv.forEach(o=>{o!=i&&QE[o](n)&&(r+=o+".")}),r+=i,r}static eventCallback(n,r,i){return o=>{e.getEventFullKey(o)===n&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(ze(jn))},e.\u0275prov=He({token:e,factory:e.\u0275fac}),e})();const iM=Og(uD,"browser",[{provide:Tg,useValue:"browser"},{provide:xg,useValue:function tM(){Qu.makeCurrent(),Ju.init()},multi:!0},{provide:jn,useFactory:function rM(){return function um(e){yc=e}(document),document},deps:[]}]),oM=[{provide:Fl,useValue:"root"},{provide:is,useFactory:function nM(){return new is},deps:[]},{provide:nc,useClass:YE,multi:!0,deps:[jn,Ft,Tg]},{provide:nc,useClass:JE,multi:!0,deps:[jn]},{provide:nf,useClass:nf,deps:[rc,xs,bs]},{provide:j_,useExisting:nf},{provide:gv,useExisting:xs},{provide:xs,useClass:xs,deps:[jn]},{provide:Iu,useClass:Iu,deps:[Ft]},{provide:rc,useClass:rc,deps:[nc,Ft]},{provide:class PE{},useClass:VE,deps:[]}];let sM=(()=>{class e{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:bs,useValue:n.appId},{provide:pv,useExisting:bs},jE]}}}return e.\u0275fac=function(n){return new(n||e)(ze(e,12))},e.\u0275mod=Vr({type:e}),e.\u0275inj=tt({providers:oM,imports:[fv,fD]}),e})();function vM(e,t){if(1&e){const n=Zl();pe(0,"button",5),Yr("click",function(){return Dc(n),Jl().prevPage()}),fe(1," Prev\n"),ge()}}function mM(e,t){if(1&e){const n=Zl();pe(0,"button",6),Yr("click",function(){return Dc(n),Jl().nextPage()}),fe(1," Next\n"),ge()}}function yM(e,t){1&e&&(pe(0,"div",7)(1,"p"),fe(2,"This is a JavaScript translation of "),pe(3,"a",8),fe(4," Peter Norvig's Scheme interpreter written in Python. "),ge()(),pe(5,"p"),fe(6,"The original work is in just 117 lines of code - it doesn't aim to be a comprehensive implementation of a Scheme interpreter, but to illustrate the basic ideas of parsing the Scheme syntax and evaluating expressions. This simple implementation does not handle errors (and assumes the programmer to be flawless!). "),ge(),pe(7,"p")(8,"a",9),fe(9," The JavaScript version "),ge(),fe(10," is slightly longer, at about 160 lines, and covers most of features in lis.py. You can type in Scheme expressions in the terminal below and see Lispy-JS do it's magic! "),ge(),pe(11,"p"),fe(12," If you are not familiar with Scheme, click on the next button to get started with the help of a tutorial. "),ge()())}function CM(e,t){1&e&&(pe(0,"div",7)(1,"h3"),fe(2,"Arithmetic expressions"),ge(),pe(3,"p"),fe(4,' You can use Scheme as a calculator. Scheme expects arithmetic expressions to be in "prefix notation". '),pe(5,"code"),fe(6,"1 + 2"),ge(),fe(7," is entered as "),pe(8,"code"),fe(9,"(+ 1 2)"),ge(),fe(10,". "),ge(),pe(11,"p"),fe(12," Try nested expressions: "),pe(13,"code")(14,"ul")(15,"li"),fe(16,"(+ (+ 1 2) 3) "),ge(),pe(17,"li"),fe(18,"(+ (* 3 4) (* 5 6)) "),ge()()()(),pe(19,"p"),fe(20," You can define your own variables using the 'define' keyword. "),ge(),pe(21,"code"),fe(22,"(define x 25)"),Tt(23,"br"),fe(24,"x"),ge(),pe(25,"p"),fe(26," Expressions using variables: "),pe(27,"code")(28,"ul")(29,"li"),fe(30,"(+ x x)"),ge(),pe(31,"li"),fe(32,"(+ (* x 2) (* x 3)) "),ge()()()()())}function bM(e,t){1&e&&(pe(0,"div",7)(1,"h3"),fe(2,"Functions"),ge(),pe(3,"p"),fe(4," You can define your own functions with the help of the 'lambda' keyword. Given below is a function to find the square of a number. "),ge(),pe(5,"code"),fe(6," (define sq (lambda (x) (* x x))) "),ge(),pe(7,"p"),fe(8," Invoke it as follows: "),ge(),pe(9,"code"),fe(10,"(sq 6)"),ge(),pe(11,"p"),fe(12," Function calls can be nested within other calls. For example: "),ge(),pe(13,"p")(14,"code"),fe(15,"(sq (sq (sq 6)))"),ge()()())}function SM(e,t){1&e&&(pe(0,"div",7)(1,"h3"),fe(2,"Recursion"),ge(),pe(3,"p"),fe(4," The full power of repetition can be invoked by using recursion within functions. See how we can write a recursive function for finding the factorial of a number. "),ge(),pe(5,"p"),fe(6," The function to find the factorial (n!) of a number n can be written recursively. "),ge(),pe(7,"p"),fe(8," n! = 1 x 2 x 3 x ... x n-1 x n "),ge(),pe(9,"p"),fe(10," n! = (n-1)! x n "),ge(),pe(11,"p"),fe(12," In the base case, 1! = 1 "),ge(),pe(13,"p"),fe(14," In Scheme, this can be written as: "),ge(),pe(15,"p")(16,"code"),fe(17,"(define fact (lambda (n) "),Tt(18,"br"),fe(19," \xa0(if (<= n 1)"),Tt(20,"br"),fe(21," \xa0\xa01"),Tt(22,"br"),fe(23," \xa0\xa0(* n (fact (- n 1)))"),Tt(24,"br"),fe(25," )))"),ge()(),pe(26,"p")(27,"code"),fe(28,"(fact 10)"),ge()()())}function wM(e,t){1&e&&(pe(0,"div",7)(1,"h3"),fe(2,"Another Example of Recursion"),ge(),pe(3,"p"),fe(4," The Greatest Common Divisor (GCD) of two numbers can be found out recursively using Euclid's algorithm. "),ge(),pe(5,"p"),fe(6," The smaller number is subtracted from the greater number repeatedly until they both become equal. At this point both numbers equal the GCD. "),ge(),pe(7,"p")(8,"code"),fe(9,"(define gcd (lambda (x y) "),Tt(10,"br"),fe(11," \xa0(if (= x y)"),Tt(12,"br"),fe(13," \xa0\xa0x"),Tt(14,"br"),fe(15," \xa0\xa0(if (> x y)"),Tt(16,"br"),fe(17," \xa0\xa0\xa0(gcd (- x y) y)"),Tt(18,"br"),fe(19," \xa0\xa0\xa0(gcd x (- y x))"),Tt(20,"br"),fe(21," ))))"),ge()(),pe(22,"p")(23,"code"),fe(24,"(gcd 100 60)"),ge()(),pe(25,"p"),fe(26,"To learn more about Scheme, see "),pe(27,"a",10),fe(28," http://www.shido.info/lisp/idx_scm_e.html "),ge()()())}"undefined"!=typeof window&&window;let DM=(()=>{class e{constructor(){this.page=0}ngOnInit(){}nextPage(){this.page++}prevPage(){this.page--}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=jr({type:e,selectors:[["app-description"]],inputs:{page:"page"},decls:9,vars:7,consts:[["id","container"],["id","buttonDiv"],["id","prev",3,"click",4,"ngIf"],["id","next",3,"click",4,"ngIf"],["class","text",4,"ngIf"],["id","prev",3,"click"],["id","next",3,"click"],[1,"text"],["href","http://norvig.com/lispy.html","target","_blank"],["href","https://github.com/athkishore/lispy-js-core","target","_blank"],["href","http://www.shido.info/lisp/idx_scm_e.html","target","_blank"]],template:function(n,r){1&n&&(pe(0,"div",0)(1,"div",1),Gn(2,vM,2,0,"button",2),Gn(3,mM,2,0,"button",3),ge(),Gn(4,yM,13,0,"div",4),Gn(5,CM,33,0,"div",4),Gn(6,bM,16,0,"div",4),Gn(7,SM,29,0,"div",4),Gn(8,wM,29,0,"div",4),ge()),2&n&&(xt(2),Pt("ngIf",r.page>0),xt(1),Pt("ngIf",r.page<4),xt(1),Pt("ngIf",0===r.page),xt(1),Pt("ngIf",1===r.page),xt(1),Pt("ngIf",2===r.page),xt(1),Pt("ngIf",3===r.page),xt(1),Pt("ngIf",4===r.page))},directives:[av],styles:[".text[_ngcontent-%COMP%]{padding-left:20px;width:35vw;min-width:300px;padding-right:10px}#container[_ngcontent-%COMP%]{position:relative}#next[_ngcontent-%COMP%]{position:absolute;right:5%}#prev[_ngcontent-%COMP%]{position:relative;left:0%}button[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px;background-color:dark-purple}#buttonDiv[_ngcontent-%COMP%]{height:30px;margin-left:10px}"]}),e})();function EM(e,t){if(1&e&&(pe(0,"div"),fe(1),ge()),2&e){const n=t.$implicit;xt(1),nu(n)}}let MM=(()=>{class e{constructor(){this.contents=[]}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=jr({type:e,selectors:[["app-terminal-output"]],inputs:{contents:"contents"},decls:2,vars:1,consts:[["id","outputBuffer",1,"terminal"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(pe(0,"div",0),Gn(1,EM,2,1,"div",1),ge()),2&n&&(xt(1),Pt("ngForOf",r.contents))},directives:[ov],styles:[".terminal[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-family:Courier New,Courier,monospace;font-size:16px}#terminal[_ngcontent-%COMP%]{width:100%;height:400px}"]}),e})();const xM=["editable"];let TM=(()=>{class e{constructor(){this.currentLine="",this.prompt="",this.active=!1,this.clickedCount=0,this.currentLineChange=new Nn,this.inputHistory=[]}ngOnInit(){}ngAfterViewInit(){}ngOnChanges(n){void 0!==n.clickedCount&&this.in.nativeElement.focus()}checkAndSendLine(n){if(13==n.keyCode){const r=n.target;this.currentLine=r.innerText.slice(0,-2),console.log(this.currentLine),this.currentLineChange.emit(this.currentLine),this.inputHistory.push(this.currentLine),this.currentLine="",r.innerText=""}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=jr({type:e,selectors:[["app-terminal-input"]],viewQuery:function(n,r){if(1&n&&ig(xM,5),2&n){let i;rg(i=function og(){return function a1(e,t){return e[19].queries[t].queryList}(re(),Of())}())&&(r.in=i.first)}},inputs:{currentLine:"currentLine",prompt:"prompt",active:"active",clickedCount:"clickedCount"},outputs:{currentLineChange:"currentLineChange"},features:[Vo],decls:5,vars:1,consts:[["id","inputLine",1,"terminal"],["id","prompt",1,"terminal"],["id","editableSpan","contenteditable","true","spellcheck","false",1,"terminal",3,"keyup"],["editable",""]],template:function(n,r){1&n&&(pe(0,"div",0)(1,"span",1),fe(2),ge(),pe(3,"span",2,3),Yr("keyup",function(o){return r.checkAndSendLine(o)}),ge()()),2&n&&(xt(2),La(" ",r.prompt," "))},styles:[".terminal[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-family:Courier New,Courier,monospace;font-size:16px}#editableSpan[_ngcontent-%COMP%]{outline:0;overflow-wrap:break-word}"]}),e})(),AM=(()=>{class e{constructor(){this.prompt="",this.numLines=20,this.outputTextBufferArr=[],this.currentLine="",this.clickedCount=0,this.value="",this.env=standard_env()}ngOnInit(){console.log("interpreter comp initialised with prompt: ",this.prompt)}ngOnChange(){}ngAfterViewInit(){}onLineChange(){this.outputTextBufferArr.push(this.prompt+this.currentLine);var n=evaluate(parse(this.currentLine),this.env);console.log(this.env),this.outputTextBufferArr.push(lispstr(n)),this.outputTextBufferArr.length>this.numLines&&(this.outputTextBufferArr=this.outputTextBufferArr.slice(2))}makeInputActive(){this.clickedCount++}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=jr({type:e,selectors:[["app-lispyjs-interpreter"]],inputs:{prompt:"prompt",numLines:"numLines"},decls:3,vars:4,consts:[["id","terminal",1,"terminal",3,"click"],["id","out",3,"contents"],["id","in","value","",3,"currentLine","prompt","clickedCount","currentLineChange"]],template:function(n,r){1&n&&(pe(0,"div",0),Yr("click",function(){return r.makeInputActive()}),Tt(1,"app-terminal-output",1),pe(2,"app-terminal-input",2),Yr("currentLineChange",function(o){return r.currentLine=o})("currentLineChange",function(){return r.onLineChange()}),ge()()),2&n&&(xt(1),Pt("contents",r.outputTextBufferArr),xt(1),Pt("currentLine",r.currentLine)("prompt",r.prompt)("clickedCount",r.clickedCount))},directives:[MM,TM],styles:[".terminal[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-family:Courier New,Courier,monospace;font-size:16px;padding:5px}#terminal[_ngcontent-%COMP%]{width:60vw;min-width:300px;height:480px;overflow:hidden}"]}),e})(),LM=(()=>{class e{constructor(){this.title="lispy-js",this.prompt=this.title+"> "}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=jr({type:e,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"topnav"],["href","https://akishore.in",1,"active"],[1,"flex-container"],[3,"page"],[3,"prompt","numLines"]],template:function(n,r){1&n&&(pe(0,"div",0)(1,"a",1),fe(2,"Home"),ge()(),pe(3,"h2"),fe(4,"Lispy-JS Scheme Interpreter"),ge(),pe(5,"div",2),Tt(6,"app-description",3)(7,"app-lispyjs-interpreter",4),ge()),2&n&&(xt(6),Pt("page",0),xt(1),Pt("prompt",r.prompt)("numLines",20))},directives:[DM,AM],styles:[".flex-container[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap}h3[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{margin-left:60px}.topnav[_ngcontent-%COMP%]{overflow:hidden;background-color:#0a2b61}.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;color:#f2f2f2;text-align:center;padding:14px 16px;text-decoration:none;font-size:17px}.topnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ddd;color:#000}.topnav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#4974ba;color:#fff}"]}),e})();Rt(793),Rt(162);var af,Jr=[],Mv="ResizeObserver loop completed with undelivered notifications.",Co=(()=>{return(e=Co||(Co={})).BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box",Co;var e})(),ei=function(e){return Object.freeze(e)},kM=function e(t,n){this.inlineSize=t,this.blockSize=n,ei(this)},xv=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ei(this)}return e.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),sf=function(e){return e instanceof SVGElement&&"getBBox"in e},Tv=function(e){if(sf(e)){var t=e.getBBox();return!t.width&&!t.height}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Av=function(e){var t,n;if(e instanceof Element)return!0;var r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},Ts="undefined"!=typeof window?window:{},oc=new WeakMap,Lv=/auto|scroll/,FM=/^tb|vertical/,BM=/msie|trident/i.test(Ts.navigator&&Ts.navigator.userAgent),Vn=function(e){return parseFloat(e||"0")},bo=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),new kM((n?t:e)||0,(n?e:t)||0)},Iv=ei({devicePixelContentBoxSize:bo(),borderBoxSize:bo(),contentBoxSize:bo(),contentRect:new xv(0,0,0,0)}),Rv=function(e,t){if(void 0===t&&(t=!1),oc.has(e)&&!t)return oc.get(e);if(Tv(e))return oc.set(e,Iv),Iv;var n=getComputedStyle(e),r=sf(e)&&e.ownerSVGElement&&e.getBBox(),i=!BM&&"border-box"===n.boxSizing,o=FM.test(n.writingMode||""),s=!r&&Lv.test(n.overflowY||""),u=!r&&Lv.test(n.overflowX||""),h=r?0:Vn(n.paddingTop),C=r?0:Vn(n.paddingRight),x=r?0:Vn(n.paddingBottom),P=r?0:Vn(n.paddingLeft),j=r?0:Vn(n.borderTopWidth),q=r?0:Vn(n.borderRightWidth),Y=r?0:Vn(n.borderBottomWidth),oe=P+C,se=h+x,Q=(r?0:Vn(n.borderLeftWidth))+q,le=j+Y,Me=u?e.offsetHeight-le-e.clientHeight:0,Oe=s?e.offsetWidth-Q-e.clientWidth:0,It=i?oe+Q:0,Zn=i?se+le:0,hr=r?r.width:Vn(n.width)-It-Oe,pr=r?r.height:Vn(n.height)-Zn-Me,Ls=hr+oe+Oe+Q,Is=pr+se+Me+le,wo=ei({devicePixelContentBoxSize:bo(Math.round(hr*devicePixelRatio),Math.round(pr*devicePixelRatio),o),borderBoxSize:bo(Ls,Is,o),contentBoxSize:bo(hr,pr,o),contentRect:new xv(P,h,hr,pr)});return oc.set(e,wo),wo},Ov=function(e,t,n){var r=Rv(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case Co.DEVICE_PIXEL_CONTENT_BOX:return s;case Co.BORDER_BOX:return i;default:return o}},NM=function e(t){var n=Rv(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=ei([n.borderBoxSize]),this.contentBoxSize=ei([n.contentBoxSize]),this.devicePixelContentBoxSize=ei([n.devicePixelContentBoxSize])},kv=function(e){if(Tv(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},HM=function(){var e=1/0,t=[];Jr.forEach(function(s){if(0!==s.activeTargets.length){var u=[];s.activeTargets.forEach(function(C){var x=new NM(C.target),P=kv(C.target);u.push(x),C.lastReportedSize=Ov(C.target,C.observedBox),P<e&&(e=P)}),t.push(function(){s.callback.call(s.observer,u,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++)(0,r[n])();return e},Pv=function(e){Jr.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(kv(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},Fv=[],sc=0,$M={attributes:!0,characterData:!0,childList:!0,subtree:!0},Bv=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Nv=function(e){return void 0===e&&(e=0),Date.now()+e},cf=!1,lf=new(function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(void 0===t&&(t=250),!cf){cf=!0;var r=Nv(t);!function(e){!function(e){if(!af){var t=0,n=document.createTextNode("");new MutationObserver(function(){return Fv.splice(0).forEach(function(e){return e()})}).observe(n,{characterData:!0}),af=function(){n.textContent=""+(t?t--:t++)}}Fv.push(e),af()}(function(){requestAnimationFrame(e)})}(function(){var i=!1;try{i=function(){var e=0;for(Pv(e);Jr.some(function(e){return e.activeTargets.length>0});)e=HM(),Pv(e);return Jr.some(function(e){return e.skippedTargets.length>0})&&function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:Mv}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=Mv),window.dispatchEvent(e)}(),e>0}()}finally{if(cf=!1,t=r-Nv(),!sc)return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,$M)};document.body?n():Ts.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Bv.forEach(function(n){return Ts.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Bv.forEach(function(n){return Ts.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}()),Hv=function(e){!sc&&e>0&&lf.start(),!(sc+=e)&&lf.stop()},YM=function(){function e(t,n){this.target=t,this.observedBox=n||Co.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Ov(this.target,this.observedBox,!0);return function(e){return!sf(e)&&!function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)&&"inline"===getComputedStyle(e).display}(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),ZM=function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n},ac=new WeakMap,jv=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},cc=function(){function e(){}return e.connect=function(t,n){var r=new ZM(t,n);ac.set(t,r)},e.observe=function(t,n,r){var i=ac.get(t),o=0===i.observationTargets.length;jv(i.observationTargets,n)<0&&(o&&Jr.push(i),i.observationTargets.push(new YM(n,r&&r.box)),Hv(1),lf.schedule())},e.unobserve=function(t,n){var r=ac.get(t),i=jv(r.observationTargets,n);i>=0&&(1===r.observationTargets.length&&Jr.splice(Jr.indexOf(r),1),r.observationTargets.splice(i,1),Hv(-1))},e.disconnect=function(t){var n=this,r=ac.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}();!function(){function e(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");cc.connect(this,t)}e.prototype.observe=function(t,n){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Av(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");cc.observe(this,t,n)},e.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Av(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");cc.unobserve(this,t)},e.prototype.disconnect=function(){cc.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"}}(),"undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator),Object.freeze({topLeft:"nw-resize",topRight:"ne-resize",bottomLeft:"sw-resize",bottomRight:"se-resize",leftOrRight:"col-resize",topOrBottom:"row-resize"});let QM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=tt({}),e})(),JM=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Vr({type:e}),e.\u0275inj=tt({imports:[[QM,fv]]}),e})(),ex=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Vr({type:e,bootstrap:[LM]}),e.\u0275inj=tt({providers:[],imports:[[sM,JM]]}),e})();(function K1(){Ng=!1})(),iM().bootstrapModule(ex).catch(e=>console.error(e))},162:_r=>{self,_r.exports=(()=>{"use strict";var Xn={775:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.FitAddon=void 0;var A=function(){function m(){}return m.prototype.activate=function(S){this._terminal=S},m.prototype.dispose=function(){},m.prototype.fit=function(){var S=this.proposeDimensions();S&&this._terminal&&(this._terminal.rows===S.rows&&this._terminal.cols===S.cols||(this._terminal._core._renderService.clear(),this._terminal.resize(S.cols,S.rows)))},m.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var S=this._terminal._core;if(0!==S._renderService.dimensions.actualCellWidth&&0!==S._renderService.dimensions.actualCellHeight){var w=window.getComputedStyle(this._terminal.element.parentElement),y=parseInt(w.getPropertyValue("height")),I=Math.max(0,parseInt(w.getPropertyValue("width"))),E=window.getComputedStyle(this._terminal.element),p=y-(parseInt(E.getPropertyValue("padding-top"))+parseInt(E.getPropertyValue("padding-bottom"))),v=I-(parseInt(E.getPropertyValue("padding-right"))+parseInt(E.getPropertyValue("padding-left")))-S.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(v/S._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(p/S._renderService.dimensions.actualCellHeight))}}}},m}();_.FitAddon=A}},Rt={};return function J(_){if(Rt[_])return Rt[_].exports;var A=Rt[_]={exports:{}};return Xn[_](A,A.exports,J),A.exports}(775)})()},793:_r=>{self,_r.exports=(()=>{"use strict";var Xn={4567:function(J,_,A){var m,S=this&&this.__extends||(m=function(c,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(l[g]=d[g])})(c,a)},function(c,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function l(){this.constructor=c}m(c,a),c.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.AccessibilityManager=void 0;var w=A(9042),y=A(6114),I=A(9924),E=A(3656),p=A(844),v=A(5596),b=A(9631),f=function(c){function a(l,d){var g=c.call(this)||this;g._terminal=l,g._renderService=d,g._liveRegionLineCount=0,g._charsToConsume=[],g._charsToAnnounce="",g._accessibilityTreeRoot=document.createElement("div"),g._accessibilityTreeRoot.classList.add("xterm-accessibility"),g._accessibilityTreeRoot.tabIndex=0,g._rowContainer=document.createElement("div"),g._rowContainer.setAttribute("role","list"),g._rowContainer.classList.add("xterm-accessibility-tree"),g._rowElements=[];for(var D=0;D<g._terminal.rows;D++)g._rowElements[D]=g._createAccessibilityTreeNode(),g._rowContainer.appendChild(g._rowElements[D]);if(g._topBoundaryFocusListener=function(M){return g._onBoundaryFocus(M,0)},g._bottomBoundaryFocusListener=function(M){return g._onBoundaryFocus(M,1)},g._rowElements[0].addEventListener("focus",g._topBoundaryFocusListener),g._rowElements[g._rowElements.length-1].addEventListener("focus",g._bottomBoundaryFocusListener),g._refreshRowsDimensions(),g._accessibilityTreeRoot.appendChild(g._rowContainer),g._renderRowsDebouncer=new I.TimeBasedDebouncer(g._renderRows.bind(g)),g._refreshRows(),g._liveRegion=document.createElement("div"),g._liveRegion.classList.add("live-region"),g._liveRegion.setAttribute("aria-live","assertive"),g._accessibilityTreeRoot.appendChild(g._liveRegion),!g._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return g._terminal.element.insertAdjacentElement("afterbegin",g._accessibilityTreeRoot),g.register(g._renderRowsDebouncer),g.register(g._terminal.onResize(function(M){return g._onResize(M.rows)})),g.register(g._terminal.onRender(function(M){return g._refreshRows(M.start,M.end)})),g.register(g._terminal.onScroll(function(){return g._refreshRows()})),g.register(g._terminal.onA11yChar(function(M){return g._onChar(M)})),g.register(g._terminal.onLineFeed(function(){return g._onChar("\n")})),g.register(g._terminal.onA11yTab(function(M){return g._onTab(M)})),g.register(g._terminal.onKey(function(M){return g._onKey(M.key)})),g.register(g._terminal.onBlur(function(){return g._clearLiveRegion()})),g.register(g._renderService.onDimensionsChange(function(){return g._refreshRowsDimensions()})),g._screenDprMonitor=new v.ScreenDprMonitor,g.register(g._screenDprMonitor),g._screenDprMonitor.setListener(function(){return g._refreshRowsDimensions()}),g.register((0,E.addDisposableDomListener)(window,"resize",function(){return g._refreshRowsDimensions()})),g}return S(a,c),a.prototype.dispose=function(){c.prototype.dispose.call(this),(0,b.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},a.prototype._onBoundaryFocus=function(l,d){var g=l.target,D=this._rowElements[0===d?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")!==(0===d?"1":""+this._terminal.buffer.lines.length)&&l.relatedTarget===D){var M,O;if(0===d?(M=g,O=this._rowElements.pop(),this._rowContainer.removeChild(O)):(M=this._rowElements.shift(),O=g,this._rowContainer.removeChild(M)),M.removeEventListener("focus",this._topBoundaryFocusListener),O.removeEventListener("focus",this._bottomBoundaryFocusListener),0===d){var R=this._createAccessibilityTreeNode();this._rowElements.unshift(R),this._rowContainer.insertAdjacentElement("afterbegin",R)}else R=this._createAccessibilityTreeNode(),this._rowElements.push(R),this._rowContainer.appendChild(R);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===d?-1:1),this._rowElements[0===d?1:this._rowElements.length-2].focus(),l.preventDefault(),l.stopImmediatePropagation()}},a.prototype._onResize=function(l){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var d=this._rowContainer.children.length;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);for(;this._rowElements.length>l;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},a.prototype._createAccessibilityTreeNode=function(){var l=document.createElement("div");return l.setAttribute("role","listitem"),l.tabIndex=-1,this._refreshRowDimensions(l),l},a.prototype._onTab=function(l){for(var d=0;d<l;d++)this._onChar(" ")},a.prototype._onChar=function(l){var d=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==l&&(this._charsToAnnounce+=l):this._charsToAnnounce+=l,"\n"===l&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=w.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){d._accessibilityTreeRoot.appendChild(d._liveRegion)},0))},a.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&(0,b.removeElementFromParent)(this._liveRegion)},a.prototype._onKey=function(l){this._clearLiveRegion(),this._charsToConsume.push(l)},a.prototype._refreshRows=function(l,d){this._renderRowsDebouncer.refresh(l,d,this._terminal.rows)},a.prototype._renderRows=function(l,d){for(var g=this._terminal.buffer,D=g.lines.length.toString(),M=l;M<=d;M++){var O=g.translateBufferLineToString(g.ydisp+M,!0),R=(g.ydisp+M+1).toString(),T=this._rowElements[M];T&&(0===O.length?T.innerText="\xa0":T.textContent=O,T.setAttribute("aria-posinset",R),T.setAttribute("aria-setsize",D))}this._announceCharacters()},a.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var l=0;l<this._terminal.rows;l++)this._refreshRowDimensions(this._rowElements[l])}},a.prototype._refreshRowDimensions=function(l){l.style.height=this._renderService.dimensions.actualCellHeight+"px"},a.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},a}(p.Disposable);_.AccessibilityManager=f},3614:(J,_)=>{function A(y){return y.replace(/\r?\n/g,"\r")}function m(y,I){return I?"\x1b[200~"+y+"\x1b[201~":y}function S(y,I,E){y=m(y=A(y),E.decPrivateModes.bracketedPasteMode),E.triggerDataEvent(y,!0),I.value=""}function w(y,I,E){var p=E.getBoundingClientRect(),v=y.clientX-p.left-10,b=y.clientY-p.top-10;I.style.width="20px",I.style.height="20px",I.style.left=v+"px",I.style.top=b+"px",I.style.zIndex="1000",I.focus()}Object.defineProperty(_,"__esModule",{value:!0}),_.rightClickHandler=_.moveTextAreaUnderMouseCursor=_.paste=_.handlePasteEvent=_.copyHandler=_.bracketTextForPaste=_.prepareTextForTerminal=void 0,_.prepareTextForTerminal=A,_.bracketTextForPaste=m,_.copyHandler=function(y,I){y.clipboardData&&y.clipboardData.setData("text/plain",I.selectionText),y.preventDefault()},_.handlePasteEvent=function(y,I,E){y.stopPropagation(),y.clipboardData&&S(y.clipboardData.getData("text/plain"),I,E)},_.paste=S,_.moveTextAreaUnderMouseCursor=w,_.rightClickHandler=function(y,I,E,p,v){w(y,I,E),v&&p.rightClickSelect(y),I.value=p.selectionText,I.select()}},4774:(J,_)=>{var A,m,S,w,E;function y(E){var p=E.toString(16);return p.length<2?"0"+p:p}function I(E,p){return E<p?(p+.05)/(E+.05):(E+.05)/(p+.05)}Object.defineProperty(_,"__esModule",{value:!0}),_.contrastRatio=_.toPaddedHex=_.rgba=_.rgb=_.css=_.color=_.channels=void 0,(E=A=_.channels||(_.channels={})).toCss=function(p,v,b,f){return void 0!==f?"#"+y(p)+y(v)+y(b)+y(f):"#"+y(p)+y(v)+y(b)},E.toRgba=function(p,v,b,f){return void 0===f&&(f=255),(p<<24|v<<16|b<<8|f)>>>0},(m=_.color||(_.color={})).blend=function(E,p){var v=(255&p.rgba)/255;if(1===v)return{css:p.css,rgba:p.rgba};var f=p.rgba>>16&255,c=p.rgba>>8&255,a=E.rgba>>24&255,l=E.rgba>>16&255,d=E.rgba>>8&255,g=a+Math.round(((p.rgba>>24&255)-a)*v),D=l+Math.round((f-l)*v),M=d+Math.round((c-d)*v);return{css:A.toCss(g,D,M),rgba:A.toRgba(g,D,M)}},m.isOpaque=function(E){return 255==(255&E.rgba)},m.ensureContrastRatio=function(E,p,v){var b=w.ensureContrastRatio(E.rgba,p.rgba,v);if(b)return w.toColor(b>>24&255,b>>16&255,b>>8&255)},m.opaque=function(E){var p=(255|E.rgba)>>>0,v=w.toChannels(p);return{css:A.toCss(v[0],v[1],v[2]),rgba:p}},m.opacity=function(E,p){var v=Math.round(255*p),b=w.toChannels(E.rgba),f=b[0],c=b[1],a=b[2];return{css:A.toCss(f,c,a,v),rgba:A.toRgba(f,c,a,v)}},m.toColorRGB=function(E){return[E.rgba>>24&255,E.rgba>>16&255,E.rgba>>8&255]},(_.css||(_.css={})).toColor=function(E){switch(E.length){case 7:return{css:E,rgba:(parseInt(E.slice(1),16)<<8|255)>>>0};case 9:return{css:E,rgba:parseInt(E.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(E){function p(v,b,f){var c=v/255,a=b/255,l=f/255;return.2126*(c<=.03928?c/12.92:Math.pow((c+.055)/1.055,2.4))+.7152*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.0722*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))}E.relativeLuminance=function(v){return p(v>>16&255,v>>8&255,255&v)},E.relativeLuminance2=p}(S=_.rgb||(_.rgb={})),function(E){function p(b,f,c){for(var a=b>>24&255,l=b>>16&255,d=b>>8&255,g=f>>24&255,D=f>>16&255,M=f>>8&255,O=I(S.relativeLuminance2(g,M,D),S.relativeLuminance2(a,l,d));O<c&&(g>0||D>0||M>0);)g-=Math.max(0,Math.ceil(.1*g)),D-=Math.max(0,Math.ceil(.1*D)),M-=Math.max(0,Math.ceil(.1*M)),O=I(S.relativeLuminance2(g,M,D),S.relativeLuminance2(a,l,d));return(g<<24|D<<16|M<<8|255)>>>0}function v(b,f,c){for(var a=b>>24&255,l=b>>16&255,d=b>>8&255,g=f>>24&255,D=f>>16&255,M=f>>8&255,O=I(S.relativeLuminance2(g,M,D),S.relativeLuminance2(a,l,d));O<c&&(g<255||D<255||M<255);)g=Math.min(255,g+Math.ceil(.1*(255-g))),D=Math.min(255,D+Math.ceil(.1*(255-D))),M=Math.min(255,M+Math.ceil(.1*(255-M))),O=I(S.relativeLuminance2(g,M,D),S.relativeLuminance2(a,l,d));return(g<<24|D<<16|M<<8|255)>>>0}E.ensureContrastRatio=function(b,f,c){var a=S.relativeLuminance(b>>8),l=S.relativeLuminance(f>>8);if(I(a,l)<c)return l<a?p(b,f,c):v(b,f,c)},E.reduceLuminance=p,E.increaseLuminance=v,E.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},E.toColor=function(b,f,c){return{css:A.toCss(b,f,c),rgba:A.toRgba(b,f,c)}}}(w=_.rgba||(_.rgba={})),_.toPaddedHex=y,_.contrastRatio=I},7239:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ColorContrastCache=void 0;var A=function(){function m(){this._color={},this._rgba={}}return m.prototype.clear=function(){this._color={},this._rgba={}},m.prototype.setCss=function(S,w,y){this._rgba[S]||(this._rgba[S]={}),this._rgba[S][w]=y},m.prototype.getCss=function(S,w){return this._rgba[S]?this._rgba[S][w]:void 0},m.prototype.setColor=function(S,w,y){this._color[S]||(this._color[S]={}),this._color[S][w]=y},m.prototype.getColor=function(S,w){return this._color[S]?this._color[S][w]:void 0},m}();_.ColorContrastCache=A},5680:function(J,_,A){var m=this&&this.__spreadArray||function(f,c,a){if(a||2===arguments.length)for(var l,d=0,g=c.length;d<g;d++)!l&&d in c||(l||(l=Array.prototype.slice.call(c,0,d)),l[d]=c[d]);return f.concat(l||Array.prototype.slice.call(c))};Object.defineProperty(_,"__esModule",{value:!0}),_.ColorManager=_.DEFAULT_ANSI_COLORS=void 0;var S=A(4774),w=A(7239),y=S.css.toColor("#ffffff"),I=S.css.toColor("#000000"),E=S.css.toColor("#ffffff"),p=S.css.toColor("#000000"),v={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};_.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var f=[S.css.toColor("#2e3436"),S.css.toColor("#cc0000"),S.css.toColor("#4e9a06"),S.css.toColor("#c4a000"),S.css.toColor("#3465a4"),S.css.toColor("#75507b"),S.css.toColor("#06989a"),S.css.toColor("#d3d7cf"),S.css.toColor("#555753"),S.css.toColor("#ef2929"),S.css.toColor("#8ae234"),S.css.toColor("#fce94f"),S.css.toColor("#729fcf"),S.css.toColor("#ad7fa8"),S.css.toColor("#34e2e2"),S.css.toColor("#eeeeec")],c=[0,95,135,175,215,255],a=0;a<216;a++){var l=c[a/36%6|0],d=c[a/6%6|0],g=c[a%6];f.push({css:S.channels.toCss(l,d,g),rgba:S.channels.toRgba(l,d,g)})}for(a=0;a<24;a++){var D=8+10*a;f.push({css:S.channels.toCss(D,D,D),rgba:S.channels.toRgba(D,D,D)})}return f}());var b=function(){function f(c,a){this.allowTransparency=a;var l=c.createElement("canvas");l.width=1,l.height=1;var d=l.getContext("2d");if(!d)throw new Error("Could not get rendering context");this._ctx=d,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new w.ColorContrastCache,this.colors={foreground:y,background:I,cursor:E,cursorAccent:p,selectionTransparent:v,selectionOpaque:S.color.blend(I,v),ansi:_.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return f.prototype.onOptionsChange=function(c){"minimumContrastRatio"===c&&this._contrastCache.clear()},f.prototype.setTheme=function(c){void 0===c&&(c={}),this.colors.foreground=this._parseColor(c.foreground,y),this.colors.background=this._parseColor(c.background,I),this.colors.cursor=this._parseColor(c.cursor,E,!0),this.colors.cursorAccent=this._parseColor(c.cursorAccent,p,!0),this.colors.selectionTransparent=this._parseColor(c.selection,v,!0),this.colors.selectionOpaque=S.color.blend(this.colors.background,this.colors.selectionTransparent),S.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=S.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(c.black,_.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(c.red,_.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(c.green,_.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(c.yellow,_.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(c.blue,_.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(c.magenta,_.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(c.cyan,_.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(c.white,_.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(c.brightBlack,_.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(c.brightRed,_.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(c.brightGreen,_.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(c.brightYellow,_.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(c.brightBlue,_.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(c.brightMagenta,_.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(c.brightCyan,_.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(c.brightWhite,_.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},f.prototype.restoreColor=function(c){if(void 0!==c)switch(c){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[c]=this._restoreColors.ansi[c]}else for(var a=0;a<this._restoreColors.ansi.length;++a)this.colors.ansi[a]=this._restoreColors.ansi[a]},f.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:m([],this.colors.ansi,!0)}},f.prototype._parseColor=function(c,a,l){if(void 0===l&&(l=this.allowTransparency),void 0===c)return a;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=c,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+c+" is invalid using fallback "+a.css),a;this._ctx.fillRect(0,0,1,1);var d=this._ctx.getImageData(0,0,1,1).data;if(255!==d[3]){if(!l)return console.warn("Color: "+c+" is using transparency, but allowTransparency is false. Using fallback "+a.css+"."),a;var g=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(L){return Number(L)}),D=g[0],M=g[1],O=g[2],T=Math.round(255*g[3]);return{rgba:S.channels.toRgba(D,M,O,T),css:c}}return{css:this._ctx.fillStyle,rgba:S.channels.toRgba(d[0],d[1],d[2],d[3])}},f}();_.ColorManager=b},9631:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.removeElementFromParent=void 0,_.removeElementFromParent=function(){for(var A,m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];for(var w=0,y=m;w<y.length;w++){var I=y[w];null===(A=null==I?void 0:I.parentElement)||void 0===A||A.removeChild(I)}}},3656:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.addDisposableDomListener=void 0,_.addDisposableDomListener=function(A,m,S,w){A.addEventListener(m,S,w);var y=!1;return{dispose:function(){y||(y=!0,A.removeEventListener(m,S,w))}}}},3551:function(J,_,A){var m=this&&this.__decorate||function(p,v,b,f){var c,a=arguments.length,l=a<3?v:null===f?f=Object.getOwnPropertyDescriptor(v,b):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(p,v,b,f);else for(var d=p.length-1;d>=0;d--)(c=p[d])&&(l=(a<3?c(l):a>3?c(v,b,l):c(v,b))||l);return a>3&&l&&Object.defineProperty(v,b,l),l},S=this&&this.__param||function(p,v){return function(b,f){v(b,f,p)}};Object.defineProperty(_,"__esModule",{value:!0}),_.MouseZone=_.Linkifier=void 0;var w=A(8460),y=A(2585),I=function(){function p(v,b,f){this._bufferService=v,this._logService=b,this._unicodeService=f,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new w.EventEmitter,this._onHideLinkUnderline=new w.EventEmitter,this._onLinkTooltip=new w.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(p.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),p.prototype.attachToDom=function(v,b){this._element=v,this._mouseZoneManager=b},p.prototype.linkifyRows=function(v,b){var f=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=v,this._rowsToLinkify.end=b):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,v),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,b)),this._mouseZoneManager.clearAll(v,b),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return f._linkifyRows()},p._timeBeforeLatency))},p.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var v=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var b=v.ydisp+this._rowsToLinkify.start;if(!(b>=v.lines.length)){for(var f=v.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,c=Math.ceil(2e3/this._bufferService.cols),a=this._bufferService.buffer.iterator(!1,b,f,c,c);a.hasNext();)for(var l=a.next(),d=0;d<this._linkMatchers.length;d++)this._doLinkifyRow(l.range.first,l.content,this._linkMatchers[d]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},p.prototype.registerLinkMatcher=function(v,b,f){if(void 0===f&&(f={}),!b)throw new Error("handler must be defined");var c={id:this._nextLinkMatcherId++,regex:v,handler:b,matchIndex:f.matchIndex,validationCallback:f.validationCallback,hoverTooltipCallback:f.tooltipCallback,hoverLeaveCallback:f.leaveCallback,willLinkActivate:f.willLinkActivate,priority:f.priority||0};return this._addLinkMatcherToList(c),c.id},p.prototype._addLinkMatcherToList=function(v){if(0!==this._linkMatchers.length){for(var b=this._linkMatchers.length-1;b>=0;b--)if(v.priority<=this._linkMatchers[b].priority)return void this._linkMatchers.splice(b+1,0,v);this._linkMatchers.splice(0,0,v)}else this._linkMatchers.push(v)},p.prototype.deregisterLinkMatcher=function(v){for(var b=0;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===v)return this._linkMatchers.splice(b,1),!0;return!1},p.prototype._doLinkifyRow=function(v,b,f){for(var c,a=this,l=new RegExp(f.regex.source,(f.regex.flags||"")+"g"),d=-1,g=function(){var M=c["number"!=typeof f.matchIndex?0:f.matchIndex];if(!M)return D._logService.debug("match found without corresponding matchIndex",c,f),"break";if(d=b.indexOf(M,d+1),l.lastIndex=d+M.length,d<0)return"break";var O=D._bufferService.buffer.stringIndexToBufferIndex(v,d);if(O[0]<0)return"break";var R=D._bufferService.buffer.lines.get(O[0]);if(!R)return"break";var T=R.getFg(O[1]),L=T?T>>9&511:void 0;f.validationCallback?f.validationCallback(M,function(B){a._rowsTimeoutId||B&&a._addLink(O[1],O[0]-a._bufferService.buffer.ydisp,M,f,L)}):D._addLink(O[1],O[0]-D._bufferService.buffer.ydisp,M,f,L)},D=this;null!==(c=l.exec(b))&&"break"!==g(););},p.prototype._addLink=function(v,b,f,c,a){var l=this;if(this._mouseZoneManager&&this._element){var d=this._unicodeService.getStringCellWidth(f),g=v%this._bufferService.cols,D=b+Math.floor(v/this._bufferService.cols),M=(g+d)%this._bufferService.cols,O=D+Math.floor((g+d)/this._bufferService.cols);0===M&&(M=this._bufferService.cols,O--),this._mouseZoneManager.add(new E(g+1,D+1,M+1,O+1,function(R){if(c.handler)return c.handler(R,f);var T=window.open();T?(T.opener=null,T.location.href=f):console.warn("Opening link blocked as opener could not be cleared")},function(){l._onShowLinkUnderline.fire(l._createLinkHoverEvent(g,D,M,O,a)),l._element.classList.add("xterm-cursor-pointer")},function(R){l._onLinkTooltip.fire(l._createLinkHoverEvent(g,D,M,O,a)),c.hoverTooltipCallback&&c.hoverTooltipCallback(R,f,{start:{x:g,y:D},end:{x:M,y:O}})},function(){l._onHideLinkUnderline.fire(l._createLinkHoverEvent(g,D,M,O,a)),l._element.classList.remove("xterm-cursor-pointer"),c.hoverLeaveCallback&&c.hoverLeaveCallback()},function(R){return!c.willLinkActivate||c.willLinkActivate(R,f)}))}},p.prototype._createLinkHoverEvent=function(v,b,f,c,a){return{x1:v,y1:b,x2:f,y2:c,cols:this._bufferService.cols,fg:a}},p._timeBeforeLatency=200,p=m([S(0,y.IBufferService),S(1,y.ILogService),S(2,y.IUnicodeService)],p)}();_.Linkifier=I;var E=function(p,v,b,f,c,a,l,d,g){this.x1=p,this.y1=v,this.x2=b,this.y2=f,this.clickCallback=c,this.hoverCallback=a,this.tooltipCallback=l,this.leaveCallback=d,this.willLinkActivate=g};_.MouseZone=E},6465:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.Linkifier2=void 0;var I=A(2585),E=A(8460),p=A(844),v=A(3656),b=function(f){function c(a){var l=f.call(this)||this;return l._bufferService=a,l._linkProviders=[],l._linkCacheDisposables=[],l._isMouseOut=!0,l._activeLine=-1,l._onShowLinkUnderline=l.register(new E.EventEmitter),l._onHideLinkUnderline=l.register(new E.EventEmitter),l.register((0,p.getDisposeArrayDisposable)(l._linkCacheDisposables)),l}return S(c,f),Object.defineProperty(c.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),c.prototype.registerLinkProvider=function(a){var l=this;return this._linkProviders.push(a),{dispose:function(){var d=l._linkProviders.indexOf(a);-1!==d&&l._linkProviders.splice(d,1)}}},c.prototype.attachToDom=function(a,l,d){var g=this;this._element=a,this._mouseService=l,this._renderService=d,this.register((0,v.addDisposableDomListener)(this._element,"mouseleave",function(){g._isMouseOut=!0,g._clearCurrentLink()})),this.register((0,v.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,v.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},c.prototype._onMouseMove=function(a){if(this._lastMouseEvent=a,this._element&&this._mouseService){var l=this._positionFromMouseEvent(a,this._element,this._mouseService);if(l){this._isMouseOut=!1;for(var d=a.composedPath(),g=0;g<d.length;g++){var D=d[g];if(D.classList.contains("xterm"))break;if(D.classList.contains("xterm-hover"))return}this._lastBufferCell&&l.x===this._lastBufferCell.x&&l.y===this._lastBufferCell.y||(this._onHover(l),this._lastBufferCell=l)}}},c.prototype._onHover=function(a){if(this._activeLine!==a.y)return this._clearCurrentLink(),void this._askForLink(a,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))},c.prototype._askForLink=function(a,l){var d,g=this;this._activeProviderReplies&&l||(null===(d=this._activeProviderReplies)||void 0===d||d.forEach(function(M){null==M||M.forEach(function(O){O.link.dispose&&O.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);var D=!1;this._linkProviders.forEach(function(M,O){var R;l?(null===(R=g._activeProviderReplies)||void 0===R?void 0:R.get(O))&&(D=g._checkLinkProviderResult(O,a,D)):M.provideLinks(a.y,function(T){var L,B;if(!g._isMouseOut){var F=null==T?void 0:T.map(function(G){return{link:G}});null===(L=g._activeProviderReplies)||void 0===L||L.set(O,F),D=g._checkLinkProviderResult(O,a,D),(null===(B=g._activeProviderReplies)||void 0===B?void 0:B.size)===g._linkProviders.length&&g._removeIntersectingLinks(a.y,g._activeProviderReplies)}})})},c.prototype._removeIntersectingLinks=function(a,l){for(var d=new Set,g=0;g<l.size;g++){var D=l.get(g);if(D)for(var M=0;M<D.length;M++)for(var O=D[M],T=O.link.range.end.y>a?this._bufferService.cols:O.link.range.end.x,L=O.link.range.start.y<a?0:O.link.range.start.x;L<=T;L++){if(d.has(L)){D.splice(M--,1);break}d.add(L)}}},c.prototype._checkLinkProviderResult=function(a,l,d){var g,D=this;if(!this._activeProviderReplies)return d;for(var M=this._activeProviderReplies.get(a),O=!1,R=0;R<a;R++)this._activeProviderReplies.has(R)&&!this._activeProviderReplies.get(R)||(O=!0);if(!O&&M){var T=M.find(function(B){return D._linkAtPosition(B.link,l)});T&&(d=!0,this._handleNewLink(T))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(R=0;R<this._activeProviderReplies.size;R++){var L=null===(g=this._activeProviderReplies.get(R))||void 0===g?void 0:g.find(function(B){return D._linkAtPosition(B.link,l)});if(L){d=!0,this._handleNewLink(L);break}}return d},c.prototype._onClick=function(a){if(this._element&&this._mouseService&&this._currentLink){var l=this._positionFromMouseEvent(a,this._element,this._mouseService);l&&this._linkAtPosition(this._currentLink.link,l)&&this._currentLink.link.activate(a,this._currentLink.link.text)}},c.prototype._clearCurrentLink=function(a,l){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!l||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=l)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))},c.prototype._handleNewLink=function(a){var l=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(a.link,d)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:void 0===a.link.decorations||a.link.decorations.underline,pointerCursor:void 0===a.link.decorations||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:function(){var g,D;return null===(D=null===(g=l._currentLink)||void 0===g?void 0:g.state)||void 0===D?void 0:D.decorations.pointerCursor},set:function(g){var D,M;(null===(D=l._currentLink)||void 0===D?void 0:D.state)&&l._currentLink.state.decorations.pointerCursor!==g&&(l._currentLink.state.decorations.pointerCursor=g,l._currentLink.state.isHovered&&(null===(M=l._element)||void 0===M||M.classList.toggle("xterm-cursor-pointer",g)))}},underline:{get:function(){var g,D;return null===(D=null===(g=l._currentLink)||void 0===g?void 0:g.state)||void 0===D?void 0:D.decorations.underline},set:function(g){var D,M,O;(null===(D=l._currentLink)||void 0===D?void 0:D.state)&&(null===(O=null===(M=l._currentLink)||void 0===M?void 0:M.state)||void 0===O?void 0:O.decorations.underline)!==g&&(l._currentLink.state.decorations.underline=g,l._currentLink.state.isHovered&&l._fireUnderlineEvent(a.link,g))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(g){l._clearCurrentLink(0===g.start?0:g.start+1+l._bufferService.buffer.ydisp,g.end+1+l._bufferService.buffer.ydisp)})))}},c.prototype._linkHover=function(a,l,d){var g;(null===(g=this._currentLink)||void 0===g?void 0:g.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),l.hover&&l.hover(d,l.text)},c.prototype._fireUnderlineEvent=function(a,l){var d=a.range,g=this._bufferService.buffer.ydisp,D=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-g-1,d.end.x,d.end.y-g-1,void 0);(l?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(D)},c.prototype._linkLeave=function(a,l,d){var g;(null===(g=this._currentLink)||void 0===g?void 0:g.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(l,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),l.leave&&l.leave(d,l.text)},c.prototype._linkAtPosition=function(a,l){var g=a.range.start.y<l.y,D=a.range.end.y>l.y;return(a.range.start.y===a.range.end.y&&a.range.start.x<=l.x&&a.range.end.x>=l.x||g&&a.range.end.x>=l.x||D&&a.range.start.x<=l.x||g&&D)&&a.range.start.y<=l.y&&a.range.end.y>=l.y},c.prototype._positionFromMouseEvent=function(a,l,d){var g=d.getCoords(a,l,this._bufferService.cols,this._bufferService.rows);if(g)return{x:g[0],y:g[1]+this._bufferService.buffer.ydisp}},c.prototype._createLinkUnderlineEvent=function(a,l,d,g,D){return{x1:a,y1:l,x2:d,y2:g,cols:this._bufferService.cols,fg:D}},w([y(0,I.IBufferService)],c)}(p.Disposable);_.Linkifier2=b},9042:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.tooMuchOutput=_.promptLabel=void 0,_.promptLabel="Terminal input",_.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.MouseZoneManager=void 0;var I=A(844),E=A(3656),p=A(4725),v=A(2585),b=function(f){function c(a,l,d,g,D,M){var O=f.call(this)||this;return O._element=a,O._screenElement=l,O._bufferService=d,O._mouseService=g,O._selectionService=D,O._optionsService=M,O._zones=[],O._areZonesActive=!1,O._lastHoverCoords=[void 0,void 0],O._initialSelectionLength=0,O.register((0,E.addDisposableDomListener)(O._element,"mousedown",function(R){return O._onMouseDown(R)})),O._mouseMoveListener=function(R){return O._onMouseMove(R)},O._mouseLeaveListener=function(R){return O._onMouseLeave(R)},O._clickListener=function(R){return O._onClick(R)},O}return S(c,f),c.prototype.dispose=function(){f.prototype.dispose.call(this),this._deactivate()},c.prototype.add=function(a){this._zones.push(a),1===this._zones.length&&this._activate()},c.prototype.clearAll=function(a,l){if(0!==this._zones.length){a&&l||(a=0,l=this._bufferService.rows-1);for(var d=0;d<this._zones.length;d++){var g=this._zones[d];(g.y1>a&&g.y1<=l+1||g.y2>a&&g.y2<=l+1||g.y1<a&&g.y2>l+1)&&(this._currentZone&&this._currentZone===g&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(d--,1))}0===this._zones.length&&this._deactivate()}},c.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},c.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},c.prototype._onMouseMove=function(a){this._lastHoverCoords[0]===a.pageX&&this._lastHoverCoords[1]===a.pageY||(this._onHover(a),this._lastHoverCoords=[a.pageX,a.pageY])},c.prototype._onHover=function(a){var l=this,d=this._findZoneEventAt(a);d!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),d&&(this._currentZone=d,d.hoverCallback&&d.hoverCallback(a),this._tooltipTimeout=window.setTimeout(function(){return l._onTooltip(a)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},c.prototype._onTooltip=function(a){this._tooltipTimeout=void 0;var l=this._findZoneEventAt(a);null==l||l.tooltipCallback(a)},c.prototype._onMouseDown=function(a){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var l=this._findZoneEventAt(a);(null==l?void 0:l.willLinkActivate(a))&&(a.preventDefault(),a.stopImmediatePropagation())}},c.prototype._onMouseLeave=function(a){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},c.prototype._onClick=function(a){var l=this._findZoneEventAt(a),d=this._getSelectionLength();l&&d===this._initialSelectionLength&&(l.clickCallback(a),a.preventDefault(),a.stopImmediatePropagation())},c.prototype._getSelectionLength=function(){var a=this._selectionService.selectionText;return a?a.length:0},c.prototype._findZoneEventAt=function(a){var l=this._mouseService.getCoords(a,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(l)for(var d=l[0],g=l[1],D=0;D<this._zones.length;D++){var M=this._zones[D];if(M.y1===M.y2){if(g===M.y1&&d>=M.x1&&d<M.x2)return M}else if(g===M.y1&&d>=M.x1||g===M.y2&&d<M.x2||g>M.y1&&g<M.y2)return M}},w([y(2,v.IBufferService),y(3,p.IMouseService),y(4,p.ISelectionService),y(5,v.IOptionsService)],c)}(I.Disposable);_.MouseZoneManager=b},6193:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.RenderDebouncer=void 0;var A=function(){function m(S){this._renderCallback=S}return m.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},m.prototype.refresh=function(S,w,y){var I=this;this._rowCount=y,S=void 0!==S?S:0,w=void 0!==w?w:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,S):S,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,w):w,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return I._innerRefresh()}))},m.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var S=Math.max(this._rowStart,0),w=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(S,w)}},m}();_.RenderDebouncer=A},5596:function(J,_,A){var m,S=this&&this.__extends||(m=function(y,I){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,p){E.__proto__=p}||function(E,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(E[v]=p[v])})(y,I)},function(y,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function E(){this.constructor=y}m(y,I),y.prototype=null===I?Object.create(I):(E.prototype=I.prototype,new E)});Object.defineProperty(_,"__esModule",{value:!0}),_.ScreenDprMonitor=void 0;var w=function(y){function I(){var E=null!==y&&y.apply(this,arguments)||this;return E._currentDevicePixelRatio=window.devicePixelRatio,E}return S(I,y),I.prototype.setListener=function(E){var p=this;this._listener&&this.clearListener(),this._listener=E,this._outerListener=function(){p._listener&&(p._listener(window.devicePixelRatio,p._currentDevicePixelRatio),p._updateDpr())},this._updateDpr()},I.prototype.dispose=function(){y.prototype.dispose.call(this),this.clearListener()},I.prototype._updateDpr=function(){var E;this._outerListener&&(null===(E=this._resolutionMediaMatchList)||void 0===E||E.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},I.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},I}(A(844).Disposable);_.ScreenDprMonitor=w},3236:function(J,_,A){var m,S=this&&this.__extends||(m=function(N,ee){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,W){z.__proto__=W}||function(z,W){for(var V in W)Object.prototype.hasOwnProperty.call(W,V)&&(z[V]=W[V])})(N,ee)},function(N,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function z(){this.constructor=N}m(N,ee),N.prototype=null===ee?Object.create(ee):(z.prototype=ee.prototype,new z)});Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;var w=A(2950),y=A(1680),I=A(3614),E=A(2584),p=A(5435),v=A(3525),b=A(3551),f=A(9312),c=A(6114),a=A(3656),l=A(9042),d=A(357),g=A(6954),D=A(4567),M=A(1296),O=A(7399),R=A(8460),T=A(8437),L=A(5680),B=A(3230),F=A(4725),G=A(428),U=A(8934),k=A(6465),H=A(5114),$=A(8969),K=A(4774),ne=A(4269),ie=A(5941),Se=A(7641),_e="undefined"!=typeof window?window.document:null,Ne=function(N){function ee(z){void 0===z&&(z={});var W=N.call(this,z)||this;return W.browser=c,W._keyDownHandled=!1,W._keyPressHandled=!1,W._unprocessedDeadKey=!1,W._onCursorMove=new R.EventEmitter,W._onKey=new R.EventEmitter,W._onRender=new R.EventEmitter,W._onSelectionChange=new R.EventEmitter,W._onTitleChange=new R.EventEmitter,W._onBell=new R.EventEmitter,W._onFocus=new R.EventEmitter,W._onBlur=new R.EventEmitter,W._onA11yCharEmitter=new R.EventEmitter,W._onA11yTabEmitter=new R.EventEmitter,W._setup(),W.linkifier=W._instantiationService.createInstance(b.Linkifier),W.linkifier2=W.register(W._instantiationService.createInstance(k.Linkifier2)),W.decorationService=W.register(W._instantiationService.createInstance(Se.DecorationService)),W.register(W._inputHandler.onRequestBell(function(){return W.bell()})),W.register(W._inputHandler.onRequestRefreshRows(function(V,de){return W.refresh(V,de)})),W.register(W._inputHandler.onRequestSendFocus(function(){return W._reportFocus()})),W.register(W._inputHandler.onRequestReset(function(){return W.reset()})),W.register(W._inputHandler.onRequestWindowsOptionsReport(function(V){return W._reportWindowsOptions(V)})),W.register(W._inputHandler.onColor(function(V){return W._handleColorEvent(V)})),W.register((0,R.forwardEvent)(W._inputHandler.onCursorMove,W._onCursorMove)),W.register((0,R.forwardEvent)(W._inputHandler.onTitleChange,W._onTitleChange)),W.register((0,R.forwardEvent)(W._inputHandler.onA11yChar,W._onA11yCharEmitter)),W.register((0,R.forwardEvent)(W._inputHandler.onA11yTab,W._onA11yTabEmitter)),W.register(W._bufferService.onResize(function(V){return W._afterResize(V.cols,V.rows)})),W}return S(ee,N),Object.defineProperty(ee.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),ee.prototype._handleColorEvent=function(z){var W,V;if(this._colorManager){for(var de=0,he=z;de<he.length;de++){var ye=he[de],$e=void 0,Ke="";switch(ye.index){case 256:$e="foreground",Ke="10";break;case 257:$e="background",Ke="11";break;case 258:$e="cursor",Ke="12";break;default:$e="ansi",Ke="4;"+ye.index}if($e)switch(ye.type){case 0:var $t=K.color.toColorRGB("ansi"===$e?this._colorManager.colors.ansi[ye.index]:this._colorManager.colors[$e]);this.coreService.triggerDataEvent(E.C0.ESC+"]"+Ke+";"+(0,ie.toRgbString)($t)+E.C0.BEL);break;case 1:"ansi"===$e?this._colorManager.colors.ansi[ye.index]=K.rgba.toColor.apply(K.rgba,ye.color):this._colorManager.colors[$e]=K.rgba.toColor.apply(K.rgba,ye.color);break;case 2:this._colorManager.restoreColor(ye.index)}}null===(W=this._renderService)||void 0===W||W.setColors(this._colorManager.colors),null===(V=this.viewport)||void 0===V||V.onThemeChange(this._colorManager.colors)}},ee.prototype.dispose=function(){var z,W,V;this._isDisposed||(N.prototype.dispose.call(this),null===(z=this._renderService)||void 0===z||z.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(V=null===(W=this.element)||void 0===W?void 0:W.parentNode)||void 0===V||V.removeChild(this.element))},ee.prototype._setup=function(){N.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(ee.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),ee.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},ee.prototype._updateOptions=function(z){var W,V,de,he;switch(N.prototype._updateOptions.call(this,z),z){case"fontFamily":case"fontSize":null===(W=this._renderService)||void 0===W||W.clear(),null===(V=this._charSizeService)||void 0===V||V.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(de=this.viewport)||void 0===de||de.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new D.AccessibilityManager(this,this._renderService)):(null===(he=this._accessibilityManager)||void 0===he||he.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},ee.prototype._onTextAreaFocus=function(z){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(E.C0.ESC+"[I"),this.updateCursorStyle(z),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},ee.prototype.blur=function(){var z;return null===(z=this.textarea)||void 0===z?void 0:z.blur()},ee.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(E.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},ee.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var W=this.buffer.lines.get(this.buffer.ybase+this.buffer.y);if(W){var V=Math.min(this.buffer.x,this.cols-1),de=this._renderService.dimensions.actualCellHeight,he=W.getWidth(V),ye=this._renderService.dimensions.actualCellWidth*he,$e=this.buffer.y*this._renderService.dimensions.actualCellHeight;this.textarea.style.left=V*this._renderService.dimensions.actualCellWidth+"px",this.textarea.style.top=$e+"px",this.textarea.style.width=ye+"px",this.textarea.style.height=de+"px",this.textarea.style.lineHeight=de+"px",this.textarea.style.zIndex="-5"}}},ee.prototype._initGlobal=function(){var z=this;this._bindKeys(),this.register((0,a.addDisposableDomListener)(this.element,"copy",function(V){z.hasSelection()&&(0,I.copyHandler)(V,z._selectionService)}));var W=function(V){return(0,I.handlePasteEvent)(V,z.textarea,z.coreService)};this.register((0,a.addDisposableDomListener)(this.textarea,"paste",W)),this.register((0,a.addDisposableDomListener)(this.element,"paste",W)),this.register(c.isFirefox?(0,a.addDisposableDomListener)(this.element,"mousedown",function(V){2===V.button&&(0,I.rightClickHandler)(V,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)}):(0,a.addDisposableDomListener)(this.element,"contextmenu",function(V){(0,I.rightClickHandler)(V,z.textarea,z.screenElement,z._selectionService,z.options.rightClickSelectsWord)})),c.isLinux&&this.register((0,a.addDisposableDomListener)(this.element,"auxclick",function(V){1===V.button&&(0,I.moveTextAreaUnderMouseCursor)(V,z.textarea,z.screenElement)}))},ee.prototype._bindKeys=function(){var z=this;this.register((0,a.addDisposableDomListener)(this.textarea,"keyup",function(W){return z._keyUp(W)},!0)),this.register((0,a.addDisposableDomListener)(this.textarea,"keydown",function(W){return z._keyDown(W)},!0)),this.register((0,a.addDisposableDomListener)(this.textarea,"keypress",function(W){return z._keyPress(W)},!0)),this.register((0,a.addDisposableDomListener)(this.textarea,"compositionstart",function(){return z._compositionHelper.compositionstart()})),this.register((0,a.addDisposableDomListener)(this.textarea,"compositionupdate",function(W){return z._compositionHelper.compositionupdate(W)})),this.register((0,a.addDisposableDomListener)(this.textarea,"compositionend",function(){return z._compositionHelper.compositionend()})),this.register((0,a.addDisposableDomListener)(this.textarea,"input",function(W){return z._inputEvent(W)},!0)),this.register(this.onRender(function(){return z._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(W){return z._queueLinkification(W.start,W.end)}))},ee.prototype.open=function(z){var W=this;if(!z)throw new Error("Terminal requires a parent element.");z.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=z.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),z.appendChild(this.element);var V=_e.createDocumentFragment();this._viewportElement=_e.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),V.appendChild(this._viewportElement),this._viewportScrollArea=_e.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=_e.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=_e.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),V.appendChild(this.screenElement),this.textarea=_e.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",l.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,a.addDisposableDomListener)(this.textarea,"focus",function(ye){return W._onTextAreaFocus(ye)})),this.register((0,a.addDisposableDomListener)(this.textarea,"blur",function(){return W._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var de=this._instantiationService.createInstance(H.CoreBrowserService,this.textarea);this._instantiationService.setService(F.ICoreBrowserService,de),this._charSizeService=this._instantiationService.createInstance(G.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(F.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new L.ColorManager(_e,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(ye){return W._colorManager.onOptionsChange(ye)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(ne.CharacterJoinerService),this._instantiationService.setService(F.ICharacterJoinerService,this._characterJoinerService);var he=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(B.RenderService,he,this.rows,this.screenElement)),this._instantiationService.setService(F.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(ye){return W._onRender.fire(ye)})),this.onResize(function(ye){return W._renderService.resize(ye.cols,ye.rows)}),this._compositionView=_e.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(w.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(V),this._soundService=this._instantiationService.createInstance(d.SoundService),this._instantiationService.setService(F.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(U.MouseService),this._instantiationService.setService(F.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(y.Viewport,function(ye){return W.scrollLines(ye,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return W.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){W._renderService.onCursorMove(),W._syncTextArea()})),this.register(this.onResize(function(){return W._renderService.onResize(W.cols,W.rows)})),this.register(this.onBlur(function(){return W._renderService.onBlur()})),this.register(this.onFocus(function(){return W._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return W.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(F.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(ye){return W.scrollLines(ye.amount,ye.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return W._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(ye){return W._renderService.onSelectionChanged(ye.start,ye.end,ye.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(ye){W.textarea.value=ye,W.textarea.focus(),W.textarea.select()})),this.register(this._onScroll.event(function(ye){W.viewport.syncScrollArea(),W._selectionService.refresh()})),this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",function(){return W._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(g.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return W._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,a.addDisposableDomListener)(this.element,"mousedown",function(ye){return W._selectionService.onMouseDown(ye)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new D.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},ee.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(v.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(M.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},ee.prototype._setTheme=function(z){var W,V,de;this._theme=z,null===(W=this._colorManager)||void 0===W||W.setTheme(z),null===(V=this._renderService)||void 0===V||V.setColors(this._colorManager.colors),null===(de=this.viewport)||void 0===de||de.onThemeChange(this._colorManager.colors)},ee.prototype.bindMouse=function(){var z=this,W=this,V=this.element;function de(ue){var gt,Nt,Gt=W._mouseService.getRawByteCoords(ue,W.screenElement,W.cols,W.rows);if(!Gt)return!1;switch(ue.overrideType||ue.type){case"mousemove":Nt=32,void 0===ue.buttons?(gt=3,void 0!==ue.button&&(gt=ue.button<3?ue.button:3)):gt=1&ue.buttons?0:4&ue.buttons?1:2&ue.buttons?2:3;break;case"mouseup":Nt=0,gt=ue.button<3?ue.button:3;break;case"mousedown":Nt=1,gt=ue.button<3?ue.button:3;break;case"wheel":0!==ue.deltaY&&(Nt=ue.deltaY<0?0:1),gt=4;break;default:return!1}return!(void 0===Nt||void 0===gt||gt>4)&&W.coreMouseService.triggerMouseEvent({col:Gt.x-33,row:Gt.y-33,button:gt,action:Nt,ctrl:ue.ctrlKey,alt:ue.altKey,shift:ue.shiftKey})}var he={mouseup:null,wheel:null,mousedrag:null,mousemove:null},ye=function(ue){return de(ue),ue.buttons||(z._document.removeEventListener("mouseup",he.mouseup),he.mousedrag&&z._document.removeEventListener("mousemove",he.mousedrag)),z.cancel(ue)},$e=function(ue){return de(ue),z.cancel(ue,!0)},Ke=function(ue){ue.buttons&&de(ue)},$t=function(ue){ue.buttons||de(ue)};this.register(this.coreMouseService.onProtocolChange(function(ue){ue?("debug"===z.optionsService.rawOptions.logLevel&&z._logService.debug("Binding to mouse events:",z.coreMouseService.explainEvents(ue)),z.element.classList.add("enable-mouse-events"),z._selectionService.disable()):(z._logService.debug("Unbinding from mouse events."),z.element.classList.remove("enable-mouse-events"),z._selectionService.enable()),8&ue?he.mousemove||(V.addEventListener("mousemove",$t),he.mousemove=$t):(V.removeEventListener("mousemove",he.mousemove),he.mousemove=null),16&ue?he.wheel||(V.addEventListener("wheel",$e,{passive:!1}),he.wheel=$e):(V.removeEventListener("wheel",he.wheel),he.wheel=null),2&ue?he.mouseup||(he.mouseup=ye):(z._document.removeEventListener("mouseup",he.mouseup),he.mouseup=null),4&ue?he.mousedrag||(he.mousedrag=Ke):(z._document.removeEventListener("mousemove",he.mousedrag),he.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,a.addDisposableDomListener)(V,"mousedown",function(ue){if(ue.preventDefault(),z.focus(),z.coreMouseService.areMouseEventsActive&&!z._selectionService.shouldForceSelection(ue))return de(ue),he.mouseup&&z._document.addEventListener("mouseup",he.mouseup),he.mousedrag&&z._document.addEventListener("mousemove",he.mousedrag),z.cancel(ue)})),this.register((0,a.addDisposableDomListener)(V,"wheel",function(ue){if(!he.wheel){if(!z.buffer.hasScrollback){var gt=z.viewport.getLinesScrolled(ue);if(0===gt)return;for(var Nt=E.C0.ESC+(z.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ue.deltaY<0?"A":"B"),Gt="",gr=0;gr<Math.abs(gt);gr++)Gt+=Nt;return z.coreService.triggerDataEvent(Gt,!0),z.cancel(ue,!0)}return z.viewport.onWheel(ue)?z.cancel(ue):void 0}},{passive:!1})),this.register((0,a.addDisposableDomListener)(V,"touchstart",function(ue){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchStart(ue),z.cancel(ue)},{passive:!0})),this.register((0,a.addDisposableDomListener)(V,"touchmove",function(ue){if(!z.coreMouseService.areMouseEventsActive)return z.viewport.onTouchMove(ue)?void 0:z.cancel(ue)},{passive:!1}))},ee.prototype.refresh=function(z,W){var V;null===(V=this._renderService)||void 0===V||V.refreshRows(z,W)},ee.prototype._queueLinkification=function(z,W){var V;null===(V=this.linkifier)||void 0===V||V.linkifyRows(z,W)},ee.prototype.updateCursorStyle=function(z){var W;(null===(W=this._selectionService)||void 0===W?void 0:W.shouldColumnSelect(z))?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},ee.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},ee.prototype.scrollLines=function(z,W,V){void 0===V&&(V=0),N.prototype.scrollLines.call(this,z,W,V),this.refresh(0,this.rows-1)},ee.prototype.paste=function(z){(0,I.paste)(z,this.textarea,this.coreService)},ee.prototype.attachCustomKeyEventHandler=function(z){this._customKeyEventHandler=z},ee.prototype.registerLinkMatcher=function(z,W,V){var de=this.linkifier.registerLinkMatcher(z,W,V);return this.refresh(0,this.rows-1),de},ee.prototype.deregisterLinkMatcher=function(z){this.linkifier.deregisterLinkMatcher(z)&&this.refresh(0,this.rows-1)},ee.prototype.registerLinkProvider=function(z){return this.linkifier2.registerLinkProvider(z)},ee.prototype.registerCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var W=this._characterJoinerService.register(z);return this.refresh(0,this.rows-1),W},ee.prototype.deregisterCharacterJoiner=function(z){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(z)&&this.refresh(0,this.rows-1)},Object.defineProperty(ee.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),ee.prototype.addMarker=function(z){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+z)},ee.prototype.registerDecoration=function(z){return this.decorationService.registerDecoration(z)},ee.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},ee.prototype.select=function(z,W,V){this._selectionService.setSelection(z,W,V)},ee.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},ee.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},ee.prototype.clearSelection=function(){var z;null===(z=this._selectionService)||void 0===z||z.clearSelection()},ee.prototype.selectAll=function(){var z;null===(z=this._selectionService)||void 0===z||z.selectAll()},ee.prototype.selectLines=function(z,W){var V;null===(V=this._selectionService)||void 0===V||V.selectLines(z,W)},ee.prototype._keyDown=function(z){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(z))return!1;if(!this._compositionHelper.keydown(z))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;"Dead"!==z.key&&"AltGraph"!==z.key||(this._unprocessedDeadKey=!0);var W=(0,O.evaluateKeyboardEvent)(z,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(z),3===W.type||2===W.type){var V=this.rows-1;return this.scrollLines(2===W.type?-V:V),this.cancel(z,!0)}return 1===W.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,z)||(W.cancel&&this.cancel(z,!0),!W.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==E.C0.ETX&&W.key!==E.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(z,!0))))},ee.prototype._isThirdLevelShift=function(z,W){var V=z.isMac&&!this.options.macOptionIsMeta&&W.altKey&&!W.ctrlKey&&!W.metaKey||z.isWindows&&W.altKey&&W.ctrlKey&&!W.metaKey||z.isWindows&&W.getModifierState("AltGraph");return"keypress"===W.type?V:V&&(!W.keyCode||W.keyCode>47)},ee.prototype._keyUp=function(z){var W;this._customKeyEventHandler&&!1===this._customKeyEventHandler(z)||(16===(W=z).keyCode||17===W.keyCode||18===W.keyCode||this.focus(),this.updateCursorStyle(z),this._keyPressHandled=!1)},ee.prototype._keyPress=function(z){var W;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&!1===this._customKeyEventHandler(z))return!1;if(this.cancel(z),z.charCode)W=z.charCode;else if(null==z.which)W=z.keyCode;else{if(0===z.which||0===z.charCode)return!1;W=z.which}return!(!W||(z.altKey||z.ctrlKey||z.metaKey)&&!this._isThirdLevelShift(this.browser,z)||(W=String.fromCharCode(W),this._onKey.fire({key:W,domEvent:z}),this._showCursor(),this.coreService.triggerDataEvent(W,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},ee.prototype._inputEvent=function(z){return!(!z.data||"insertText"!==z.inputType||z.composed||this.optionsService.rawOptions.screenReaderMode||this._keyPressHandled||(this._unprocessedDeadKey=!1,this.coreService.triggerDataEvent(z.data,!0),this.cancel(z),0))},ee.prototype.bell=function(){var z;this._soundBell()&&(null===(z=this._soundService)||void 0===z||z.playBellSound()),this._onBell.fire()},ee.prototype.resize=function(z,W){z!==this.cols||W!==this.rows?N.prototype.resize.call(this,z,W):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},ee.prototype._afterResize=function(z,W){var V,de;null===(V=this._charSizeService)||void 0===V||V.measure(),null===(de=this.viewport)||void 0===de||de.syncScrollArea(!0)},ee.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var z=1;z<this.rows;z++)this.buffer.lines.push(this.buffer.getBlankLine(T.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},ee.prototype.reset=function(){var z,W;this.options.rows=this.rows,this.options.cols=this.cols;var V=this._customKeyEventHandler;this._setup(),N.prototype.reset.call(this),null===(z=this._selectionService)||void 0===z||z.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1),null===(W=this.viewport)||void 0===W||W.syncScrollArea()},ee.prototype.clearTextureAtlas=function(){var z;null===(z=this._renderService)||void 0===z||z.clearTextureAtlas()},ee.prototype._reportFocus=function(){var z;(null===(z=this.element)||void 0===z?void 0:z.classList.contains("focus"))?this.coreService.triggerDataEvent(E.C0.ESC+"[I"):this.coreService.triggerDataEvent(E.C0.ESC+"[O")},ee.prototype._reportWindowsOptions=function(z){if(this._renderService)switch(z){case p.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var W=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),V=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(E.C0.ESC+"[4;"+V+";"+W+"t");break;case p.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var de=this._renderService.dimensions.scaledCellWidth.toFixed(0),he=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(E.C0.ESC+"[6;"+he+";"+de+"t")}},ee.prototype.cancel=function(z,W){if(this.options.cancelEvents||W)return z.preventDefault(),z.stopPropagation(),!1},ee.prototype._visualBell=function(){return!1},ee.prototype._soundBell=function(){return"sound"===this.options.bellStyle},ee}($.CoreTerminal);_.Terminal=Ne},9924:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.TimeBasedDebouncer=void 0;var A=function(){function m(S,w){void 0===w&&(w=1e3),this._renderCallback=S,this._debounceThresholdMS=w,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return m.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},m.prototype.refresh=function(S,w,y){var I=this;this._rowCount=y,S=void 0!==S?S:0,w=void 0!==w?w:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,S):S,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,w):w;var E=Date.now();if(E-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=E,this._innerRefresh();else if(!this._additionalRefreshRequested){var v=this._debounceThresholdMS-(E-this._lastRefreshMs);this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){I._lastRefreshMs=Date.now(),I._innerRefresh(),I._additionalRefreshRequested=!1,I._refreshTimeoutID=void 0},v)}},m.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var S=Math.max(this._rowStart,0),w=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(S,w)}},m}();_.TimeBasedDebouncer=A},1680:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.Viewport=void 0;var I=A(844),E=A(3656),p=A(4725),v=A(2585),b=function(f){function c(a,l,d,g,D,M,O,R){var T=f.call(this)||this;return T._scrollLines=a,T._viewportElement=l,T._scrollArea=d,T._element=g,T._bufferService=D,T._optionsService=M,T._charSizeService=O,T._renderService=R,T.scrollBarWidth=0,T._currentRowHeight=0,T._currentScaledCellHeight=0,T._lastRecordedBufferLength=0,T._lastRecordedViewportHeight=0,T._lastRecordedBufferHeight=0,T._lastTouchY=0,T._lastScrollTop=0,T._lastHadScrollBar=!1,T._wheelPartialScroll=0,T._refreshAnimationFrame=null,T._ignoreNextScrollEvent=!1,T.scrollBarWidth=T._viewportElement.offsetWidth-T._scrollArea.offsetWidth||15,T._lastHadScrollBar=!0,T.register((0,E.addDisposableDomListener)(T._viewportElement,"scroll",T._onScroll.bind(T))),T._activeBuffer=T._bufferService.buffer,T.register(T._bufferService.buffers.onBufferActivate(function(L){return T._activeBuffer=L.activeBuffer})),T._renderDimensions=T._renderService.dimensions,T.register(T._renderService.onDimensionsChange(function(L){return T._renderDimensions=L})),setTimeout(function(){return T.syncScrollArea()},0),T}return S(c,f),c.prototype.onThemeChange=function(a){this._viewportElement.style.backgroundColor=a.background.css},c.prototype._refresh=function(a){var l=this;if(a)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return l._innerRefresh()}))},c.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this.scrollBarWidth=0===this._optionsService.rawOptions.scrollback?0:this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var d=window.getComputedStyle(this._element),g=parseInt(d.paddingLeft)+parseInt(d.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?g:0)).toString()+"px",this._refreshAnimationFrame=null},c.prototype.syncScrollArea=function(a){if(void 0===a&&(a=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(a);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(a):this._refresh(a)},c.prototype._onScroll=function(a){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(l)}},c.prototype._bubbleScroll=function(a,l){return!(l<0&&0!==this._viewportElement.scrollTop||l>0&&this._viewportElement.scrollTop+this._lastRecordedViewportHeight<this._lastRecordedBufferHeight)||(a.cancelable&&a.preventDefault(),!1)},c.prototype.onWheel=function(a){var l=this._getPixelsScrolled(a);return 0!==l&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))},c.prototype._getPixelsScrolled=function(a){if(0===a.deltaY||a.shiftKey)return 0;var l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l},c.prototype.getLinesScrolled=function(a){if(0===a.deltaY||a.shiftKey)return 0;var l=this._applyScrollModifier(a.deltaY,a);return a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(this._wheelPartialScroll+=l/=this._currentRowHeight+0,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l},c.prototype._applyScrollModifier=function(a,l){var d=this._optionsService.rawOptions.fastScrollModifier;return"alt"===d&&l.altKey||"ctrl"===d&&l.ctrlKey||"shift"===d&&l.shiftKey?a*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:a*this._optionsService.rawOptions.scrollSensitivity},c.prototype.onTouchStart=function(a){this._lastTouchY=a.touches[0].pageY},c.prototype.onTouchMove=function(a){var l=this._lastTouchY-a.touches[0].pageY;return this._lastTouchY=a.touches[0].pageY,0!==l&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(a,l))},w([y(4,v.IBufferService),y(5,v.IOptionsService),y(6,p.ICharSizeService),y(7,p.IRenderService)],c)}(I.Disposable);_.Viewport=b},2950:function(J,_,A){var m=this&&this.__decorate||function(E,p,v,b){var f,c=arguments.length,a=c<3?p:null===b?b=Object.getOwnPropertyDescriptor(p,v):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(E,p,v,b);else for(var l=E.length-1;l>=0;l--)(f=E[l])&&(a=(c<3?f(a):c>3?f(p,v,a):f(p,v))||a);return c>3&&a&&Object.defineProperty(p,v,a),a},S=this&&this.__param||function(E,p){return function(v,b){p(v,b,E)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CompositionHelper=void 0;var w=A(4725),y=A(2585),I=function(){function E(p,v,b,f,c,a){this._textarea=p,this._compositionView=v,this._bufferService=b,this._optionsService=f,this._coreService=c,this._renderService=a,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(E.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),E.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},E.prototype.compositionupdate=function(p){var v=this;this._compositionView.textContent=p.data,this.updateCompositionElements(),setTimeout(function(){v._compositionPosition.end=v._textarea.value.length},0)},E.prototype.compositionend=function(){this._finalizeComposition(!0)},E.prototype.keydown=function(p){if(this._isComposing||this._isSendingComposition){if(229===p.keyCode||16===p.keyCode||17===p.keyCode||18===p.keyCode)return!1;this._finalizeComposition(!1)}return 229!==p.keyCode||(this._handleAnyTextareaChanges(),!1)},E.prototype._finalizeComposition=function(p){var v=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,p){var b={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var c;v._isSendingComposition&&(v._isSendingComposition=!1,b.start+=v._dataAlreadySent.length,(c=v._isComposing?v._textarea.value.substring(b.start,b.end):v._textarea.value.substring(b.start)).length>0&&v._coreService.triggerDataEvent(c,!0))},0)}else{this._isSendingComposition=!1;var f=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(f,!0)}},E.prototype._handleAnyTextareaChanges=function(){var p=this,v=this._textarea.value;setTimeout(function(){if(!p._isComposing){var b=p._textarea.value.replace(v,"");b.length>0&&(p._dataAlreadySent=b,p._coreService.triggerDataEvent(b,!0))}},0)},E.prototype.updateCompositionElements=function(p){var v=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var b=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),f=this._renderService.dimensions.actualCellHeight,c=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,a=b*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=a+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var l=this._compositionView.getBoundingClientRect();this._textarea.style.left=a+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(l.width,1)+"px",this._textarea.style.height=Math.max(l.height,1)+"px",this._textarea.style.lineHeight=l.height+"px"}p||setTimeout(function(){return v.updateCompositionElements(!0)},0)}},m([S(2,y.IBufferService),S(3,y.IOptionsService),S(4,y.ICoreService),S(5,w.IRenderService)],E)}();_.CompositionHelper=I},9806:(J,_)=>{function A(m,S){var w=S.getBoundingClientRect();return[m.clientX-w.left,m.clientY-w.top]}Object.defineProperty(_,"__esModule",{value:!0}),_.getRawByteCoords=_.getCoords=_.getCoordsRelativeToElement=void 0,_.getCoordsRelativeToElement=A,_.getCoords=function(m,S,w,y,I,E,p,v){if(I){var b=A(m,S);if(b)return b[0]=Math.ceil((b[0]+(v?E/2:0))/E),b[1]=Math.ceil(b[1]/p),b[0]=Math.min(Math.max(b[0],1),w+(v?1:0)),b[1]=Math.min(Math.max(b[1],1),y),b}},_.getRawByteCoords=function(m){if(m)return{x:m[0]+32,y:m[1]+32}}},9504:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.moveToCellSequence=void 0;var m=A(2584);function S(v,b,f,c){var a=v-w(f,v),l=b-w(f,b);return p(Math.abs(a-l)-function(g,D,M){for(var O=0,R=g-w(M,g),T=D-w(M,D),L=0;L<Math.abs(R-T);L++){var B="A"===y(g,D)?-1:1,F=M.buffer.lines.get(R+B*L);(null==F?void 0:F.isWrapped)&&O++}return O}(v,b,f),E(y(v,b),c))}function w(v,b){for(var f=0,c=v.buffer.lines.get(b),a=null==c?void 0:c.isWrapped;a&&b>=0&&b<v.rows;)f++,a=null==(c=v.buffer.lines.get(--b))?void 0:c.isWrapped;return f}function y(v,b){return v>b?"A":"B"}function I(v,b,f,c,a,l){for(var d=v,g=b,D="";d!==f||g!==c;)d+=a?1:-1,a&&d>l.cols-1?(D+=l.buffer.translateBufferLineToString(g,!1,v,d),d=0,v=0,g++):!a&&d<0&&(D+=l.buffer.translateBufferLineToString(g,!1,0,v+1),v=d=l.cols-1,g--);return D+l.buffer.translateBufferLineToString(g,!1,v,d)}function E(v,b){return m.C0.ESC+(b?"O":"[")+v}function p(v,b){v=Math.floor(v);for(var f="",c=0;c<v;c++)f+=b;return f}_.moveToCellSequence=function(v,b,f,c){var a,D,M,T,L,l=f.buffer.x,d=f.buffer.y;if(!f.buffer.hasScrollback)return D=l,(0===S(M=d,b,T=f,L=c).length?"":p(I(D,M,D,M-w(T,M),!1,T).length,E("D",L)))+S(d,b,f,c)+function(D,M,O,R,T,L){var B;B=S(M,R,T,L).length>0?R-w(T,R):M;var U,k,H,$,K,ie,F=R,G=(U=D,k=M,ie=S(H=O,$=R,K=T,L).length>0?$-w(K,$):k,U<H&&ie<=$||U>=H&&ie<$?"C":"D");return p(I(D,B,O,F,"C"===G,T).length,E(G,L))}(l,d,v,b,f,c);if(d===b)return a=l>v?"D":"C",p(Math.abs(l-v),E(a,c));a=d>b?"D":"C";var g=Math.abs(d-b);return p(function(D,M){return M.cols-D}(d>b?v:l,f)+(g-1)*f.cols+1+((d>b?l:v)-1),E(a,c))}},4389:function(J,_,A){var m=this&&this.__assign||function(){return m=Object.assign||function(f){for(var c,a=1,l=arguments.length;a<l;a++)for(var d in c=arguments[a])Object.prototype.hasOwnProperty.call(c,d)&&(f[d]=c[d]);return f},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.Terminal=void 0;var S=A(3236),w=A(9042),y=A(7975),I=A(7090),E=A(5741),p=A(8285),v=["cols","rows"],b=function(){function f(c){var a=this;this._core=new S.Terminal(c),this._addonManager=new E.AddonManager,this._publicOptions=m({},this._core.options);var l=function(M){return a._core.options[M]},d=function(M,O){a._checkReadonlyOptions(M),a._core.options[M]=O};for(var g in this._core.options){var D={get:l.bind(this,g),set:d.bind(this,g)};Object.defineProperty(this._publicOptions,g,D)}}return f.prototype._checkReadonlyOptions=function(c){if(v.includes(c))throw new Error('Option "'+c+'" can only be set in the constructor')},f.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(f.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new y.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"unicode",{get:function(){return this._checkProposedApi(),new I.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new p.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"modes",{get:function(){var c=this._core.coreService.decPrivateModes,a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"options",{get:function(){return this._publicOptions},set:function(c){for(var a in c)this._publicOptions[a]=c[a]},enumerable:!1,configurable:!0}),f.prototype.blur=function(){this._core.blur()},f.prototype.focus=function(){this._core.focus()},f.prototype.resize=function(c,a){this._verifyIntegers(c,a),this._core.resize(c,a)},f.prototype.open=function(c){this._core.open(c)},f.prototype.attachCustomKeyEventHandler=function(c){this._core.attachCustomKeyEventHandler(c)},f.prototype.registerLinkMatcher=function(c,a,l){return this._checkProposedApi(),this._core.registerLinkMatcher(c,a,l)},f.prototype.deregisterLinkMatcher=function(c){this._checkProposedApi(),this._core.deregisterLinkMatcher(c)},f.prototype.registerLinkProvider=function(c){return this._checkProposedApi(),this._core.registerLinkProvider(c)},f.prototype.registerCharacterJoiner=function(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)},f.prototype.deregisterCharacterJoiner=function(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)},f.prototype.registerMarker=function(c){return void 0===c&&(c=0),this._checkProposedApi(),this._verifyIntegers(c),this._core.addMarker(c)},f.prototype.registerDecoration=function(c){var a,l,d;return this._checkProposedApi(),this._verifyPositiveIntegers(null!==(a=c.x)&&void 0!==a?a:0,null!==(l=c.width)&&void 0!==l?l:0,null!==(d=c.height)&&void 0!==d?d:0),this._core.registerDecoration(c)},f.prototype.addMarker=function(c){return this.registerMarker(c)},f.prototype.hasSelection=function(){return this._core.hasSelection()},f.prototype.select=function(c,a,l){this._verifyIntegers(c,a,l),this._core.select(c,a,l)},f.prototype.getSelection=function(){return this._core.getSelection()},f.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},f.prototype.clearSelection=function(){this._core.clearSelection()},f.prototype.selectAll=function(){this._core.selectAll()},f.prototype.selectLines=function(c,a){this._verifyIntegers(c,a),this._core.selectLines(c,a)},f.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},f.prototype.scrollLines=function(c){this._verifyIntegers(c),this._core.scrollLines(c)},f.prototype.scrollPages=function(c){this._verifyIntegers(c),this._core.scrollPages(c)},f.prototype.scrollToTop=function(){this._core.scrollToTop()},f.prototype.scrollToBottom=function(){this._core.scrollToBottom()},f.prototype.scrollToLine=function(c){this._verifyIntegers(c),this._core.scrollToLine(c)},f.prototype.clear=function(){this._core.clear()},f.prototype.write=function(c,a){this._core.write(c,a)},f.prototype.writeUtf8=function(c,a){this._core.write(c,a)},f.prototype.writeln=function(c,a){this._core.write(c),this._core.write("\r\n",a)},f.prototype.paste=function(c){this._core.paste(c)},f.prototype.getOption=function(c){return this._core.optionsService.getOption(c)},f.prototype.setOption=function(c,a){this._checkReadonlyOptions(c),this._core.optionsService.setOption(c,a)},f.prototype.refresh=function(c,a){this._verifyIntegers(c,a),this._core.refresh(c,a)},f.prototype.reset=function(){this._core.reset()},f.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},f.prototype.loadAddon=function(c){return this._addonManager.loadAddon(this,c)},Object.defineProperty(f,"strings",{get:function(){return w},enumerable:!1,configurable:!0}),f.prototype._verifyIntegers=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];for(var l=0,d=c;l<d.length;l++){var g=d[l];if(g===1/0||isNaN(g)||g%1!=0)throw new Error("This API only accepts integers")}},f.prototype._verifyPositiveIntegers=function(){for(var c=[],a=0;a<arguments.length;a++)c[a]=arguments[a];for(var l=0,d=c;l<d.length;l++){var g=d[l];if(g&&(g===1/0||isNaN(g)||g%1!=0||g<0))throw new Error("This API only accepts positive integers")}},f}();_.Terminal=b},1546:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BaseRenderLayer=void 0;var m=A(643),S=A(8803),w=A(1420),y=A(3734),I=A(1752),E=A(4774),p=A(9631),v=A(8978),b=function(){function f(c,a,l,d,g,D,M,O){this._container=c,this._alpha=d,this._colors=g,this._rendererId=D,this._bufferService=M,this._optionsService=O,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+a+"-layer"),this._canvas.style.zIndex=l.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return f.prototype.dispose=function(){var c;(0,p.removeElementFromParent)(this._canvas),null===(c=this._charAtlas)||void 0===c||c.dispose()},f.prototype._initCanvas=function(){this._ctx=(0,I.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},f.prototype.onOptionsChanged=function(){},f.prototype.onBlur=function(){},f.prototype.onFocus=function(){},f.prototype.onCursorMove=function(){},f.prototype.onGridChanged=function(c,a){},f.prototype.onSelectionChanged=function(c,a,l){void 0===l&&(l=!1)},f.prototype.setColors=function(c){this._refreshCharAtlas(c)},f.prototype._setTransparency=function(c){if(c!==this._alpha){var a=this._canvas;this._alpha=c,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,a),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},f.prototype._refreshCharAtlas=function(c){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,w.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,c,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},f.prototype.resize=function(c){this._scaledCellWidth=c.scaledCellWidth,this._scaledCellHeight=c.scaledCellHeight,this._scaledCharWidth=c.scaledCharWidth,this._scaledCharHeight=c.scaledCharHeight,this._scaledCharLeft=c.scaledCharLeft,this._scaledCharTop=c.scaledCharTop,this._canvas.width=c.scaledCanvasWidth,this._canvas.height=c.scaledCanvasHeight,this._canvas.style.width=c.canvasWidth+"px",this._canvas.style.height=c.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},f.prototype.clearTextureAtlas=function(){var c;null===(c=this._charAtlas)||void 0===c||c.clear()},f.prototype._fillCells=function(c,a,l,d){this._ctx.fillRect(c*this._scaledCellWidth,a*this._scaledCellHeight,l*this._scaledCellWidth,d*this._scaledCellHeight)},f.prototype._fillMiddleLineAtCells=function(c,a,l){void 0===l&&(l=1);var d=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(c*this._scaledCellWidth,(a+1)*this._scaledCellHeight-d-window.devicePixelRatio,l*this._scaledCellWidth,window.devicePixelRatio)},f.prototype._fillBottomLineAtCells=function(c,a,l){void 0===l&&(l=1),this._ctx.fillRect(c*this._scaledCellWidth,(a+1)*this._scaledCellHeight-window.devicePixelRatio-1,l*this._scaledCellWidth,window.devicePixelRatio)},f.prototype._fillLeftLineAtCell=function(c,a,l){this._ctx.fillRect(c*this._scaledCellWidth,a*this._scaledCellHeight,window.devicePixelRatio*l,this._scaledCellHeight)},f.prototype._strokeRectAtCell=function(c,a,l,d){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(c*this._scaledCellWidth+window.devicePixelRatio/2,a*this._scaledCellHeight+window.devicePixelRatio/2,l*this._scaledCellWidth-window.devicePixelRatio,d*this._scaledCellHeight-window.devicePixelRatio)},f.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},f.prototype._clearCells=function(c,a,l,d){this._alpha?this._ctx.clearRect(c*this._scaledCellWidth,a*this._scaledCellHeight,l*this._scaledCellWidth,d*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(c*this._scaledCellWidth,a*this._scaledCellHeight,l*this._scaledCellWidth,d*this._scaledCellHeight))},f.prototype._fillCharTrueColor=function(c,a,l){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=S.TEXT_BASELINE,this._clipRow(l);var d=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(d=(0,v.tryDrawCustomChar)(this._ctx,c.getChars(),a*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),d||this._ctx.fillText(c.getChars(),a*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},f.prototype._drawChars=function(c,a,l){var d,g,D,M=this._getContrastColor(c);M||c.isFgRGB()||c.isBgRGB()?this._drawUncachedChars(c,a,l,M):(c.isInverse()?(g=c.isBgDefault()?S.INVERTED_DEFAULT_COLOR:c.getBgColor(),D=c.isFgDefault()?S.INVERTED_DEFAULT_COLOR:c.getFgColor()):(D=c.isBgDefault()?m.DEFAULT_COLOR:c.getBgColor(),g=c.isFgDefault()?m.DEFAULT_COLOR:c.getFgColor()),g+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&c.isBold()&&g<8?8:0,this._currentGlyphIdentifier.chars=c.getChars()||m.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=c.getCode()||m.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=D,this._currentGlyphIdentifier.fg=g,this._currentGlyphIdentifier.bold=!!c.isBold(),this._currentGlyphIdentifier.dim=!!c.isDim(),this._currentGlyphIdentifier.italic=!!c.isItalic(),(null===(d=this._charAtlas)||void 0===d?void 0:d.draw(this._ctx,this._currentGlyphIdentifier,a*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(c,a,l))},f.prototype._drawUncachedChars=function(c,a,l,d){if(this._ctx.save(),this._ctx.font=this._getFont(!!c.isBold(),!!c.isItalic()),this._ctx.textBaseline=S.TEXT_BASELINE,c.isInverse())if(d)this._ctx.fillStyle=d.css;else if(c.isBgDefault())this._ctx.fillStyle=E.color.opaque(this._colors.background).css;else if(c.isBgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(c.getBgColor()).join(",")+")";else{var g=c.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&c.isBold()&&g<8&&(g+=8),this._ctx.fillStyle=this._colors.ansi[g].css}else if(d)this._ctx.fillStyle=d.css;else if(c.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(c.isFgRGB())this._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(c.getFgColor()).join(",")+")";else{var D=c.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&c.isBold()&&D<8&&(D+=8),this._ctx.fillStyle=this._colors.ansi[D].css}this._clipRow(l),c.isDim()&&(this._ctx.globalAlpha=S.DIM_OPACITY);var M=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(M=(0,v.tryDrawCustomChar)(this._ctx,c.getChars(),a*this._scaledCellWidth,l*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),M||this._ctx.fillText(c.getChars(),a*this._scaledCellWidth+this._scaledCharLeft,l*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},f.prototype._clipRow=function(c){this._ctx.beginPath(),this._ctx.rect(0,c*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},f.prototype._getFont=function(c,a){return(a?"italic":"")+" "+(c?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},f.prototype._getContrastColor=function(c){if(1!==this._optionsService.rawOptions.minimumContrastRatio){var a=this._colors.contrastCache.getColor(c.bg,c.fg);if(void 0!==a)return a||void 0;var l=c.getFgColor(),d=c.getFgColorMode(),g=c.getBgColor(),D=c.getBgColorMode(),M=!!c.isInverse(),O=!!c.isInverse();if(M){var R=l;l=g,g=R;var T=d;d=D,D=T}var L=this._resolveBackgroundRgba(D,g,M),B=this._resolveForegroundRgba(d,l,M,O),F=E.rgba.ensureContrastRatio(L,B,this._optionsService.rawOptions.minimumContrastRatio);if(F){var G={css:E.channels.toCss(F>>24&255,F>>16&255,F>>8&255),rgba:F};return this._colors.contrastCache.setColor(c.bg,c.fg,G),G}this._colors.contrastCache.setColor(c.bg,c.fg,null)}},f.prototype._resolveBackgroundRgba=function(c,a,l){switch(c){case 16777216:case 33554432:return this._colors.ansi[a].rgba;case 50331648:return a<<8;default:return l?this._colors.foreground.rgba:this._colors.background.rgba}},f.prototype._resolveForegroundRgba=function(c,a,l,d){switch(c){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&d&&a<8&&(a+=8),this._colors.ansi[a].rgba;case 50331648:return a<<8;default:return l?this._colors.background.rgba:this._colors.foreground.rgba}},f}();_.BaseRenderLayer=b},2512:function(J,_,A){var m,S=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var D in g)Object.prototype.hasOwnProperty.call(g,D)&&(d[D]=g[D])})(a,l)},function(a,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function d(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(d.prototype=l.prototype,new d)}),w=this&&this.__decorate||function(a,l,d,g){var D,M=arguments.length,O=M<3?l:null===g?g=Object.getOwnPropertyDescriptor(l,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(a,l,d,g);else for(var R=a.length-1;R>=0;R--)(D=a[R])&&(O=(M<3?D(O):M>3?D(l,d,O):D(l,d))||O);return M>3&&O&&Object.defineProperty(l,d,O),O},y=this&&this.__param||function(a,l){return function(d,g){l(d,g,a)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CursorRenderLayer=void 0;var I=A(1546),E=A(511),p=A(2585),v=A(4725),b=600,f=function(a){function l(d,g,D,M,O,R,T,L,B){var F=a.call(this,d,"cursor",g,!0,D,M,R,T)||this;return F._onRequestRedraw=O,F._coreService=L,F._coreBrowserService=B,F._cell=new E.CellData,F._state={x:0,y:0,isFocused:!1,style:"",width:0},F._cursorRenderers={bar:F._renderBarCursor.bind(F),block:F._renderBlockCursor.bind(F),underline:F._renderUnderlineCursor.bind(F)},F}return S(l,a),l.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),a.prototype.dispose.call(this)},l.prototype.resize=function(d){a.prototype.resize.call(this,d),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},l.prototype.reset=function(){var d;this._clearCursor(),null===(d=this._cursorBlinkStateManager)||void 0===d||d.restartBlinkAnimation(),this.onOptionsChanged()},l.prototype.onBlur=function(){var d;null===(d=this._cursorBlinkStateManager)||void 0===d||d.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onFocus=function(){var d;null===(d=this._cursorBlinkStateManager)||void 0===d||d.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onOptionsChanged=function(){var d,g=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new c(this._coreBrowserService.isFocused,function(){g._render(!0)})):(null===(d=this._cursorBlinkStateManager)||void 0===d||d.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},l.prototype.onCursorMove=function(){var d;null===(d=this._cursorBlinkStateManager)||void 0===d||d.restartBlinkAnimation()},l.prototype.onGridChanged=function(d,g){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},l.prototype._render=function(d){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var g=this._bufferService.buffer.ybase+this._bufferService.buffer.y,D=g-this._bufferService.buffer.ydisp;if(D<0||D>=this._bufferService.rows)this._clearCursor();else{var M=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(g).loadCell(M,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var O=this._optionsService.rawOptions.cursorStyle;return O&&"block"!==O?this._cursorRenderers[O](M,D,this._cell):this._renderBlurCursor(M,D,this._cell),this._ctx.restore(),this._state.x=M,this._state.y=D,this._state.isFocused=!1,this._state.style=O,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===M&&this._state.y===D&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](M,D,this._cell),this._ctx.restore(),this._state.x=M,this._state.y=D,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},l.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},l.prototype._renderBarCursor=function(d,g,D){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(d,g,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},l.prototype._renderBlockCursor=function(d,g,D){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(d,g,D.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(D,d,g),this._ctx.restore()},l.prototype._renderUnderlineCursor=function(d,g,D){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(d,g),this._ctx.restore()},l.prototype._renderBlurCursor=function(d,g,D){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(d,g,D.getWidth(),1),this._ctx.restore()},w([y(5,p.IBufferService),y(6,p.IOptionsService),y(7,p.ICoreService),y(8,v.ICoreBrowserService)],l)}(I.BaseRenderLayer);_.CursorRenderLayer=f;var c=function(){function a(l,d){this._renderCallback=d,this.isCursorVisible=!0,l&&this._restartInterval()}return Object.defineProperty(a.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),a.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},a.prototype.restartBlinkAnimation=function(){var l=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){l._renderCallback(),l._animationFrame=void 0})))},a.prototype._restartInterval=function(l){var d=this;void 0===l&&(l=b),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(d._animationTimeRestarted){var g=b-(Date.now()-d._animationTimeRestarted);if(d._animationTimeRestarted=void 0,g>0)return void d._restartInterval(g)}d.isCursorVisible=!1,d._animationFrame=window.requestAnimationFrame(function(){d._renderCallback(),d._animationFrame=void 0}),d._blinkInterval=window.setInterval(function(){if(d._animationTimeRestarted){var D=b-(Date.now()-d._animationTimeRestarted);return d._animationTimeRestarted=void 0,void d._restartInterval(D)}d.isCursorVisible=!d.isCursorVisible,d._animationFrame=window.requestAnimationFrame(function(){d._renderCallback(),d._animationFrame=void 0})},b)},l)},a.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},a.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},a}()},8978:(J,_,A)=>{var m,S,w,y,I,E,p,v,b,f,c,a,l,d,g,D,M,O,R,T,L,B,F,G,U,k,H,$,K,ne,ie,Se,_e,Ne,N,ee,z,W,V,de,he,ye,$e,Ke,$t,ue,gt,Nt,Gt,gr,ti,Rs,ni,Do,Os,ks,Ps,sn,Eo,Fs,Mo,Bs,ri,xo,To,Ao,Lo,Io,vr,mr,yr,Cr,br,ii,Sr,wr,Dr,Er,an,oi,si,ai,ci,Mr,li,ui,Ht,fi,xr,di,Qn,Ro,hi,pi,Jn,Oo,_i,gi,Tr,Ar,vi,mi,yi,Ci,Lr,bi,Si,Ir,wi,Di,Ei,er,Be,Rr,Fe,Or,ko,kr,we,Mi,Ns,ke,Pr,be,et,Po,Hs,js;Object.defineProperty(_,"__esModule",{value:!0}),_.tryDrawCustomChar=_.boxDrawingDefinitions=_.blockElementDefinitions=void 0;var Fr=A(1752);_.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258a":[{x:0,y:0,w:6,h:8}],"\u258b":[{x:0,y:0,w:5,h:8}],"\u258c":[{x:0,y:0,w:4,h:8}],"\u258d":[{x:0,y:0,w:3,h:8}],"\u258e":[{x:0,y:0,w:2,h:8}],"\u258f":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259a":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259b":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259c":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259d":[{x:4,y:0,w:4,h:4}],"\u259e":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259f":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1fb70}":[{x:1,y:0,w:1,h:8}],"\u{1fb71}":[{x:2,y:0,w:1,h:8}],"\u{1fb72}":[{x:3,y:0,w:1,h:8}],"\u{1fb73}":[{x:4,y:0,w:1,h:8}],"\u{1fb74}":[{x:5,y:0,w:1,h:8}],"\u{1fb75}":[{x:6,y:0,w:1,h:8}],"\u{1fb76}":[{x:0,y:1,w:8,h:1}],"\u{1fb77}":[{x:0,y:2,w:8,h:1}],"\u{1fb78}":[{x:0,y:3,w:8,h:1}],"\u{1fb79}":[{x:0,y:4,w:8,h:1}],"\u{1fb7a}":[{x:0,y:5,w:8,h:1}],"\u{1fb7b}":[{x:0,y:6,w:8,h:1}],"\u{1fb7c}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb7d}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7e}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1fb7f}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1fb80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1fb82}":[{x:0,y:0,w:8,h:2}],"\u{1fb83}":[{x:0,y:0,w:8,h:3}],"\u{1fb84}":[{x:0,y:0,w:8,h:5}],"\u{1fb85}":[{x:0,y:0,w:8,h:6}],"\u{1fb86}":[{x:0,y:0,w:8,h:7}],"\u{1fb87}":[{x:6,y:0,w:2,h:8}],"\u{1fb88}":[{x:5,y:0,w:3,h:8}],"\u{1fb89}":[{x:3,y:0,w:5,h:8}],"\u{1fb8a}":[{x:2,y:0,w:6,h:8}],"\u{1fb8b}":[{x:1,y:0,w:7,h:8}],"\u{1fb95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1fb96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1fb97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var wt={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};_.boxDrawingDefinitions={"\u2500":(m={},m[1]="M0,.5 L1,.5",m),"\u2501":(S={},S[3]="M0,.5 L1,.5",S),"\u2502":(w={},w[1]="M.5,0 L.5,1",w),"\u2503":(y={},y[3]="M.5,0 L.5,1",y),"\u250c":(I={},I[1]="M0.5,1 L.5,.5 L1,.5",I),"\u250f":(E={},E[3]="M0.5,1 L.5,.5 L1,.5",E),"\u2510":(p={},p[1]="M0,.5 L.5,.5 L.5,1",p),"\u2513":(v={},v[3]="M0,.5 L.5,.5 L.5,1",v),"\u2514":(b={},b[1]="M.5,0 L.5,.5 L1,.5",b),"\u2517":(f={},f[3]="M.5,0 L.5,.5 L1,.5",f),"\u2518":(c={},c[1]="M.5,0 L.5,.5 L0,.5",c),"\u251b":(a={},a[3]="M.5,0 L.5,.5 L0,.5",a),"\u251c":(l={},l[1]="M.5,0 L.5,1 M.5,.5 L1,.5",l),"\u2523":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L1,.5",d),"\u2524":(g={},g[1]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"\u252b":(D={},D[3]="M.5,0 L.5,1 M.5,.5 L0,.5",D),"\u252c":(M={},M[1]="M0,.5 L1,.5 M.5,.5 L.5,1",M),"\u2533":(O={},O[3]="M0,.5 L1,.5 M.5,.5 L.5,1",O),"\u2534":(R={},R[1]="M0,.5 L1,.5 M.5,.5 L.5,0",R),"\u253b":(T={},T[3]="M0,.5 L1,.5 M.5,.5 L.5,0",T),"\u253c":(L={},L[1]="M0,.5 L1,.5 M.5,0 L.5,1",L),"\u254b":(B={},B[3]="M0,.5 L1,.5 M.5,0 L.5,1",B),"\u2574":(F={},F[1]="M.5,.5 L0,.5",F),"\u2578":(G={},G[3]="M.5,.5 L0,.5",G),"\u2575":(U={},U[1]="M.5,.5 L.5,0",U),"\u2579":(k={},k[3]="M.5,.5 L.5,0",k),"\u2576":(H={},H[1]="M.5,.5 L1,.5",H),"\u257a":($={},$[3]="M.5,.5 L1,.5",$),"\u2577":(K={},K[1]="M.5,.5 L.5,1",K),"\u257b":(ne={},ne[3]="M.5,.5 L.5,1",ne),"\u2550":(ie={},ie[1]=function(X,Z){return"M0,"+(.5-Z)+" L1,"+(.5-Z)+" M0,"+(.5+Z)+" L1,"+(.5+Z)},ie),"\u2551":(Se={},Se[1]=function(X,Z){return"M"+(.5-X)+",0 L"+(.5-X)+",1 M"+(.5+X)+",0 L"+(.5+X)+",1"},Se),"\u2552":(_e={},_e[1]=function(X,Z){return"M.5,1 L.5,"+(.5-Z)+" L1,"+(.5-Z)+" M.5,"+(.5+Z)+" L1,"+(.5+Z)},_e),"\u2553":(Ne={},Ne[1]=function(X,Z){return"M"+(.5-X)+",1 L"+(.5-X)+",.5 L1,.5 M"+(.5+X)+",.5 L"+(.5+X)+",1"},Ne),"\u2554":(N={},N[1]=function(X,Z){return"M1,"+(.5-Z)+" L"+(.5-X)+","+(.5-Z)+" L"+(.5-X)+",1 M1,"+(.5+Z)+" L"+(.5+X)+","+(.5+Z)+" L"+(.5+X)+",1"},N),"\u2555":(ee={},ee[1]=function(X,Z){return"M0,"+(.5-Z)+" L.5,"+(.5-Z)+" L.5,1 M0,"+(.5+Z)+" L.5,"+(.5+Z)},ee),"\u2556":(z={},z[1]=function(X,Z){return"M"+(.5+X)+",1 L"+(.5+X)+",.5 L0,.5 M"+(.5-X)+",.5 L"+(.5-X)+",1"},z),"\u2557":(W={},W[1]=function(X,Z){return"M0,"+(.5+Z)+" L"+(.5-X)+","+(.5+Z)+" L"+(.5-X)+",1 M0,"+(.5-Z)+" L"+(.5+X)+","+(.5-Z)+" L"+(.5+X)+",1"},W),"\u2558":(V={},V[1]=function(X,Z){return"M.5,0 L.5,"+(.5+Z)+" L1,"+(.5+Z)+" M.5,"+(.5-Z)+" L1,"+(.5-Z)},V),"\u2559":(de={},de[1]=function(X,Z){return"M1,.5 L"+(.5-X)+",.5 L"+(.5-X)+",0 M"+(.5+X)+",.5 L"+(.5+X)+",0"},de),"\u255a":(he={},he[1]=function(X,Z){return"M1,"+(.5-Z)+" L"+(.5+X)+","+(.5-Z)+" L"+(.5+X)+",0 M1,"+(.5+Z)+" L"+(.5-X)+","+(.5+Z)+" L"+(.5-X)+",0"},he),"\u255b":(ye={},ye[1]=function(X,Z){return"M0,"+(.5+Z)+" L.5,"+(.5+Z)+" L.5,0 M0,"+(.5-Z)+" L.5,"+(.5-Z)},ye),"\u255c":($e={},$e[1]=function(X,Z){return"M0,.5 L"+(.5+X)+",.5 L"+(.5+X)+",0 M"+(.5-X)+",.5 L"+(.5-X)+",0"},$e),"\u255d":(Ke={},Ke[1]=function(X,Z){return"M0,"+(.5-Z)+" L"+(.5-X)+","+(.5-Z)+" L"+(.5-X)+",0 M0,"+(.5+Z)+" L"+(.5+X)+","+(.5+Z)+" L"+(.5+X)+",0"},Ke),"\u255e":($t={},$t[1]=function(X,Z){return"M.5,0 L.5,1 M.5,"+(.5-Z)+" L1,"+(.5-Z)+" M.5,"+(.5+Z)+" L1,"+(.5+Z)},$t),"\u255f":(ue={},ue[1]=function(X,Z){return"M"+(.5-X)+",0 L"+(.5-X)+",1 M"+(.5+X)+",0 L"+(.5+X)+",1 M"+(.5+X)+",.5 L1,.5"},ue),"\u2560":(gt={},gt[1]=function(X,Z){return"M"+(.5-X)+",0 L"+(.5-X)+",1 M1,"+(.5+Z)+" L"+(.5+X)+","+(.5+Z)+" L"+(.5+X)+",1 M1,"+(.5-Z)+" L"+(.5+X)+","+(.5-Z)+" L"+(.5+X)+",0"},gt),"\u2561":(Nt={},Nt[1]=function(X,Z){return"M.5,0 L.5,1 M0,"+(.5-Z)+" L.5,"+(.5-Z)+" M0,"+(.5+Z)+" L.5,"+(.5+Z)},Nt),"\u2562":(Gt={},Gt[1]=function(X,Z){return"M0,.5 L"+(.5-X)+",.5 M"+(.5-X)+",0 L"+(.5-X)+",1 M"+(.5+X)+",0 L"+(.5+X)+",1"},Gt),"\u2563":(gr={},gr[1]=function(X,Z){return"M"+(.5+X)+",0 L"+(.5+X)+",1 M0,"+(.5+Z)+" L"+(.5-X)+","+(.5+Z)+" L"+(.5-X)+",1 M0,"+(.5-Z)+" L"+(.5-X)+","+(.5-Z)+" L"+(.5-X)+",0"},gr),"\u2564":(ti={},ti[1]=function(X,Z){return"M0,"+(.5-Z)+" L1,"+(.5-Z)+" M0,"+(.5+Z)+" L1,"+(.5+Z)+" M.5,"+(.5+Z)+" L.5,1"},ti),"\u2565":(Rs={},Rs[1]=function(X,Z){return"M0,.5 L1,.5 M"+(.5-X)+",.5 L"+(.5-X)+",1 M"+(.5+X)+",.5 L"+(.5+X)+",1"},Rs),"\u2566":(ni={},ni[1]=function(X,Z){return"M0,"+(.5-Z)+" L1,"+(.5-Z)+" M0,"+(.5+Z)+" L"+(.5-X)+","+(.5+Z)+" L"+(.5-X)+",1 M1,"+(.5+Z)+" L"+(.5+X)+","+(.5+Z)+" L"+(.5+X)+",1"},ni),"\u2567":(Do={},Do[1]=function(X,Z){return"M.5,0 L.5,"+(.5-Z)+" M0,"+(.5-Z)+" L1,"+(.5-Z)+" M0,"+(.5+Z)+" L1,"+(.5+Z)},Do),"\u2568":(Os={},Os[1]=function(X,Z){return"M0,.5 L1,.5 M"+(.5-X)+",.5 L"+(.5-X)+",0 M"+(.5+X)+",.5 L"+(.5+X)+",0"},Os),"\u2569":(ks={},ks[1]=function(X,Z){return"M0,"+(.5+Z)+" L1,"+(.5+Z)+" M0,"+(.5-Z)+" L"+(.5-X)+","+(.5-Z)+" L"+(.5-X)+",0 M1,"+(.5-Z)+" L"+(.5+X)+","+(.5-Z)+" L"+(.5+X)+",0"},ks),"\u256a":(Ps={},Ps[1]=function(X,Z){return"M.5,0 L.5,1 M0,"+(.5-Z)+" L1,"+(.5-Z)+" M0,"+(.5+Z)+" L1,"+(.5+Z)},Ps),"\u256b":(sn={},sn[1]=function(X,Z){return"M0,.5 L1,.5 M"+(.5-X)+",0 L"+(.5-X)+",1 M"+(.5+X)+",0 L"+(.5+X)+",1"},sn),"\u256c":(Eo={},Eo[1]=function(X,Z){return"M0,"+(.5+Z)+" L"+(.5-X)+","+(.5+Z)+" L"+(.5-X)+",1 M1,"+(.5+Z)+" L"+(.5+X)+","+(.5+Z)+" L"+(.5+X)+",1 M0,"+(.5-Z)+" L"+(.5-X)+","+(.5-Z)+" L"+(.5-X)+",0 M1,"+(.5-Z)+" L"+(.5+X)+","+(.5-Z)+" L"+(.5+X)+",0"},Eo),"\u2571":(Fs={},Fs[1]="M1,0 L0,1",Fs),"\u2572":(Mo={},Mo[1]="M0,0 L1,1",Mo),"\u2573":(Bs={},Bs[1]="M1,0 L0,1 M0,0 L1,1",Bs),"\u257c":(ri={},ri[1]="M.5,.5 L0,.5",ri[3]="M.5,.5 L1,.5",ri),"\u257d":(xo={},xo[1]="M.5,.5 L.5,0",xo[3]="M.5,.5 L.5,1",xo),"\u257e":(To={},To[1]="M.5,.5 L1,.5",To[3]="M.5,.5 L0,.5",To),"\u257f":(Ao={},Ao[1]="M.5,.5 L.5,1",Ao[3]="M.5,.5 L.5,0",Ao),"\u250d":(Lo={},Lo[1]="M.5,.5 L.5,1",Lo[3]="M.5,.5 L1,.5",Lo),"\u250e":(Io={},Io[1]="M.5,.5 L1,.5",Io[3]="M.5,.5 L.5,1",Io),"\u2511":(vr={},vr[1]="M.5,.5 L.5,1",vr[3]="M.5,.5 L0,.5",vr),"\u2512":(mr={},mr[1]="M.5,.5 L0,.5",mr[3]="M.5,.5 L.5,1",mr),"\u2515":(yr={},yr[1]="M.5,.5 L.5,0",yr[3]="M.5,.5 L1,.5",yr),"\u2516":(Cr={},Cr[1]="M.5,.5 L1,.5",Cr[3]="M.5,.5 L.5,0",Cr),"\u2519":(br={},br[1]="M.5,.5 L.5,0",br[3]="M.5,.5 L0,.5",br),"\u251a":(ii={},ii[1]="M.5,.5 L0,.5",ii[3]="M.5,.5 L.5,0",ii),"\u251d":(Sr={},Sr[1]="M.5,0 L.5,1",Sr[3]="M.5,.5 L1,.5",Sr),"\u251e":(wr={},wr[1]="M0.5,1 L.5,.5 L1,.5",wr[3]="M.5,.5 L.5,0",wr),"\u251f":(Dr={},Dr[1]="M.5,0 L.5,.5 L1,.5",Dr[3]="M.5,.5 L.5,1",Dr),"\u2520":(Er={},Er[1]="M.5,.5 L1,.5",Er[3]="M.5,0 L.5,1",Er),"\u2521":(an={},an[1]="M.5,.5 L.5,1",an[3]="M.5,0 L.5,.5 L1,.5",an),"\u2522":(oi={},oi[1]="M.5,.5 L.5,0",oi[3]="M0.5,1 L.5,.5 L1,.5",oi),"\u2525":(si={},si[1]="M.5,0 L.5,1",si[3]="M.5,.5 L0,.5",si),"\u2526":(ai={},ai[1]="M0,.5 L.5,.5 L.5,1",ai[3]="M.5,.5 L.5,0",ai),"\u2527":(ci={},ci[1]="M.5,0 L.5,.5 L0,.5",ci[3]="M.5,.5 L.5,1",ci),"\u2528":(Mr={},Mr[1]="M.5,.5 L0,.5",Mr[3]="M.5,0 L.5,1",Mr),"\u2529":(li={},li[1]="M.5,.5 L.5,1",li[3]="M.5,0 L.5,.5 L0,.5",li),"\u252a":(ui={},ui[1]="M.5,.5 L.5,0",ui[3]="M0,.5 L.5,.5 L.5,1",ui),"\u252d":(Ht={},Ht[1]="M0.5,1 L.5,.5 L1,.5",Ht[3]="M.5,.5 L0,.5",Ht),"\u252e":(fi={},fi[1]="M0,.5 L.5,.5 L.5,1",fi[3]="M.5,.5 L1,.5",fi),"\u252f":(xr={},xr[1]="M.5,.5 L.5,1",xr[3]="M0,.5 L1,.5",xr),"\u2530":(di={},di[1]="M0,.5 L1,.5",di[3]="M.5,.5 L.5,1",di),"\u2531":(Qn={},Qn[1]="M.5,.5 L1,.5",Qn[3]="M0,.5 L.5,.5 L.5,1",Qn),"\u2532":(Ro={},Ro[1]="M.5,.5 L0,.5",Ro[3]="M0.5,1 L.5,.5 L1,.5",Ro),"\u2535":(hi={},hi[1]="M.5,0 L.5,.5 L1,.5",hi[3]="M.5,.5 L0,.5",hi),"\u2536":(pi={},pi[1]="M.5,0 L.5,.5 L0,.5",pi[3]="M.5,.5 L1,.5",pi),"\u2537":(Jn={},Jn[1]="M.5,.5 L.5,0",Jn[3]="M0,.5 L1,.5",Jn),"\u2538":(Oo={},Oo[1]="M0,.5 L1,.5",Oo[3]="M.5,.5 L.5,0",Oo),"\u2539":(_i={},_i[1]="M.5,.5 L1,.5",_i[3]="M.5,0 L.5,.5 L0,.5",_i),"\u253a":(gi={},gi[1]="M.5,.5 L0,.5",gi[3]="M.5,0 L.5,.5 L1,.5",gi),"\u253d":(Tr={},Tr[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Tr[3]="M.5,.5 L0,.5",Tr),"\u253e":(Ar={},Ar[1]="M.5,0 L.5,1 M.5,.5 L0,.5",Ar[3]="M.5,.5 L1,.5",Ar),"\u253f":(vi={},vi[1]="M.5,0 L.5,1",vi[3]="M0,.5 L1,.5",vi),"\u2540":(mi={},mi[1]="M0,.5 L1,.5 M.5,.5 L.5,1",mi[3]="M.5,.5 L.5,0",mi),"\u2541":(yi={},yi[1]="M.5,.5 L.5,0 M0,.5 L1,.5",yi[3]="M.5,.5 L.5,1",yi),"\u2542":(Ci={},Ci[1]="M0,.5 L1,.5",Ci[3]="M.5,0 L.5,1",Ci),"\u2543":(Lr={},Lr[1]="M0.5,1 L.5,.5 L1,.5",Lr[3]="M.5,0 L.5,.5 L0,.5",Lr),"\u2544":(bi={},bi[1]="M0,.5 L.5,.5 L.5,1",bi[3]="M.5,0 L.5,.5 L1,.5",bi),"\u2545":(Si={},Si[1]="M.5,0 L.5,.5 L1,.5",Si[3]="M0,.5 L.5,.5 L.5,1",Si),"\u2546":(Ir={},Ir[1]="M.5,0 L.5,.5 L0,.5",Ir[3]="M0.5,1 L.5,.5 L1,.5",Ir),"\u2547":(wi={},wi[1]="M.5,.5 L.5,1",wi[3]="M.5,.5 L.5,0 M0,.5 L1,.5",wi),"\u2548":(Di={},Di[1]="M.5,.5 L.5,0",Di[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Di),"\u2549":(Ei={},Ei[1]="M.5,.5 L1,.5",Ei[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Ei),"\u254a":(er={},er[1]="M.5,.5 L0,.5",er[3]="M.5,0 L.5,1 M.5,.5 L1,.5",er),"\u254c":(Be={},Be[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Be),"\u254d":(Rr={},Rr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",Rr),"\u2504":(Fe={},Fe[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Fe),"\u2505":(Or={},Or[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",Or),"\u2508":(ko={},ko[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ko),"\u2509":(kr={},kr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",kr),"\u254e":(we={},we[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",we),"\u254f":(Mi={},Mi[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",Mi),"\u2506":(Ns={},Ns[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",Ns),"\u2507":(ke={},ke[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ke),"\u250a":(Pr={},Pr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Pr),"\u250b":(be={},be[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",be),"\u256d":(et={},et[1]="C.5,1,.5,.5,1,.5",et),"\u256e":(Po={},Po[1]="C.5,1,.5,.5,0,.5",Po),"\u256f":(Hs={},Hs[1]="C.5,0,.5,.5,0,.5",Hs),"\u2570":(js={},js[1]="C.5,0,.5,.5,1,.5",js)},_.tryDrawCustomChar=function(X,Z,ln,xi,Br,ct){var Kt=_.blockElementDefinitions[Z];if(Kt)return function(xe,fn,Ti,Ai,He,Nr){for(var tt=0;tt<fn.length;tt++){var vt=fn[tt],Ye=He/8,dn=Nr/8;xe.fillRect(Ti+vt.x*Ye,Ai+vt.y*dn,vt.w*Ye,vt.h*dn)}}(X,Kt,ln,xi,Br,ct),!0;var un=wt[Z];if(un)return function(xe,fn,Ti,Ai,He,Nr){var tt,vt=lc.get(fn);vt||lc.set(fn,vt=new Map);var Ye=xe.fillStyle;if("string"!=typeof Ye)throw new Error('Unexpected fillStyle type "'+Ye+'"');var dn=vt.get(Ye);if(!dn){var jt=fn[0].length,En=fn.length,Yt=document.createElement("canvas");Yt.width=jt,Yt.height=En;var tr=(0,Fr.throwIfFalsy)(Yt.getContext("2d")),hn=new ImageData(jt,En),nr=void 0,ve=void 0,Hr=void 0,Fo=void 0;if(Ye.startsWith("#"))nr=parseInt(Ye.substr(1,2),16),ve=parseInt(Ye.substr(3,2),16),Hr=parseInt(Ye.substr(5,2),16),Fo=Ye.length>7&&parseInt(Ye.substr(7,2),16)||1;else{if(!Ye.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+Ye+'" when drawing pattern glyph');nr=(tt=Ye.substring(5,Ye.length-1).split(",").map(function(_f){return parseFloat(_f)}))[0],ve=tt[1],Hr=tt[2],Fo=tt[3]}for(var mt=0;mt<En;mt++)for(var Mn=0;Mn<jt;Mn++)hn.data[4*(mt*jt+Mn)]=nr,hn.data[4*(mt*jt+Mn)+1]=ve,hn.data[4*(mt*jt+Mn)+2]=Hr,hn.data[4*(mt*jt+Mn)+3]=fn[mt][Mn]*(255*Fo);tr.putImageData(hn,0,0),dn=(0,Fr.throwIfFalsy)(xe.createPattern(Yt,null)),vt.set(Ye,dn)}xe.fillStyle=dn,xe.fillRect(Ti,Ai,He,Nr)}(X,un,ln,xi,Br,ct),!0;var lt=_.boxDrawingDefinitions[Z];return!!lt&&(function(xe,fn,Ti,Ai,He,Nr){xe.strokeStyle=xe.fillStyle;for(var tt=0,vt=Object.entries(fn);tt<vt.length;tt++){var Ye=vt[tt],dn=Ye[0],jt=Ye[1];xe.beginPath(),xe.lineWidth=window.devicePixelRatio*Number.parseInt(dn);for(var En=0,Yt=("function"==typeof jt?jt(.15,.15/Nr*He):jt).split(" ");En<Yt.length;En++){var tr=Yt[En],hn=tr[0],nr=pf[hn];if(nr){var ve=tr.substring(1).split(",");ve[0]&&ve[1]&&nr(xe,cn(ve,He,Nr,Ti,Ai))}else console.error('Could not find drawing instructions for "'+hn+'"')}xe.stroke(),xe.closePath()}}(X,lt,ln,xi,Br,ct),!0)};var lc=new Map;function Vs(X,Z,ln){return void 0===ln&&(ln=0),Math.max(Math.min(X,Z),ln)}var pf={C:function(X,Z){return X.bezierCurveTo(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5])},L:function(X,Z){return X.lineTo(Z[0],Z[1])},M:function(X,Z){return X.moveTo(Z[0],Z[1])}};function cn(X,Z,ln,xi,Br){var ct=X.map(function(lt){return parseFloat(lt)||parseInt(lt)});if(ct.length<2)throw new Error("Too few arguments for instruction");for(var Kt=0;Kt<ct.length;Kt+=2)ct[Kt]*=Z,0!==ct[Kt]&&(ct[Kt]=Vs(Math.round(ct[Kt]+.5)-.5,Z,0)),ct[Kt]+=xi;for(var un=1;un<ct.length;un+=2)ct[un]*=ln,0!==ct[un]&&(ct[un]=Vs(Math.round(ct[un]+.5)-.5,ln,0)),ct[un]+=Br;return ct}},3700:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.GridCache=void 0;var A=function(){function m(){this.cache=[]}return m.prototype.resize=function(S,w){for(var y=0;y<S;y++){this.cache.length<=y&&this.cache.push([]);for(var I=this.cache[y].length;I<w;I++)this.cache[y].push(void 0);this.cache[y].length=w}this.cache.length=S},m.prototype.clear=function(){for(var S=0;S<this.cache.length;S++)for(var w=0;w<this.cache[S].length;w++)this.cache[S][w]=void 0},m}();_.GridCache=A},5098:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.LinkRenderLayer=void 0;var I=A(1546),E=A(8803),p=A(2040),v=A(2585),b=function(f){function c(a,l,d,g,D,M,O,R){var T=f.call(this,a,"link",l,!0,d,g,O,R)||this;return D.onShowLinkUnderline(function(L){return T._onShowLinkUnderline(L)}),D.onHideLinkUnderline(function(L){return T._onHideLinkUnderline(L)}),M.onShowLinkUnderline(function(L){return T._onShowLinkUnderline(L)}),M.onHideLinkUnderline(function(L){return T._onHideLinkUnderline(L)}),T}return S(c,f),c.prototype.resize=function(a){f.prototype.resize.call(this,a),this._state=void 0},c.prototype.reset=function(){this._clearCurrentLink()},c.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var a=this._state.y2-this._state.y1-1;a>0&&this._clearCells(0,this._state.y1+1,this._state.cols,a),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},c.prototype._onShowLinkUnderline=function(a){if(this._ctx.fillStyle=a.fg===E.INVERTED_DEFAULT_COLOR?this._colors.background.css:a.fg&&(0,p.is256Color)(a.fg)?this._colors.ansi[a.fg].css:this._colors.foreground.css,a.y1===a.y2)this._fillBottomLineAtCells(a.x1,a.y1,a.x2-a.x1);else{this._fillBottomLineAtCells(a.x1,a.y1,a.cols-a.x1);for(var l=a.y1+1;l<a.y2;l++)this._fillBottomLineAtCells(0,l,a.cols);this._fillBottomLineAtCells(0,a.y2,a.x2)}this._state=a},c.prototype._onHideLinkUnderline=function(a){this._clearCurrentLink()},w([y(6,v.IBufferService),y(7,v.IOptionsService)],c)}(I.BaseRenderLayer);_.LinkRenderLayer=b},3525:function(J,_,A){var m,S=this&&this.__extends||(m=function(D,M){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,R){O.__proto__=R}||function(O,R){for(var T in R)Object.prototype.hasOwnProperty.call(R,T)&&(O[T]=R[T])})(D,M)},function(D,M){if("function"!=typeof M&&null!==M)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function O(){this.constructor=D}m(D,M),D.prototype=null===M?Object.create(M):(O.prototype=M.prototype,new O)}),w=this&&this.__decorate||function(D,M,O,R){var T,L=arguments.length,B=L<3?M:null===R?R=Object.getOwnPropertyDescriptor(M,O):R;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(D,M,O,R);else for(var F=D.length-1;F>=0;F--)(T=D[F])&&(B=(L<3?T(B):L>3?T(M,O,B):T(M,O))||B);return L>3&&B&&Object.defineProperty(M,O,B),B},y=this&&this.__param||function(D,M){return function(O,R){M(O,R,D)}};Object.defineProperty(_,"__esModule",{value:!0}),_.Renderer=void 0;var I=A(9596),E=A(4149),p=A(2512),v=A(5098),b=A(844),f=A(4725),c=A(2585),a=A(1420),l=A(8460),d=1,g=function(D){function M(O,R,T,L,B,F,G,U){var k=D.call(this)||this;return k._colors=O,k._screenElement=R,k._bufferService=F,k._charSizeService=G,k._optionsService=U,k._id=d++,k._onRequestRedraw=new l.EventEmitter,k._renderLayers=[B.createInstance(I.TextRenderLayer,k._screenElement,0,k._colors,k._optionsService.rawOptions.allowTransparency,k._id),B.createInstance(E.SelectionRenderLayer,k._screenElement,1,k._colors,k._id),B.createInstance(v.LinkRenderLayer,k._screenElement,2,k._colors,k._id,T,L),B.createInstance(p.CursorRenderLayer,k._screenElement,3,k._colors,k._id,k._onRequestRedraw)],k.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},k._devicePixelRatio=window.devicePixelRatio,k._updateDimensions(),k.onOptionsChanged(),k}return S(M,D),Object.defineProperty(M.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){for(var O=0,R=this._renderLayers;O<R.length;O++)R[O].dispose();D.prototype.dispose.call(this),(0,a.removeTerminalFromCache)(this._id)},M.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},M.prototype.setColors=function(O){this._colors=O;for(var R=0,T=this._renderLayers;R<T.length;R++){var L=T[R];L.setColors(this._colors),L.reset()}},M.prototype.onResize=function(O,R){this._updateDimensions();for(var T=0,L=this._renderLayers;T<L.length;T++)L[T].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},M.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},M.prototype.onBlur=function(){this._runOperation(function(O){return O.onBlur()})},M.prototype.onFocus=function(){this._runOperation(function(O){return O.onFocus()})},M.prototype.onSelectionChanged=function(O,R,T){void 0===T&&(T=!1),this._runOperation(function(L){return L.onSelectionChanged(O,R,T)})},M.prototype.onCursorMove=function(){this._runOperation(function(O){return O.onCursorMove()})},M.prototype.onOptionsChanged=function(){this._runOperation(function(O){return O.onOptionsChanged()})},M.prototype.clear=function(){this._runOperation(function(O){return O.reset()})},M.prototype._runOperation=function(O){for(var R=0,T=this._renderLayers;R<T.length;R++)O(T[R])},M.prototype.renderRows=function(O,R){for(var T=0,L=this._renderLayers;T<L.length;T++)L[T].onGridChanged(O,R)},M.prototype.clearTextureAtlas=function(){for(var O=0,R=this._renderLayers;O<R.length;O++)R[O].clearTextureAtlas()},M.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},w([y(4,c.IInstantiationService),y(5,c.IBufferService),y(6,f.ICharSizeService),y(7,c.IOptionsService)],M)}(b.Disposable);_.Renderer=g},1752:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.throwIfFalsy=void 0,_.throwIfFalsy=function(A){if(!A)throw new Error("value must not be falsy");return A}},4149:function(J,_,A){var m,S=this&&this.__extends||(m=function(v,b){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(f[a]=c[a])})(v,b)},function(v,b){if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function f(){this.constructor=v}m(v,b),v.prototype=null===b?Object.create(b):(f.prototype=b.prototype,new f)}),w=this&&this.__decorate||function(v,b,f,c){var a,l=arguments.length,d=l<3?b:null===c?c=Object.getOwnPropertyDescriptor(b,f):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(v,b,f,c);else for(var g=v.length-1;g>=0;g--)(a=v[g])&&(d=(l<3?a(d):l>3?a(b,f,d):a(b,f))||d);return l>3&&d&&Object.defineProperty(b,f,d),d},y=this&&this.__param||function(v,b){return function(f,c){b(f,c,v)}};Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionRenderLayer=void 0;var I=A(1546),E=A(2585),p=function(v){function b(f,c,a,l,d,g){var D=v.call(this,f,"selection",c,!0,a,l,d,g)||this;return D._clearState(),D}return S(b,v),b.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},b.prototype.resize=function(f){v.prototype.resize.call(this,f),this._clearState()},b.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},b.prototype.onSelectionChanged=function(f,c,a){if(this._didStateChange(f,c,a,this._bufferService.buffer.ydisp))if(this._clearAll(),f&&c){var l=f[1]-this._bufferService.buffer.ydisp,d=c[1]-this._bufferService.buffer.ydisp,g=Math.max(l,0),D=Math.min(d,this._bufferService.rows-1);if(g>=this._bufferService.rows||D<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,a){var M=f[0];this._fillCells(M,g,c[0]-M,D-g+1)}else{this._fillCells(M=l===g?f[0]:0,g,(g===d?c[0]:this._bufferService.cols)-M,1);var L=Math.max(D-g-1,0);this._fillCells(0,g+1,this._bufferService.cols,L),g!==D&&this._fillCells(0,D,d===D?c[0]:this._bufferService.cols,1)}this._state.start=[f[0],f[1]],this._state.end=[c[0],c[1]],this._state.columnSelectMode=a,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},b.prototype._didStateChange=function(f,c,a,l){return!this._areCoordinatesEqual(f,this._state.start)||!this._areCoordinatesEqual(c,this._state.end)||a!==this._state.columnSelectMode||l!==this._state.ydisp},b.prototype._areCoordinatesEqual=function(f,c){return!(!f||!c)&&f[0]===c[0]&&f[1]===c[1]},w([y(4,E.IBufferService),y(5,E.IOptionsService)],b)}(I.BaseRenderLayer);_.SelectionRenderLayer=p},9596:function(J,_,A){var m,S=this&&this.__extends||(m=function(d,g){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,M){D.__proto__=M}||function(D,M){for(var O in M)Object.prototype.hasOwnProperty.call(M,O)&&(D[O]=M[O])})(d,g)},function(d,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function D(){this.constructor=d}m(d,g),d.prototype=null===g?Object.create(g):(D.prototype=g.prototype,new D)}),w=this&&this.__decorate||function(d,g,D,M){var O,R=arguments.length,T=R<3?g:null===M?M=Object.getOwnPropertyDescriptor(g,D):M;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)T=Reflect.decorate(d,g,D,M);else for(var L=d.length-1;L>=0;L--)(O=d[L])&&(T=(R<3?O(T):R>3?O(g,D,T):O(g,D))||T);return R>3&&T&&Object.defineProperty(g,D,T),T},y=this&&this.__param||function(d,g){return function(D,M){g(D,M,d)}};Object.defineProperty(_,"__esModule",{value:!0}),_.TextRenderLayer=void 0;var I=A(3700),E=A(1546),p=A(3734),v=A(643),b=A(511),f=A(2585),c=A(4725),a=A(4269),l=function(d){function g(D,M,O,R,T,L,B,F){var G=d.call(this,D,"text",M,R,O,T,L,B)||this;return G._characterJoinerService=F,G._characterWidth=0,G._characterFont="",G._characterOverlapCache={},G._workCell=new b.CellData,G._state=new I.GridCache,G}return S(g,d),g.prototype.resize=function(D){d.prototype.resize.call(this,D);var M=this._getFont(!1,!1);this._characterWidth===D.scaledCharWidth&&this._characterFont===M||(this._characterWidth=D.scaledCharWidth,this._characterFont=M,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},g.prototype.reset=function(){this._state.clear(),this._clearAll()},g.prototype._forEachCell=function(D,M,O){for(var R=D;R<=M;R++)for(var T=R+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.lines.get(T),B=this._characterJoinerService.getJoinedCharacters(T),F=0;F<this._bufferService.cols;F++){L.loadCell(F,this._workCell);var G=this._workCell,U=!1,k=F;if(0!==G.getWidth()){if(B.length>0&&F===B[0][0]){U=!0;var H=B.shift();G=new a.JoinedCellData(this._workCell,L.translateToString(!0,H[0],H[1]),H[1]-H[0]),k=H[1]-1}!U&&this._isOverlapping(G)&&k<L.length-1&&L.getCodePoint(k+1)===v.NULL_CELL_CODE&&(G.content&=-12582913,G.content|=2<<22),O(G,F,R),F=k}}},g.prototype._drawBackground=function(D,M){var O=this,R=this._ctx,T=this._bufferService.cols,L=0,B=0,F=null;R.save(),this._forEachCell(D,M,function(G,U,k){var H=null;G.isInverse()?H=G.isFgDefault()?O._colors.foreground.css:G.isFgRGB()?"rgb("+p.AttributeData.toColorRGB(G.getFgColor()).join(",")+")":O._colors.ansi[G.getFgColor()].css:G.isBgRGB()?H="rgb("+p.AttributeData.toColorRGB(G.getBgColor()).join(",")+")":G.isBgPalette()&&(H=O._colors.ansi[G.getBgColor()].css),null===F&&(L=U,B=k),k!==B?(R.fillStyle=F||"",O._fillCells(L,B,T-L,1),L=U,B=k):F!==H&&(R.fillStyle=F||"",O._fillCells(L,B,U-L,1),L=U,B=k),F=H}),null!==F&&(R.fillStyle=F,this._fillCells(L,B,T-L,1)),R.restore()},g.prototype._drawForeground=function(D,M){var O=this;this._forEachCell(D,M,function(R,T,L){if(!R.isInvisible()&&(O._drawChars(R,T,L),R.isUnderline()||R.isStrikethrough())){if(O._ctx.save(),R.isInverse())if(R.isBgDefault())O._ctx.fillStyle=O._colors.background.css;else if(R.isBgRGB())O._ctx.fillStyle="rgb("+p.AttributeData.toColorRGB(R.getBgColor()).join(",")+")";else{var B=R.getBgColor();O._optionsService.rawOptions.drawBoldTextInBrightColors&&R.isBold()&&B<8&&(B+=8),O._ctx.fillStyle=O._colors.ansi[B].css}else if(R.isFgDefault())O._ctx.fillStyle=O._colors.foreground.css;else if(R.isFgRGB())O._ctx.fillStyle="rgb("+p.AttributeData.toColorRGB(R.getFgColor()).join(",")+")";else{var F=R.getFgColor();O._optionsService.rawOptions.drawBoldTextInBrightColors&&R.isBold()&&F<8&&(F+=8),O._ctx.fillStyle=O._colors.ansi[F].css}R.isStrikethrough()&&O._fillMiddleLineAtCells(T,L,R.getWidth()),R.isUnderline()&&O._fillBottomLineAtCells(T,L,R.getWidth()),O._ctx.restore()}})},g.prototype.onGridChanged=function(D,M){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,D,this._bufferService.cols,M-D+1),this._drawBackground(D,M),this._drawForeground(D,M))},g.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},g.prototype._isOverlapping=function(D){if(1!==D.getWidth()||D.getCode()<256)return!1;var M=D.getChars();if(this._characterOverlapCache.hasOwnProperty(M))return this._characterOverlapCache[M];this._ctx.save(),this._ctx.font=this._characterFont;var O=Math.floor(this._ctx.measureText(M).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[M]=O,O},w([y(5,f.IBufferService),y(6,f.IOptionsService),y(7,c.ICharacterJoinerService)],g)}(E.BaseRenderLayer);_.TextRenderLayer=l},9616:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BaseCharAtlas=void 0;var A=function(){function m(){this._didWarmUp=!1}return m.prototype.dispose=function(){},m.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},m.prototype._doWarmUp=function(){},m.prototype.clear=function(){},m.prototype.beginFrame=function(){},m}();_.BaseCharAtlas=A},1420:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.removeTerminalFromCache=_.acquireCharAtlas=void 0;var m=A(2040),S=A(1906),w=[];_.acquireCharAtlas=function(y,I,E,p,v){for(var b=(0,m.generateConfig)(p,v,y,E),f=0;f<w.length;f++){var c=(a=w[f]).ownedBy.indexOf(I);if(c>=0){if((0,m.configEquals)(a.config,b))return a.atlas;1===a.ownedBy.length?(a.atlas.dispose(),w.splice(f,1)):a.ownedBy.splice(c,1);break}}for(f=0;f<w.length;f++){var a=w[f];if((0,m.configEquals)(a.config,b))return a.ownedBy.push(I),a.atlas}var l={atlas:new S.DynamicCharAtlas(document,b),config:b,ownedBy:[I]};return w.push(l),l.atlas},_.removeTerminalFromCache=function(y){for(var I=0;I<w.length;I++){var E=w[I].ownedBy.indexOf(y);if(-1!==E){1===w[I].ownedBy.length?(w[I].atlas.dispose(),w.splice(I,1)):w[I].ownedBy.splice(E,1);break}}}},2040:function(J,_,A){var m=this&&this.__spreadArray||function(w,y,I){if(I||2===arguments.length)for(var E,p=0,v=y.length;p<v;p++)!E&&p in y||(E||(E=Array.prototype.slice.call(y,0,p)),E[p]=y[p]);return w.concat(E||Array.prototype.slice.call(y))};Object.defineProperty(_,"__esModule",{value:!0}),_.is256Color=_.configEquals=_.generateConfig=void 0;var S=A(643);_.generateConfig=function(w,y,I,E){var p={foreground:E.foreground,background:E.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:m([],E.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:w,scaledCharHeight:y,fontFamily:I.fontFamily,fontSize:I.fontSize,fontWeight:I.fontWeight,fontWeightBold:I.fontWeightBold,allowTransparency:I.allowTransparency,colors:p}},_.configEquals=function(w,y){for(var I=0;I<w.colors.ansi.length;I++)if(w.colors.ansi[I].rgba!==y.colors.ansi[I].rgba)return!1;return w.devicePixelRatio===y.devicePixelRatio&&w.fontFamily===y.fontFamily&&w.fontSize===y.fontSize&&w.fontWeight===y.fontWeight&&w.fontWeightBold===y.fontWeightBold&&w.allowTransparency===y.allowTransparency&&w.scaledCharWidth===y.scaledCharWidth&&w.scaledCharHeight===y.scaledCharHeight&&w.colors.foreground===y.colors.foreground&&w.colors.background===y.colors.background},_.is256Color=function(w){return w<S.DEFAULT_COLOR}},8803:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CHAR_ATLAS_CELL_SPACING=_.TEXT_BASELINE=_.DIM_OPACITY=_.INVERTED_DEFAULT_COLOR=void 0;var m=A(6114);_.INVERTED_DEFAULT_COLOR=257,_.DIM_OPACITY=.5,_.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic",_.CHAR_ATLAS_CELL_SPACING=1},1906:function(J,_,A){var m,S=this&&this.__extends||(m=function(M,O){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,T){R.__proto__=T}||function(R,T){for(var L in T)Object.prototype.hasOwnProperty.call(T,L)&&(R[L]=T[L])})(M,O)},function(M,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function R(){this.constructor=M}m(M,O),M.prototype=null===O?Object.create(O):(R.prototype=O.prototype,new R)});Object.defineProperty(_,"__esModule",{value:!0}),_.NoneCharAtlas=_.DynamicCharAtlas=_.getGlyphCacheKey=void 0;var w=A(8803),y=A(9616),I=A(5680),E=A(7001),p=A(6114),v=A(1752),b=A(4774),f=1024,c=1024,a={css:"rgba(0, 0, 0, 0)",rgba:0};function l(M){return M.code<<21|M.bg<<12|M.fg<<3|(M.bold?0:4)+(M.dim?0:2)+(M.italic?0:1)}_.getGlyphCacheKey=l;var d=function(M){function O(R,T){var L=M.call(this)||this;L._config=T,L._drawToCacheCount=0,L._glyphsWaitingOnBitmap=[],L._bitmapCommitTimeout=null,L._bitmap=null,L._cacheCanvas=R.createElement("canvas"),L._cacheCanvas.width=f,L._cacheCanvas.height=c,L._cacheCtx=(0,v.throwIfFalsy)(L._cacheCanvas.getContext("2d",{alpha:!0}));var B=R.createElement("canvas");B.width=L._config.scaledCharWidth,B.height=L._config.scaledCharHeight,L._tmpCtx=(0,v.throwIfFalsy)(B.getContext("2d",{alpha:L._config.allowTransparency})),L._width=Math.floor(f/L._config.scaledCharWidth),L._height=Math.floor(c/L._config.scaledCharHeight);var F=L._width*L._height;return L._cacheMap=new E.LRUMap(F),L._cacheMap.prealloc(F),L}return S(O,M),O.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},O.prototype.beginFrame=function(){this._drawToCacheCount=0},O.prototype.clear=function(){if(this._cacheMap.size>0){var R=this._width*this._height;this._cacheMap=new E.LRUMap(R),this._cacheMap.prealloc(R)}this._cacheCtx.clearRect(0,0,f,c),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},O.prototype.draw=function(R,T,L,B){if(32===T.code)return!0;if(!this._canCache(T))return!1;var F=l(T),G=this._cacheMap.get(F);if(null!=G)return this._drawFromCache(R,G,L,B),!0;if(this._drawToCacheCount<100){var U;U=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var k=this._drawToCache(T,U);return this._cacheMap.set(F,k),this._drawFromCache(R,k,L,B),!0}return!1},O.prototype._canCache=function(R){return R.code<256},O.prototype._toCoordinateX=function(R){return R%this._width*this._config.scaledCharWidth},O.prototype._toCoordinateY=function(R){return Math.floor(R/this._width)*this._config.scaledCharHeight},O.prototype._drawFromCache=function(R,T,L,B){if(!T.isEmpty){var F=this._toCoordinateX(T.index),G=this._toCoordinateY(T.index);R.drawImage(T.inBitmap?this._bitmap:this._cacheCanvas,F,G,this._config.scaledCharWidth,this._config.scaledCharHeight,L,B,this._config.scaledCharWidth,this._config.scaledCharHeight)}},O.prototype._getColorFromAnsiIndex=function(R){return R<this._config.colors.ansi.length?this._config.colors.ansi[R]:I.DEFAULT_ANSI_COLORS[R]},O.prototype._getBackgroundColor=function(R){return this._config.allowTransparency?a:R.bg===w.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:R.bg<256?this._getColorFromAnsiIndex(R.bg):this._config.colors.background},O.prototype._getForegroundColor=function(R){return R.fg===w.INVERTED_DEFAULT_COLOR?b.color.opaque(this._config.colors.background):R.fg<256?this._getColorFromAnsiIndex(R.fg):this._config.colors.foreground},O.prototype._drawToCache=function(R,T){this._drawToCacheCount++,this._tmpCtx.save();var L=this._getBackgroundColor(R);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=L.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over",this._tmpCtx.font=(R.italic?"italic":"")+" "+(R.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=w.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(R).css,R.dim&&(this._tmpCtx.globalAlpha=w.DIM_OPACITY),this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight);var G=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),U=!1;if(this._config.allowTransparency||(U=D(G,L)),U&&"_"===R.chars&&!this._config.allowTransparency)for(var k=1;k<=5&&(this._tmpCtx.fillText(R.chars,0,this._config.scaledCharHeight-k),U=D(G=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),L));k++);this._tmpCtx.restore();var H=this._toCoordinateX(T),$=this._toCoordinateY(T);this._cacheCtx.putImageData(G,H,$);var K={index:T,isEmpty:U,inBitmap:!1};return this._addGlyphToBitmap(K),K},O.prototype._addGlyphToBitmap=function(R){var T=this;!("createImageBitmap"in window)||p.isFirefox||p.isSafari||(this._glyphsWaitingOnBitmap.push(R),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return T._generateBitmap()},100)))},O.prototype._generateBitmap=function(){var R=this,T=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(L){R._bitmap=L;for(var B=0;B<T.length;B++)T[B].inBitmap=!0}),this._bitmapCommitTimeout=null},O}(y.BaseCharAtlas);_.DynamicCharAtlas=d;var g=function(M){function O(R,T){return M.call(this)||this}return S(O,M),O.prototype.draw=function(R,T,L,B){return!1},O}(y.BaseCharAtlas);function D(M,O){for(var R=!0,T=O.rgba>>>24,L=O.rgba>>>16&255,B=O.rgba>>>8&255,F=0;F<M.data.length;F+=4)M.data[F]===T&&M.data[F+1]===L&&M.data[F+2]===B?M.data[F+3]=0:R=!1;return R}_.NoneCharAtlas=g},7001:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.LRUMap=void 0;var A=function(){function m(S){this.capacity=S,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return m.prototype._unlinkNode=function(S){var w=S.prev,y=S.next;S===this._head&&(this._head=y),S===this._tail&&(this._tail=w),null!==w&&(w.next=y),null!==y&&(y.prev=w)},m.prototype._appendNode=function(S){var w=this._tail;null!==w&&(w.next=S),S.prev=w,S.next=null,this._tail=S,null===this._head&&(this._head=S)},m.prototype.prealloc=function(S){for(var w=this._nodePool,y=0;y<S;y++)w.push({prev:null,next:null,key:null,value:null})},m.prototype.get=function(S){var w=this._map[S];return void 0!==w?(this._unlinkNode(w),this._appendNode(w),w.value):null},m.prototype.peekValue=function(S){var w=this._map[S];return void 0!==w?w.value:null},m.prototype.peek=function(){var S=this._head;return null===S?null:S.value},m.prototype.set=function(S,w){var y=this._map[S];if(void 0!==y)this._unlinkNode(y=this._map[S]),y.value=w;else if(this.size>=this.capacity)this._unlinkNode(y=this._head),delete this._map[y.key],y.key=S,y.value=w,this._map[S]=y;else{var I=this._nodePool;I.length>0?((y=I.pop()).key=S,y.value=w):y={prev:null,next:null,key:S,value:w},this._map[S]=y,this.size++}this._appendNode(y)},m}();_.LRUMap=A},1296:function(J,_,A){var m,S=this&&this.__extends||(m=function(R,T){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,B){L.__proto__=B}||function(L,B){for(var F in B)Object.prototype.hasOwnProperty.call(B,F)&&(L[F]=B[F])})(R,T)},function(R,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function L(){this.constructor=R}m(R,T),R.prototype=null===T?Object.create(T):(L.prototype=T.prototype,new L)}),w=this&&this.__decorate||function(R,T,L,B){var F,G=arguments.length,U=G<3?T:null===B?B=Object.getOwnPropertyDescriptor(T,L):B;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(R,T,L,B);else for(var k=R.length-1;k>=0;k--)(F=R[k])&&(U=(G<3?F(U):G>3?F(T,L,U):F(T,L))||U);return G>3&&U&&Object.defineProperty(T,L,U),U},y=this&&this.__param||function(R,T){return function(L,B){T(L,B,R)}};Object.defineProperty(_,"__esModule",{value:!0}),_.DomRenderer=void 0;var I=A(3787),E=A(8803),p=A(844),v=A(4725),b=A(2585),f=A(8460),c=A(4774),a=A(9631),l="xterm-dom-renderer-owner-",d="xterm-fg-",g="xterm-bg-",D="xterm-focus",M=1,O=function(R){function T(L,B,F,G,U,k,H,$,K,ne){var ie=R.call(this)||this;return ie._colors=L,ie._element=B,ie._screenElement=F,ie._viewportElement=G,ie._linkifier=U,ie._linkifier2=k,ie._charSizeService=$,ie._optionsService=K,ie._bufferService=ne,ie._terminalClass=M++,ie._rowElements=[],ie._rowContainer=document.createElement("div"),ie._rowContainer.classList.add("xterm-rows"),ie._rowContainer.style.lineHeight="normal",ie._rowContainer.setAttribute("aria-hidden","true"),ie._refreshRowElements(ie._bufferService.cols,ie._bufferService.rows),ie._selectionContainer=document.createElement("div"),ie._selectionContainer.classList.add("xterm-selection"),ie._selectionContainer.setAttribute("aria-hidden","true"),ie.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},ie._updateDimensions(),ie._injectCss(),ie._rowFactory=H.createInstance(I.DomRendererRowFactory,document,ie._colors),ie._element.classList.add(l+ie._terminalClass),ie._screenElement.appendChild(ie._rowContainer),ie._screenElement.appendChild(ie._selectionContainer),ie._linkifier.onShowLinkUnderline(function(Se){return ie._onLinkHover(Se)}),ie._linkifier.onHideLinkUnderline(function(Se){return ie._onLinkLeave(Se)}),ie._linkifier2.onShowLinkUnderline(function(Se){return ie._onLinkHover(Se)}),ie._linkifier2.onHideLinkUnderline(function(Se){return ie._onLinkLeave(Se)}),ie}return S(T,R),Object.defineProperty(T.prototype,"onRequestRedraw",{get:function(){return(new f.EventEmitter).event},enumerable:!1,configurable:!0}),T.prototype.dispose=function(){this._element.classList.remove(l+this._terminalClass),(0,a.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),R.prototype.dispose.call(this)},T.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var L=0,B=this._rowElements;L<B.length;L++){var F=B[L];F.style.width=this.dimensions.canvasWidth+"px",F.style.height=this.dimensions.actualCellHeight+"px",F.style.lineHeight=this.dimensions.actualCellHeight+"px",F.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement)),this._dimensionsStyleElement.textContent=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}",this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},T.prototype.setColors=function(L){this._colors=L,this._injectCss()},T.prototype._injectCss=function(){var L=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var B=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";B+=this._terminalSelector+" span:not(."+I.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+I.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+I.ITALIC_CLASS+" { font-style: italic;}",B+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",B+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",B+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+I.CURSOR_CLASS+"."+I.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+I.CURSOR_CLASS+"."+I.CURSOR_BLINK_CLASS+":not(."+I.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+I.CURSOR_CLASS+"."+I.CURSOR_BLINK_CLASS+"."+I.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+I.CURSOR_CLASS+"."+I.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+I.CURSOR_CLASS+"."+I.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+I.CURSOR_CLASS+"."+I.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",B+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(F,G){B+=L._terminalSelector+" ."+d+G+" { color: "+F.css+"; }"+L._terminalSelector+" ."+g+G+" { background-color: "+F.css+"; }"}),B+=this._terminalSelector+" ."+d+E.INVERTED_DEFAULT_COLOR+" { color: "+c.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+g+E.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=B},T.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},T.prototype._refreshRowElements=function(L,B){for(var F=this._rowElements.length;F<=B;F++){var G=document.createElement("div");this._rowContainer.appendChild(G),this._rowElements.push(G)}for(;this._rowElements.length>B;)this._rowContainer.removeChild(this._rowElements.pop())},T.prototype.onResize=function(L,B){this._refreshRowElements(L,B),this._updateDimensions()},T.prototype.onCharSizeChanged=function(){this._updateDimensions()},T.prototype.onBlur=function(){this._rowContainer.classList.remove(D)},T.prototype.onFocus=function(){this._rowContainer.classList.add(D)},T.prototype.onSelectionChanged=function(L,B,F){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(L&&B){var G=L[1]-this._bufferService.buffer.ydisp,U=B[1]-this._bufferService.buffer.ydisp,k=Math.max(G,0),H=Math.min(U,this._bufferService.rows-1);if(!(k>=this._bufferService.rows||H<0)){var $=document.createDocumentFragment();F?$.appendChild(this._createSelectionElement(k,L[0],B[0],H-k+1)):($.appendChild(this._createSelectionElement(k,G===k?L[0]:0,k===U?B[0]:this._bufferService.cols)),$.appendChild(this._createSelectionElement(k+1,0,this._bufferService.cols,H-k-1)),k!==H&&$.appendChild(this._createSelectionElement(H,0,U===H?B[0]:this._bufferService.cols))),this._selectionContainer.appendChild($)}}},T.prototype._createSelectionElement=function(L,B,F,G){void 0===G&&(G=1);var U=document.createElement("div");return U.style.height=G*this.dimensions.actualCellHeight+"px",U.style.top=L*this.dimensions.actualCellHeight+"px",U.style.left=B*this.dimensions.actualCellWidth+"px",U.style.width=this.dimensions.actualCellWidth*(F-B)+"px",U},T.prototype.onCursorMove=function(){},T.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},T.prototype.clear=function(){for(var L=0,B=this._rowElements;L<B.length;L++)B[L].innerText=""},T.prototype.renderRows=function(L,B){for(var F=this._bufferService.buffer.ybase+this._bufferService.buffer.y,G=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),U=this._optionsService.rawOptions.cursorBlink,k=L;k<=B;k++){var H=this._rowElements[k];H.innerText="";var $=k+this._bufferService.buffer.ydisp,K=this._bufferService.buffer.lines.get($);H.appendChild(this._rowFactory.createRow(K,$,$===F,this._optionsService.rawOptions.cursorStyle,G,U,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(T.prototype,"_terminalSelector",{get:function(){return"."+l+this._terminalClass},enumerable:!1,configurable:!0}),T.prototype._onLinkHover=function(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!0)},T.prototype._onLinkLeave=function(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!1)},T.prototype._setCellUnderline=function(L,B,F,G,U,k){for(;L!==B||F!==G;){var H=this._rowElements[F];if(!H)return;var $=H.children[L];$&&($.style.textDecoration=k?"underline":"none"),++L>=U&&(L=0,F++)}},w([y(6,b.IInstantiationService),y(7,v.ICharSizeService),y(8,b.IOptionsService),y(9,b.IBufferService)],T)}(p.Disposable);_.DomRenderer=O},3787:function(J,_,A){var m=this&&this.__decorate||function(a,l,d,g){var D,M=arguments.length,O=M<3?l:null===g?g=Object.getOwnPropertyDescriptor(l,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(a,l,d,g);else for(var R=a.length-1;R>=0;R--)(D=a[R])&&(O=(M<3?D(O):M>3?D(l,d,O):D(l,d))||O);return M>3&&O&&Object.defineProperty(l,d,O),O},S=this&&this.__param||function(a,l){return function(d,g){l(d,g,a)}};Object.defineProperty(_,"__esModule",{value:!0}),_.DomRendererRowFactory=_.CURSOR_STYLE_UNDERLINE_CLASS=_.CURSOR_STYLE_BAR_CLASS=_.CURSOR_STYLE_BLOCK_CLASS=_.CURSOR_BLINK_CLASS=_.CURSOR_CLASS=_.STRIKETHROUGH_CLASS=_.UNDERLINE_CLASS=_.ITALIC_CLASS=_.DIM_CLASS=_.BOLD_CLASS=void 0;var w=A(8803),y=A(643),I=A(511),E=A(2585),p=A(4774),v=A(4725),b=A(4269);_.BOLD_CLASS="xterm-bold",_.DIM_CLASS="xterm-dim",_.ITALIC_CLASS="xterm-italic",_.UNDERLINE_CLASS="xterm-underline",_.STRIKETHROUGH_CLASS="xterm-strikethrough",_.CURSOR_CLASS="xterm-cursor",_.CURSOR_BLINK_CLASS="xterm-cursor-blink",_.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",_.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",_.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var f=function(){function a(l,d,g,D,M){this._document=l,this._colors=d,this._characterJoinerService=g,this._optionsService=D,this._coreService=M,this._workCell=new I.CellData}return a.prototype.setColors=function(l){this._colors=l},a.prototype.createRow=function(l,d,g,D,M,O,R,T){for(var L=this._document.createDocumentFragment(),B=this._characterJoinerService.getJoinedCharacters(d),F=0,G=Math.min(l.length,T)-1;G>=0;G--)if(l.loadCell(G,this._workCell).getCode()!==y.NULL_CELL_CODE||g&&G===M){F=G+1;break}for(G=0;G<F;G++){l.loadCell(G,this._workCell);var U=this._workCell.getWidth();if(0!==U){var k=!1,H=G,$=this._workCell;if(B.length>0&&G===B[0][0]){k=!0;var K=B.shift();$=new b.JoinedCellData(this._workCell,l.translateToString(!0,K[0],K[1]),K[1]-K[0]),H=K[1]-1,U=$.getWidth()}var ne=this._document.createElement("span");if(U>1&&(ne.style.width=R*U+"px"),k&&(ne.style.display="inline",M>=G&&M<=H&&(M=G)),!this._coreService.isCursorHidden&&g&&G===M)switch(ne.classList.add(_.CURSOR_CLASS),O&&ne.classList.add(_.CURSOR_BLINK_CLASS),D){case"bar":ne.classList.add(_.CURSOR_STYLE_BAR_CLASS);break;case"underline":ne.classList.add(_.CURSOR_STYLE_UNDERLINE_CLASS);break;default:ne.classList.add(_.CURSOR_STYLE_BLOCK_CLASS)}$.isBold()&&ne.classList.add(_.BOLD_CLASS),$.isItalic()&&ne.classList.add(_.ITALIC_CLASS),$.isDim()&&ne.classList.add(_.DIM_CLASS),$.isUnderline()&&ne.classList.add(_.UNDERLINE_CLASS),ne.textContent=$.isInvisible()?y.WHITESPACE_CELL_CHAR:$.getChars()||y.WHITESPACE_CELL_CHAR,$.isStrikethrough()&&ne.classList.add(_.STRIKETHROUGH_CLASS);var ie=$.getFgColor(),Se=$.getFgColorMode(),_e=$.getBgColor(),Ne=$.getBgColorMode(),N=!!$.isInverse();if(N){var ee=ie;ie=_e,_e=ee;var z=Se;Se=Ne,Ne=z}switch(Se){case 16777216:case 33554432:$.isBold()&&ie<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ie+=8),this._applyMinimumContrast(ne,this._colors.background,this._colors.ansi[ie])||ne.classList.add("xterm-fg-"+ie);break;case 50331648:var W=p.rgba.toColor(ie>>16&255,ie>>8&255,255&ie);this._applyMinimumContrast(ne,this._colors.background,W)||this._addStyle(ne,"color:#"+c(ie.toString(16),"0",6));break;default:this._applyMinimumContrast(ne,this._colors.background,this._colors.foreground)||N&&ne.classList.add("xterm-fg-"+w.INVERTED_DEFAULT_COLOR)}switch(Ne){case 16777216:case 33554432:ne.classList.add("xterm-bg-"+_e);break;case 50331648:this._addStyle(ne,"background-color:#"+c(_e.toString(16),"0",6));break;default:N&&ne.classList.add("xterm-bg-"+w.INVERTED_DEFAULT_COLOR)}L.appendChild(ne),G=H}}return L},a.prototype._applyMinimumContrast=function(l,d,g){if(1===this._optionsService.rawOptions.minimumContrastRatio)return!1;var D=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===D&&(D=p.color.ensureContrastRatio(d,g,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=D?D:null)),!!D&&(this._addStyle(l,"color:"+D.css),!0)},a.prototype._addStyle=function(l,d){l.setAttribute("style",""+(l.getAttribute("style")||"")+d+";")},m([S(2,v.ICharacterJoinerService),S(3,E.IOptionsService),S(4,E.ICoreService)],a)}();function c(a,l,d){for(;a.length<d;)a=l+a;return a}_.DomRendererRowFactory=f},456:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionModel=void 0;var A=function(){function m(S){this._bufferService=S,this.isSelectAllActive=!1,this.selectionStartLength=0}return m.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(m.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var S=this.selectionStart[0]+this.selectionStartLength;return S>this._bufferService.cols?S%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(S/this._bufferService.cols)-1]:[S%this._bufferService.cols,this.selectionStart[1]+Math.floor(S/this._bufferService.cols)]:[S,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),m.prototype.areSelectionValuesReversed=function(){var S=this.selectionStart,w=this.selectionEnd;return!(!S||!w)&&(S[1]>w[1]||S[1]===w[1]&&S[0]>w[0])},m.prototype.onTrim=function(S){return this.selectionStart&&(this.selectionStart[1]-=S),this.selectionEnd&&(this.selectionEnd[1]-=S),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},m}();_.SelectionModel=A},428:function(J,_,A){var m=this&&this.__decorate||function(p,v,b,f){var c,a=arguments.length,l=a<3?v:null===f?f=Object.getOwnPropertyDescriptor(v,b):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(p,v,b,f);else for(var d=p.length-1;d>=0;d--)(c=p[d])&&(l=(a<3?c(l):a>3?c(v,b,l):c(v,b))||l);return a>3&&l&&Object.defineProperty(v,b,l),l},S=this&&this.__param||function(p,v){return function(b,f){v(b,f,p)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CharSizeService=void 0;var w=A(2585),y=A(8460),I=function(){function p(v,b,f){this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=new y.EventEmitter,this._measureStrategy=new E(v,b,this._optionsService)}return Object.defineProperty(p.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),p.prototype.measure=function(){var v=this._measureStrategy.measure();v.width===this.width&&v.height===this.height||(this.width=v.width,this.height=v.height,this._onCharSizeChange.fire())},m([S(2,w.IOptionsService)],p)}();_.CharSizeService=I;var E=function(){function p(v,b,f){this._document=v,this._parentElement=b,this._optionsService=f,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return p.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var v=this._measureElement.getBoundingClientRect();return 0!==v.width&&0!==v.height&&(this._result.width=v.width,this._result.height=Math.ceil(v.height)),this._result},p}()},4269:function(J,_,A){var m,S=this&&this.__extends||(m=function(c,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(l[g]=d[g])})(c,a)},function(c,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function l(){this.constructor=c}m(c,a),c.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)}),w=this&&this.__decorate||function(c,a,l,d){var g,D=arguments.length,M=D<3?a:null===d?d=Object.getOwnPropertyDescriptor(a,l):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)M=Reflect.decorate(c,a,l,d);else for(var O=c.length-1;O>=0;O--)(g=c[O])&&(M=(D<3?g(M):D>3?g(a,l,M):g(a,l))||M);return D>3&&M&&Object.defineProperty(a,l,M),M},y=this&&this.__param||function(c,a){return function(l,d){a(l,d,c)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CharacterJoinerService=_.JoinedCellData=void 0;var I=A(3734),E=A(643),p=A(511),v=A(2585),b=function(c){function a(l,d,g){var D=c.call(this)||this;return D.content=0,D.combinedData="",D.fg=l.fg,D.bg=l.bg,D.combinedData=d,D._width=g,D}return S(a,c),a.prototype.isCombined=function(){return 2097152},a.prototype.getWidth=function(){return this._width},a.prototype.getChars=function(){return this.combinedData},a.prototype.getCode=function(){return 2097151},a.prototype.setFromCharData=function(l){throw new Error("not implemented")},a.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},a}(I.AttributeData);_.JoinedCellData=b;var f=function(){function c(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new p.CellData}return c.prototype.register=function(a){var l={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(l),l.id},c.prototype.deregister=function(a){for(var l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===a)return this._characterJoiners.splice(l,1),!0;return!1},c.prototype.getJoinedCharacters=function(a){if(0===this._characterJoiners.length)return[];var l=this._bufferService.buffer.lines.get(a);if(!l||0===l.length)return[];for(var d=[],g=l.translateToString(!0),D=0,M=0,O=0,R=l.getFg(0),T=l.getBg(0),L=0;L<l.getTrimmedLength();L++)if(l.loadCell(L,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==R||this._workCell.bg!==T){if(L-D>1)for(var B=this._getJoinedRanges(g,O,M,l,D),F=0;F<B.length;F++)d.push(B[F]);D=L,O=M,R=this._workCell.fg,T=this._workCell.bg}M+=this._workCell.getChars().length||E.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-D>1)for(B=this._getJoinedRanges(g,O,M,l,D),F=0;F<B.length;F++)d.push(B[F]);return d},c.prototype._getJoinedRanges=function(a,l,d,g,D){var M=a.substring(l,d),O=[];try{O=this._characterJoiners[0].handler(M)}catch(B){console.error(B)}for(var R=1;R<this._characterJoiners.length;R++)try{for(var T=this._characterJoiners[R].handler(M),L=0;L<T.length;L++)c._mergeRanges(O,T[L])}catch(B){console.error(B)}return this._stringRangesToCellRanges(O,g,D),O},c.prototype._stringRangesToCellRanges=function(a,l,d){var g=0,D=!1,M=0,O=a[g];if(O){for(var R=d;R<this._bufferService.cols;R++){var T=l.getWidth(R),L=l.getString(R).length||E.WHITESPACE_CELL_CHAR.length;if(0!==T){if(!D&&O[0]<=M&&(O[0]=R,D=!0),O[1]<=M){if(O[1]=R,!(O=a[++g]))break;O[0]<=M?(O[0]=R,D=!0):D=!1}M+=L}}O&&(O[1]=this._bufferService.cols)}},c._mergeRanges=function(a,l){for(var d=!1,g=0;g<a.length;g++){var D=a[g];if(d){if(l[1]<=D[0])return a[g-1][1]=l[1],a;if(l[1]<=D[1])return a[g-1][1]=Math.max(l[1],D[1]),a.splice(g,1),a;a.splice(g,1),g--}else{if(l[1]<=D[0])return a.splice(g,0,l),a;if(l[1]<=D[1])return D[0]=Math.min(l[0],D[0]),a;l[0]<D[1]&&(D[0]=Math.min(l[0],D[0]),d=!0)}}return d?a[a.length-1][1]=l[1]:a.push(l),a},c=w([y(0,v.IBufferService)],c)}();_.CharacterJoinerService=f},5114:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CoreBrowserService=void 0;var A=function(){function m(S){this._textarea=S}return Object.defineProperty(m.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),m}();_.CoreBrowserService=A},7641:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.Decoration=_.DecorationService=void 0;var I=A(8460),E=A(844),p=A(2585),v=function(f){function c(a){var l=f.call(this)||this;return l._instantiationService=a,l._decorations=[],l}return S(c,f),c.prototype.attachToDom=function(a,l){var d=this;this._renderService=l,this._screenElement=a,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),a.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return d.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return d.refresh(!0)}))},c.prototype.registerDecoration=function(a){var l=this;if(!a.marker.isDisposed&&this._container){var d=this._instantiationService.createInstance(b,a,this._container);return this._decorations.push(d),d.onDispose(function(){return l._decorations.splice(l._decorations.indexOf(d),1)}),this._queueRefresh(),d}},c.prototype._queueRefresh=function(){var a=this;void 0===this._animationFrame&&(this._animationFrame=window.requestAnimationFrame(function(){a.refresh(),a._animationFrame=void 0}))},c.prototype.refresh=function(a){if(this._renderService)for(var l=0,d=this._decorations;l<d.length;l++)d[l].render(this._renderService,a)},c.prototype.dispose=function(){for(var a=0,l=this._decorations;a<l.length;a++)l[a].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},w([y(0,p.IInstantiationService)],c)}(E.Disposable);_.DecorationService=v;var b=function(f){function c(a,l,d){var g,D=f.call(this)||this;return D._container=l,D._bufferService=d,D.isDisposed=!1,D._onDispose=new I.EventEmitter,D._onRender=new I.EventEmitter,D.x=null!==(g=a.x)&&void 0!==g?g:0,D._marker=a.marker,D._marker.onDispose(function(){return D.dispose()}),D.anchor=a.anchor||"left",D.width=a.width||1,D.height=a.height||1,D}return S(c,f),Object.defineProperty(c.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),c.prototype.render=function(a,l){this._element&&!l||this._createElement(a,l),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(a),this._element&&this._onRender.fire(this._element)},c.prototype._createElement=function(a,l){l&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*a.dimensions.actualCellWidth+"px",this._element.style.height=this.height*a.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*a.dimensions.actualCellHeight+"px",this._element.style.lineHeight=a.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),"right"===this.anchor?this._element.style.right=this.x?this.x*a.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*a.dimensions.actualCellWidth+"px":""},c.prototype._refreshStyle=function(a){if(this._element){var l=this.marker.line-this._bufferService.buffers.active.ydisp;l<0||l>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=l*a.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},c.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},w([y(2,p.IBufferService)],c)}(E.Disposable);_.Decoration=b},8934:function(J,_,A){var m=this&&this.__decorate||function(E,p,v,b){var f,c=arguments.length,a=c<3?p:null===b?b=Object.getOwnPropertyDescriptor(p,v):b;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(E,p,v,b);else for(var l=E.length-1;l>=0;l--)(f=E[l])&&(a=(c<3?f(a):c>3?f(p,v,a):f(p,v))||a);return c>3&&a&&Object.defineProperty(p,v,a),a},S=this&&this.__param||function(E,p){return function(v,b){p(v,b,E)}};Object.defineProperty(_,"__esModule",{value:!0}),_.MouseService=void 0;var w=A(4725),y=A(9806),I=function(){function E(p,v){this._renderService=p,this._charSizeService=v}return E.prototype.getCoords=function(p,v,b,f,c){return(0,y.getCoords)(p,v,b,f,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,c)},E.prototype.getRawByteCoords=function(p,v,b,f){var c=this.getCoords(p,v,b,f);return(0,y.getRawByteCoords)(c)},m([S(0,w.IRenderService),S(1,w.ICharSizeService)],E)}();_.MouseService=I},3230:function(J,_,A){var m,S=this&&this.__extends||(m=function(l,d){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,D){g.__proto__=D}||function(g,D){for(var M in D)Object.prototype.hasOwnProperty.call(D,M)&&(g[M]=D[M])})(l,d)},function(l,d){if("function"!=typeof d&&null!==d)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function g(){this.constructor=l}m(l,d),l.prototype=null===d?Object.create(d):(g.prototype=d.prototype,new g)}),w=this&&this.__decorate||function(l,d,g,D){var M,O=arguments.length,R=O<3?d:null===D?D=Object.getOwnPropertyDescriptor(d,g):D;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(l,d,g,D);else for(var T=l.length-1;T>=0;T--)(M=l[T])&&(R=(O<3?M(R):O>3?M(d,g,R):M(d,g))||R);return O>3&&R&&Object.defineProperty(d,g,R),R},y=this&&this.__param||function(l,d){return function(g,D){d(g,D,l)}};Object.defineProperty(_,"__esModule",{value:!0}),_.RenderService=void 0;var I=A(6193),E=A(8460),p=A(844),v=A(5596),b=A(3656),f=A(2585),c=A(4725),a=function(l){function d(g,D,M,O,R,T){var L=l.call(this)||this;if(L._renderer=g,L._rowCount=D,L._charSizeService=R,L._isPaused=!1,L._needsFullRefresh=!1,L._isNextRenderRedrawOnly=!0,L._needsSelectionRefresh=!1,L._canvasWidth=0,L._canvasHeight=0,L._selectionState={start:void 0,end:void 0,columnSelectMode:!1},L._onDimensionsChange=new E.EventEmitter,L._onRender=new E.EventEmitter,L._onRefreshRequest=new E.EventEmitter,L.register({dispose:function(){return L._renderer.dispose()}}),L._renderDebouncer=new I.RenderDebouncer(function(F,G){return L._renderRows(F,G)}),L.register(L._renderDebouncer),L._screenDprMonitor=new v.ScreenDprMonitor,L._screenDprMonitor.setListener(function(){return L.onDevicePixelRatioChange()}),L.register(L._screenDprMonitor),L.register(T.onResize(function(){return L._fullRefresh()})),L.register(T.buffers.onBufferActivate(function(){var F;return null===(F=L._renderer)||void 0===F?void 0:F.clear()})),L.register(O.onOptionChange(function(){return L._renderer.onOptionsChanged()})),L.register(L._charSizeService.onCharSizeChange(function(){return L.onCharSizeChanged()})),L._renderer.onRequestRedraw(function(F){return L.refreshRows(F.start,F.end,!0)}),L.register((0,b.addDisposableDomListener)(window,"resize",function(){return L.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var B=new IntersectionObserver(function(F){return L._onIntersectionChange(F[F.length-1])},{threshold:0});B.observe(M),L.register({dispose:function(){return B.disconnect()}})}return L}return S(d,l),Object.defineProperty(d.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),d.prototype._onIntersectionChange=function(g){this._isPaused=void 0===g.isIntersecting?0===g.intersectionRatio:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},d.prototype.refreshRows=function(g,D,M){void 0===M&&(M=!1),this._isPaused?this._needsFullRefresh=!0:(M||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,D,this._rowCount))},d.prototype._renderRows=function(g,D){this._renderer.renderRows(g,D),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:g,end:D}),this._isNextRenderRedrawOnly=!0},d.prototype.resize=function(g,D){this._rowCount=D,this._fireOnCanvasResize()},d.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},d.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},d.prototype.dispose=function(){l.prototype.dispose.call(this)},d.prototype.setRenderer=function(g){var D=this;this._renderer.dispose(),this._renderer=g,this._renderer.onRequestRedraw(function(M){return D.refreshRows(M.start,M.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},d.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},d.prototype.clearTextureAtlas=function(){var g,D;null===(D=null===(g=this._renderer)||void 0===g?void 0:g.clearTextureAtlas)||void 0===D||D.call(g),this._fullRefresh()},d.prototype.setColors=function(g){this._renderer.setColors(g),this._fullRefresh()},d.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},d.prototype.onResize=function(g,D){this._renderer.onResize(g,D),this._fullRefresh()},d.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},d.prototype.onBlur=function(){this._renderer.onBlur()},d.prototype.onFocus=function(){this._renderer.onFocus()},d.prototype.onSelectionChanged=function(g,D,M){this._selectionState.start=g,this._selectionState.end=D,this._selectionState.columnSelectMode=M,this._renderer.onSelectionChanged(g,D,M)},d.prototype.onCursorMove=function(){this._renderer.onCursorMove()},d.prototype.clear=function(){this._renderer.clear()},w([y(3,f.IOptionsService),y(4,c.ICharSizeService),y(5,f.IBufferService)],d)}(p.Disposable);_.RenderService=a},9312:function(J,_,A){var m,S=this&&this.__extends||(m=function(O,R){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,L){T.__proto__=L}||function(T,L){for(var B in L)Object.prototype.hasOwnProperty.call(L,B)&&(T[B]=L[B])})(O,R)},function(O,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function T(){this.constructor=O}m(O,R),O.prototype=null===R?Object.create(R):(T.prototype=R.prototype,new T)}),w=this&&this.__decorate||function(O,R,T,L){var B,F=arguments.length,G=F<3?R:null===L?L=Object.getOwnPropertyDescriptor(R,T):L;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)G=Reflect.decorate(O,R,T,L);else for(var U=O.length-1;U>=0;U--)(B=O[U])&&(G=(F<3?B(G):F>3?B(R,T,G):B(R,T))||G);return F>3&&G&&Object.defineProperty(R,T,G),G},y=this&&this.__param||function(O,R){return function(T,L){R(T,L,O)}};Object.defineProperty(_,"__esModule",{value:!0}),_.SelectionService=void 0;var I=A(6114),E=A(456),p=A(511),v=A(8460),b=A(4725),f=A(2585),c=A(9806),a=A(9504),l=A(844),d=A(4841),g=String.fromCharCode(160),D=new RegExp(g,"g"),M=function(O){function R(T,L,B,F,G,U,k,H){var $=O.call(this)||this;return $._element=T,$._screenElement=L,$._linkifier=B,$._bufferService=F,$._coreService=G,$._mouseService=U,$._optionsService=k,$._renderService=H,$._dragScrollAmount=0,$._enabled=!0,$._workCell=new p.CellData,$._mouseDownTimeStamp=0,$._oldHasSelection=!1,$._oldSelectionStart=void 0,$._oldSelectionEnd=void 0,$._onLinuxMouseSelection=$.register(new v.EventEmitter),$._onRedrawRequest=$.register(new v.EventEmitter),$._onSelectionChange=$.register(new v.EventEmitter),$._onRequestScrollLines=$.register(new v.EventEmitter),$._mouseMoveListener=function(K){return $._onMouseMove(K)},$._mouseUpListener=function(K){return $._onMouseUp(K)},$._coreService.onUserInput(function(){$.hasSelection&&$.clearSelection()}),$._trimListener=$._bufferService.buffer.lines.onTrim(function(K){return $._onTrim(K)}),$.register($._bufferService.buffers.onBufferActivate(function(K){return $._onBufferActivate(K)})),$.enable(),$._model=new E.SelectionModel($._bufferService),$._activeSelectionMode=0,$}return S(R,O),Object.defineProperty(R.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),R.prototype.dispose=function(){this._removeMouseDownListeners()},R.prototype.reset=function(){this.clearSelection()},R.prototype.disable=function(){this.clearSelection(),this._enabled=!1},R.prototype.enable=function(){this._enabled=!0},Object.defineProperty(R.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"hasSelection",{get:function(){var T=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!T||!L||T[0]===L[0]&&T[1]===L[1])},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"selectionText",{get:function(){var T=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;if(!T||!L)return"";var B=this._bufferService.buffer,F=[];if(3===this._activeSelectionMode){if(T[0]===L[0])return"";for(var G=T[1];G<=L[1];G++){var U=B.translateBufferLineToString(G,!0,T[0],L[0]);F.push(U)}}else{for(F.push(B.translateBufferLineToString(T[1],!0,T[0],T[1]===L[1]?L[0]:void 0)),G=T[1]+1;G<=L[1]-1;G++){var H=B.lines.get(G);U=B.translateBufferLineToString(G,!0),(null==H?void 0:H.isWrapped)?F[F.length-1]+=U:F.push(U)}T[1]!==L[1]&&(H=B.lines.get(L[1]),U=B.translateBufferLineToString(L[1],!0,0,L[0]),H&&H.isWrapped?F[F.length-1]+=U:F.push(U))}return F.map(function($){return $.replace(D," ")}).join(I.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),R.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},R.prototype.refresh=function(T){var L=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return L._refresh()})),I.isLinux&&T&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},R.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},R.prototype._isClickInSelection=function(T){var L=this._getMouseBufferCoords(T),B=this._model.finalSelectionStart,F=this._model.finalSelectionEnd;return!!(B&&F&&L)&&this._areCoordsInSelection(L,B,F)},R.prototype._areCoordsInSelection=function(T,L,B){return T[1]>L[1]&&T[1]<B[1]||L[1]===B[1]&&T[1]===L[1]&&T[0]>=L[0]&&T[0]<B[0]||L[1]<B[1]&&T[1]===B[1]&&T[0]<B[0]||L[1]<B[1]&&T[1]===L[1]&&T[0]>=L[0]},R.prototype._selectWordAtCursor=function(T,L){var B,F,G=null===(F=null===(B=this._linkifier.currentLink)||void 0===B?void 0:B.link)||void 0===F?void 0:F.range;if(G)return this._model.selectionStart=[G.start.x-1,G.start.y-1],this._model.selectionStartLength=(0,d.getRangeLength)(G,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var U=this._getMouseBufferCoords(T);return!!U&&(this._selectWordAt(U,L),this._model.selectionEnd=void 0,!0)},R.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},R.prototype.selectLines=function(T,L){this._model.clearSelection(),T=Math.max(T,0),L=Math.min(L,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,T],this._model.selectionEnd=[this._bufferService.cols,L],this.refresh(),this._onSelectionChange.fire()},R.prototype._onTrim=function(T){this._model.onTrim(T)&&this.refresh()},R.prototype._getMouseBufferCoords=function(T){var L=this._mouseService.getCoords(T,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(L)return L[0]--,L[1]--,L[1]+=this._bufferService.buffer.ydisp,L},R.prototype._getMouseEventScrollAmount=function(T){var L=(0,c.getCoordsRelativeToElement)(T,this._screenElement)[1],B=this._renderService.dimensions.canvasHeight;return L>=0&&L<=B?0:(L>B&&(L-=B),L=Math.min(Math.max(L,-50),50),(L/=50)/Math.abs(L)+Math.round(14*L))},R.prototype.shouldForceSelection=function(T){return I.isMac?T.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:T.shiftKey},R.prototype.onMouseDown=function(T){if(this._mouseDownTimeStamp=T.timeStamp,(2!==T.button||!this.hasSelection)&&0===T.button){if(!this._enabled){if(!this.shouldForceSelection(T))return;T.stopPropagation()}T.preventDefault(),this._dragScrollAmount=0,this._enabled&&T.shiftKey?this._onIncrementalClick(T):1===T.detail?this._onSingleClick(T):2===T.detail?this._onDoubleClick(T):3===T.detail&&this._onTripleClick(T),this._addMouseDownListeners(),this.refresh(!0)}},R.prototype._addMouseDownListeners=function(){var T=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return T._dragScroll()},50)},R.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},R.prototype._onIncrementalClick=function(T){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(T))},R.prototype._onSingleClick=function(T){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(T)?3:0,this._model.selectionStart=this._getMouseBufferCoords(T),this._model.selectionStart){this._model.selectionEnd=void 0;var L=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);L&&L.length!==this._model.selectionStart[0]&&0===L.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},R.prototype._onDoubleClick=function(T){this._selectWordAtCursor(T,!0)&&(this._activeSelectionMode=1)},R.prototype._onTripleClick=function(T){var L=this._getMouseBufferCoords(T);L&&(this._activeSelectionMode=2,this._selectLineAt(L[1]))},R.prototype.shouldColumnSelect=function(T){return T.altKey&&!(I.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},R.prototype._onMouseMove=function(T){if(T.stopImmediatePropagation(),this._model.selectionStart){var L=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(T),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(T),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var B=this._bufferService.buffer;if(this._model.selectionEnd[1]<B.lines.length){var F=B.lines.get(this._model.selectionEnd[1]);F&&0===F.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}L&&L[0]===this._model.selectionEnd[0]&&L[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},R.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var T=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(T.ydisp+this._bufferService.rows,T.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=T.ydisp),this.refresh()}},R.prototype._onMouseUp=function(T){var L=T.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&L<500&&T.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var B=this._mouseService.getCoords(T,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(B&&void 0!==B[0]&&void 0!==B[1]){var F=(0,a.moveToCellSequence)(B[0]-1,B[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(F,!0)}}}else this._fireEventIfSelectionChanged()},R.prototype._fireEventIfSelectionChanged=function(){var T=this._model.finalSelectionStart,L=this._model.finalSelectionEnd,B=!(!T||!L||T[0]===L[0]&&T[1]===L[1]);B?T&&L&&(this._oldSelectionStart&&this._oldSelectionEnd&&T[0]===this._oldSelectionStart[0]&&T[1]===this._oldSelectionStart[1]&&L[0]===this._oldSelectionEnd[0]&&L[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(T,L,B)):this._oldHasSelection&&this._fireOnSelectionChange(T,L,B)},R.prototype._fireOnSelectionChange=function(T,L,B){this._oldSelectionStart=T,this._oldSelectionEnd=L,this._oldHasSelection=B,this._onSelectionChange.fire()},R.prototype._onBufferActivate=function(T){var L=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=T.activeBuffer.lines.onTrim(function(B){return L._onTrim(B)})},R.prototype._convertViewportColToCharacterIndex=function(T,L){for(var B=L[0],F=0;L[0]>=F;F++){var G=T.loadCell(F,this._workCell).getChars().length;0===this._workCell.getWidth()?B--:G>1&&L[0]!==F&&(B+=G-1)}return B},R.prototype.setSelection=function(T,L,B){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[T,L],this._model.selectionStartLength=B,this.refresh()},R.prototype.rightClickSelect=function(T){this._isClickInSelection(T)||(this._selectWordAtCursor(T,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},R.prototype._getWordAt=function(T,L,B,F){if(void 0===B&&(B=!0),void 0===F&&(F=!0),!(T[0]>=this._bufferService.cols)){var G=this._bufferService.buffer,U=G.lines.get(T[1]);if(U){var k=G.translateBufferLineToString(T[1],!1),H=this._convertViewportColToCharacterIndex(U,T),$=H,K=T[0]-H,ne=0,ie=0,Se=0,_e=0;if(" "===k.charAt(H)){for(;H>0&&" "===k.charAt(H-1);)H--;for(;$<k.length&&" "===k.charAt($+1);)$++}else{var Ne=T[0],N=T[0];0===U.getWidth(Ne)&&(ne++,Ne--),2===U.getWidth(N)&&(ie++,N++);var ee=U.getString(N).length;for(ee>1&&(_e+=ee-1,$+=ee-1);Ne>0&&H>0&&!this._isCharWordSeparator(U.loadCell(Ne-1,this._workCell));){U.loadCell(Ne-1,this._workCell);var z=this._workCell.getChars().length;0===this._workCell.getWidth()?(ne++,Ne--):z>1&&(Se+=z-1,H-=z-1),H--,Ne--}for(;N<U.length&&$+1<k.length&&!this._isCharWordSeparator(U.loadCell(N+1,this._workCell));){U.loadCell(N+1,this._workCell);var W=this._workCell.getChars().length;2===this._workCell.getWidth()?(ie++,N++):W>1&&(_e+=W-1,$+=W-1),$++,N++}}$++;var V=H+K-ne+Se,de=Math.min(this._bufferService.cols,$-H+ne+ie-Se-_e);if(L||""!==k.slice(H,$).trim()){if(B&&0===V&&32!==U.getCodePoint(0)){var he=G.lines.get(T[1]-1);if(he&&U.isWrapped&&32!==he.getCodePoint(this._bufferService.cols-1)){var ye=this._getWordAt([this._bufferService.cols-1,T[1]-1],!1,!0,!1);if(ye){var $e=this._bufferService.cols-ye.start;V-=$e,de+=$e}}}if(F&&V+de===this._bufferService.cols&&32!==U.getCodePoint(this._bufferService.cols-1)){var Ke=G.lines.get(T[1]+1);if((null==Ke?void 0:Ke.isWrapped)&&32!==Ke.getCodePoint(0)){var $t=this._getWordAt([0,T[1]+1],!1,!1,!0);$t&&(de+=$t.length)}}return{start:V,length:de}}}}},R.prototype._selectWordAt=function(T,L){var B=this._getWordAt(T,L);if(B){for(;B.start<0;)B.start+=this._bufferService.cols,T[1]--;this._model.selectionStart=[B.start,T[1]],this._model.selectionStartLength=B.length}},R.prototype._selectToWordAt=function(T){var L=this._getWordAt(T,!0);if(L){for(var B=T[1];L.start<0;)L.start+=this._bufferService.cols,B--;if(!this._model.areSelectionValuesReversed())for(;L.start+L.length>this._bufferService.cols;)L.length-=this._bufferService.cols,B++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?L.start:L.start+L.length,B]}},R.prototype._isCharWordSeparator=function(T){return 0!==T.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(T.getChars())>=0},R.prototype._selectLineAt=function(T){var L=this._bufferService.buffer.getWrappedRangeForLine(T);this._model.selectionStart=[0,L.first],this._model.selectionEnd=[this._bufferService.cols,L.last],this._model.selectionStartLength=0},w([y(3,f.IBufferService),y(4,f.ICoreService),y(5,b.IMouseService),y(6,f.IOptionsService),y(7,b.IRenderService)],R)}(l.Disposable);_.SelectionService=M},4725:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.IDecorationService=_.ICharacterJoinerService=_.ISoundService=_.ISelectionService=_.IRenderService=_.IMouseService=_.ICoreBrowserService=_.ICharSizeService=void 0;var m=A(8343);_.ICharSizeService=(0,m.createDecorator)("CharSizeService"),_.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),_.IMouseService=(0,m.createDecorator)("MouseService"),_.IRenderService=(0,m.createDecorator)("RenderService"),_.ISelectionService=(0,m.createDecorator)("SelectionService"),_.ISoundService=(0,m.createDecorator)("SoundService"),_.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),_.IDecorationService=(0,m.createDecorator)("DecorationService")},357:function(J,_,A){var m=this&&this.__decorate||function(I,E,p,v){var b,f=arguments.length,c=f<3?E:null===v?v=Object.getOwnPropertyDescriptor(E,p):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(I,E,p,v);else for(var a=I.length-1;a>=0;a--)(b=I[a])&&(c=(f<3?b(c):f>3?b(E,p,c):b(E,p))||c);return f>3&&c&&Object.defineProperty(E,p,c),c},S=this&&this.__param||function(I,E){return function(p,v){E(p,v,I)}};Object.defineProperty(_,"__esModule",{value:!0}),_.SoundService=void 0;var w=A(2585),y=function(){function I(E){this._optionsService=E}return Object.defineProperty(I,"audioContext",{get:function(){if(!I._audioContext){var E=window.AudioContext||window.webkitAudioContext;if(!E)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;I._audioContext=new E}return I._audioContext},enumerable:!1,configurable:!0}),I.prototype.playBellSound=function(){var E=I.audioContext;if(E){var p=E.createBufferSource();E.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(v){p.buffer=v,p.connect(E.destination),p.start(0)})}},I.prototype._base64ToArrayBuffer=function(E){for(var p=window.atob(E),v=p.length,b=new Uint8Array(v),f=0;f<v;f++)b[f]=p.charCodeAt(f);return b.buffer},I.prototype._removeMimeType=function(E){return E.split(",")[1]},I=m([S(0,w.IOptionsService)],I)}();_.SoundService=y},6349:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CircularList=void 0;var m=A(8460),S=function(){function w(y){this._maxLength=y,this.onDeleteEmitter=new m.EventEmitter,this.onInsertEmitter=new m.EventEmitter,this.onTrimEmitter=new m.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(w.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"maxLength",{get:function(){return this._maxLength},set:function(y){if(this._maxLength!==y){for(var I=new Array(y),E=0;E<Math.min(y,this.length);E++)I[E]=this._array[this._getCyclicIndex(E)];this._array=I,this._maxLength=y,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"length",{get:function(){return this._length},set:function(y){if(y>this._length)for(var I=this._length;I<y;I++)this._array[I]=void 0;this._length=y},enumerable:!1,configurable:!0}),w.prototype.get=function(y){return this._array[this._getCyclicIndex(y)]},w.prototype.set=function(y,I){this._array[this._getCyclicIndex(y)]=I},w.prototype.push=function(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},w.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(w.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),w.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},w.prototype.splice=function(y,I){for(var E=[],p=2;p<arguments.length;p++)E[p-2]=arguments[p];if(I){for(var v=y;v<this._length-I;v++)this._array[this._getCyclicIndex(v)]=this._array[this._getCyclicIndex(v+I)];this._length-=I,this.onDeleteEmitter.fire({index:y,amount:I})}for(v=this._length-1;v>=y;v--)this._array[this._getCyclicIndex(v+E.length)]=this._array[this._getCyclicIndex(v)];for(v=0;v<E.length;v++)this._array[this._getCyclicIndex(y+v)]=E[v];if(E.length&&this.onInsertEmitter.fire({index:y,amount:E.length}),this._length+E.length>this._maxLength){var b=this._length+E.length-this._maxLength;this._startIndex+=b,this._length=this._maxLength,this.onTrimEmitter.fire(b)}else this._length+=E.length},w.prototype.trimStart=function(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)},w.prototype.shiftElements=function(y,I,E){if(!(I<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+E<0)throw new Error("Cannot shift elements in list beyond index 0");if(E>0){for(var p=I-1;p>=0;p--)this.set(y+p+E,this.get(y+p));var v=y+I+E-this._length;if(v>0)for(this._length+=v;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(p=0;p<I;p++)this.set(y+p+E,this.get(y+p))}},w.prototype._getCyclicIndex=function(y){return(this._startIndex+y)%this._maxLength},w}();_.CircularList=S},1439:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.clone=void 0,_.clone=function A(m,S){if(void 0===S&&(S=5),"object"!=typeof m)return m;var w=Array.isArray(m)?[]:{};for(var y in m)w[y]=S<=1?m[y]:m[y]&&A(m[y],S-1);return w}},8969:function(J,_,A){var m,S=this&&this.__extends||(m=function(T,L){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var G in F)Object.prototype.hasOwnProperty.call(F,G)&&(B[G]=F[G])})(T,L)},function(T,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function B(){this.constructor=T}m(T,L),T.prototype=null===L?Object.create(L):(B.prototype=L.prototype,new B)});Object.defineProperty(_,"__esModule",{value:!0}),_.CoreTerminal=void 0;var w=A(844),y=A(2585),I=A(4348),E=A(7866),p=A(744),v=A(7302),b=A(6975),f=A(8460),c=A(1753),a=A(3730),l=A(1480),d=A(7994),g=A(9282),D=A(5435),M=A(5981),O=!1,R=function(T){function L(B){var F=T.call(this)||this;return F._onBinary=new f.EventEmitter,F._onData=new f.EventEmitter,F._onLineFeed=new f.EventEmitter,F._onResize=new f.EventEmitter,F._onScroll=new f.EventEmitter,F._instantiationService=new I.InstantiationService,F.optionsService=new v.OptionsService(B),F._instantiationService.setService(y.IOptionsService,F.optionsService),F._bufferService=F.register(F._instantiationService.createInstance(p.BufferService)),F._instantiationService.setService(y.IBufferService,F._bufferService),F._logService=F._instantiationService.createInstance(E.LogService),F._instantiationService.setService(y.ILogService,F._logService),F.coreService=F.register(F._instantiationService.createInstance(b.CoreService,function(){return F.scrollToBottom()})),F._instantiationService.setService(y.ICoreService,F.coreService),F.coreMouseService=F._instantiationService.createInstance(c.CoreMouseService),F._instantiationService.setService(y.ICoreMouseService,F.coreMouseService),F._dirtyRowService=F._instantiationService.createInstance(a.DirtyRowService),F._instantiationService.setService(y.IDirtyRowService,F._dirtyRowService),F.unicodeService=F._instantiationService.createInstance(l.UnicodeService),F._instantiationService.setService(y.IUnicodeService,F.unicodeService),F._charsetService=F._instantiationService.createInstance(d.CharsetService),F._instantiationService.setService(y.ICharsetService,F._charsetService),F._inputHandler=new D.InputHandler(F._bufferService,F._charsetService,F.coreService,F._dirtyRowService,F._logService,F.optionsService,F.coreMouseService,F.unicodeService),F.register((0,f.forwardEvent)(F._inputHandler.onLineFeed,F._onLineFeed)),F.register(F._inputHandler),F.register((0,f.forwardEvent)(F._bufferService.onResize,F._onResize)),F.register((0,f.forwardEvent)(F.coreService.onData,F._onData)),F.register((0,f.forwardEvent)(F.coreService.onBinary,F._onBinary)),F.register(F.optionsService.onOptionChange(function(G){return F._updateOptions(G)})),F.register(F._bufferService.onScroll(function(G){F._onScroll.fire({position:F._bufferService.buffer.ydisp,source:0}),F._dirtyRowService.markRangeDirty(F._bufferService.buffer.scrollTop,F._bufferService.buffer.scrollBottom)})),F.register(F._inputHandler.onScroll(function(G){F._onScroll.fire({position:F._bufferService.buffer.ydisp,source:0}),F._dirtyRowService.markRangeDirty(F._bufferService.buffer.scrollTop,F._bufferService.buffer.scrollBottom)})),F._writeBuffer=new M.WriteBuffer(function(G,U){return F._inputHandler.parse(G,U)}),F}return S(L,T),Object.defineProperty(L.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"onScroll",{get:function(){var B=this;return this._onScrollApi||(this._onScrollApi=new f.EventEmitter,this.register(this._onScroll.event(function(F){var G;null===(G=B._onScrollApi)||void 0===G||G.fire(F.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(L.prototype,"options",{get:function(){return this.optionsService.options},set:function(B){for(var F in B)this.optionsService.options[F]=B[F]},enumerable:!1,configurable:!0}),L.prototype.dispose=function(){var B;this._isDisposed||(T.prototype.dispose.call(this),null===(B=this._windowsMode)||void 0===B||B.dispose(),this._windowsMode=void 0)},L.prototype.write=function(B,F){this._writeBuffer.write(B,F)},L.prototype.writeSync=function(B,F){this._logService.logLevel<=y.LogLevelEnum.WARN&&!O&&(this._logService.warn("writeSync is unreliable and will be removed soon."),O=!0),this._writeBuffer.writeSync(B,F)},L.prototype.resize=function(B,F){isNaN(B)||isNaN(F)||(B=Math.max(B,p.MINIMUM_COLS),F=Math.max(F,p.MINIMUM_ROWS),this._bufferService.resize(B,F))},L.prototype.scroll=function(B,F){void 0===F&&(F=!1),this._bufferService.scroll(B,F)},L.prototype.scrollLines=function(B,F,G){this._bufferService.scrollLines(B,F,G)},L.prototype.scrollPages=function(B){this._bufferService.scrollPages(B)},L.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},L.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},L.prototype.scrollToLine=function(B){this._bufferService.scrollToLine(B)},L.prototype.registerEscHandler=function(B,F){return this._inputHandler.registerEscHandler(B,F)},L.prototype.registerDcsHandler=function(B,F){return this._inputHandler.registerDcsHandler(B,F)},L.prototype.registerCsiHandler=function(B,F){return this._inputHandler.registerCsiHandler(B,F)},L.prototype.registerOscHandler=function(B,F){return this._inputHandler.registerOscHandler(B,F)},L.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},L.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},L.prototype._updateOptions=function(B){var F;switch(B){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():(null===(F=this._windowsMode)||void 0===F||F.dispose(),this._windowsMode=void 0)}},L.prototype._enableWindowsMode=function(){var B=this;if(!this._windowsMode){var F=[];F.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),F.push(this.registerCsiHandler({final:"H"},function(){return(0,g.updateWindowsModeWrappedState)(B._bufferService),!1})),this._windowsMode={dispose:function(){for(var G=0,U=F;G<U.length;G++)U[G].dispose()}}}},L}(w.Disposable);_.CoreTerminal=R},8460:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.forwardEvent=_.EventEmitter=void 0;var A=function(){function m(){this._listeners=[],this._disposed=!1}return Object.defineProperty(m.prototype,"event",{get:function(){var S=this;return this._event||(this._event=function(w){return S._listeners.push(w),{dispose:function(){if(!S._disposed)for(var y=0;y<S._listeners.length;y++)if(S._listeners[y]===w)return void S._listeners.splice(y,1)}}}),this._event},enumerable:!1,configurable:!0}),m.prototype.fire=function(S,w){for(var y=[],I=0;I<this._listeners.length;I++)y.push(this._listeners[I]);for(I=0;I<y.length;I++)y[I].call(void 0,S,w)},m.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},m}();_.EventEmitter=A,_.forwardEvent=function(m,S){return m(function(w){return S.fire(w)})}},5435:function(J,_,A){var m,S=this&&this.__extends||(m=function(G,U){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,H){k.__proto__=H}||function(k,H){for(var $ in H)Object.prototype.hasOwnProperty.call(H,$)&&(k[$]=H[$])})(G,U)},function(G,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function k(){this.constructor=G}m(G,U),G.prototype=null===U?Object.create(U):(k.prototype=U.prototype,new k)});Object.defineProperty(_,"__esModule",{value:!0}),_.InputHandler=_.WindowsOptionsReportType=void 0;var w,G,y=A(2584),I=A(7116),E=A(2015),p=A(844),v=A(8273),b=A(482),f=A(8437),c=A(8460),a=A(643),l=A(511),d=A(3734),g=A(2585),D=A(6242),M=A(6351),O=A(5941),R={"(":0,")":1,"*":2,"+":3,"-":1,".":2},T=131072;function L(G,U){if(G>24)return U.setWinLines||!1;switch(G){case 1:return!!U.restoreWin;case 2:return!!U.minimizeWin;case 3:return!!U.setWinPosition;case 4:return!!U.setWinSizePixels;case 5:return!!U.raiseWin;case 6:return!!U.lowerWin;case 7:return!!U.refreshWin;case 8:return!!U.setWinSizeChars;case 9:return!!U.maximizeWin;case 10:return!!U.fullscreenWin;case 11:return!!U.getWinState;case 13:return!!U.getWinPosition;case 14:return!!U.getWinSizePixels;case 15:return!!U.getScreenSizePixels;case 16:return!!U.getCellSizePixels;case 18:return!!U.getWinSizeChars;case 19:return!!U.getScreenSizeChars;case 20:return!!U.getIconTitle;case 21:return!!U.getWinTitle;case 22:return!!U.pushTitle;case 23:return!!U.popTitle;case 24:return!!U.setWinLines}return!1}(G=w=_.WindowsOptionsReportType||(_.WindowsOptionsReportType={}))[G.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",G[G.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS";var B=function(){function G(U,k,H,$){this._bufferService=U,this._coreService=k,this._logService=H,this._optionsService=$,this._data=new Uint32Array(0)}return G.prototype.hook=function(U){this._data=new Uint32Array(0)},G.prototype.put=function(U,k,H){this._data=(0,v.concat)(this._data,U.subarray(k,H))},G.prototype.unhook=function(U){if(!U)return this._data=new Uint32Array(0),!0;var k=(0,b.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),k){case'"q':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r0"q'+y.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(y.C0.ESC+'P1$r61;1"p'+y.C0.ESC+"\\");break;case"r":this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+(this._bufferService.buffer.scrollTop+1)+";"+(this._bufferService.buffer.scrollBottom+1)+"r"+y.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(y.C0.ESC+"P1$r0m"+y.C0.ESC+"\\");break;case" q":var $={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];this._coreService.triggerDataEvent(y.C0.ESC+"P1$r"+($-=this._optionsService.rawOptions.cursorBlink?1:0)+" q"+y.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",k),this._coreService.triggerDataEvent(y.C0.ESC+"P0$r"+y.C0.ESC+"\\")}return!0},G}(),F=function(G){function U(k,H,$,K,ne,ie,Se,_e,Ne){void 0===Ne&&(Ne=new E.EscapeSequenceParser);var N=G.call(this)||this;N._bufferService=k,N._charsetService=H,N._coreService=$,N._dirtyRowService=K,N._logService=ne,N._optionsService=ie,N._coreMouseService=Se,N._unicodeService=_e,N._parser=Ne,N._parseBuffer=new Uint32Array(4096),N._stringDecoder=new b.StringToUtf32,N._utf8Decoder=new b.Utf8ToUtf32,N._workCell=new l.CellData,N._windowTitle="",N._iconName="",N._windowTitleStack=[],N._iconNameStack=[],N._curAttrData=f.DEFAULT_ATTR_DATA.clone(),N._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone(),N._onRequestBell=new c.EventEmitter,N._onRequestRefreshRows=new c.EventEmitter,N._onRequestReset=new c.EventEmitter,N._onRequestSendFocus=new c.EventEmitter,N._onRequestSyncScrollBar=new c.EventEmitter,N._onRequestWindowsOptionsReport=new c.EventEmitter,N._onA11yChar=new c.EventEmitter,N._onA11yTab=new c.EventEmitter,N._onCursorMove=new c.EventEmitter,N._onLineFeed=new c.EventEmitter,N._onScroll=new c.EventEmitter,N._onTitleChange=new c.EventEmitter,N._onColor=new c.EventEmitter,N._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},N._specialColors=[256,257,258],N.register(N._parser),N._activeBuffer=N._bufferService.buffer,N.register(N._bufferService.buffers.onBufferActivate(function(V){return N._activeBuffer=V.activeBuffer})),N._parser.setCsiHandlerFallback(function(V,de){N._logService.debug("Unknown CSI code: ",{identifier:N._parser.identToString(V),params:de.toArray()})}),N._parser.setEscHandlerFallback(function(V){N._logService.debug("Unknown ESC code: ",{identifier:N._parser.identToString(V)})}),N._parser.setExecuteHandlerFallback(function(V){N._logService.debug("Unknown EXECUTE code: ",{code:V})}),N._parser.setOscHandlerFallback(function(V,de,he){N._logService.debug("Unknown OSC code: ",{identifier:V,action:de,data:he})}),N._parser.setDcsHandlerFallback(function(V,de,he){"HOOK"===de&&(he=he.toArray()),N._logService.debug("Unknown DCS code: ",{identifier:N._parser.identToString(V),action:de,payload:he})}),N._parser.setPrintHandler(function(V,de,he){return N.print(V,de,he)}),N._parser.registerCsiHandler({final:"@"},function(V){return N.insertChars(V)}),N._parser.registerCsiHandler({intermediates:" ",final:"@"},function(V){return N.scrollLeft(V)}),N._parser.registerCsiHandler({final:"A"},function(V){return N.cursorUp(V)}),N._parser.registerCsiHandler({intermediates:" ",final:"A"},function(V){return N.scrollRight(V)}),N._parser.registerCsiHandler({final:"B"},function(V){return N.cursorDown(V)}),N._parser.registerCsiHandler({final:"C"},function(V){return N.cursorForward(V)}),N._parser.registerCsiHandler({final:"D"},function(V){return N.cursorBackward(V)}),N._parser.registerCsiHandler({final:"E"},function(V){return N.cursorNextLine(V)}),N._parser.registerCsiHandler({final:"F"},function(V){return N.cursorPrecedingLine(V)}),N._parser.registerCsiHandler({final:"G"},function(V){return N.cursorCharAbsolute(V)}),N._parser.registerCsiHandler({final:"H"},function(V){return N.cursorPosition(V)}),N._parser.registerCsiHandler({final:"I"},function(V){return N.cursorForwardTab(V)}),N._parser.registerCsiHandler({final:"J"},function(V){return N.eraseInDisplay(V)}),N._parser.registerCsiHandler({prefix:"?",final:"J"},function(V){return N.eraseInDisplay(V)}),N._parser.registerCsiHandler({final:"K"},function(V){return N.eraseInLine(V)}),N._parser.registerCsiHandler({prefix:"?",final:"K"},function(V){return N.eraseInLine(V)}),N._parser.registerCsiHandler({final:"L"},function(V){return N.insertLines(V)}),N._parser.registerCsiHandler({final:"M"},function(V){return N.deleteLines(V)}),N._parser.registerCsiHandler({final:"P"},function(V){return N.deleteChars(V)}),N._parser.registerCsiHandler({final:"S"},function(V){return N.scrollUp(V)}),N._parser.registerCsiHandler({final:"T"},function(V){return N.scrollDown(V)}),N._parser.registerCsiHandler({final:"X"},function(V){return N.eraseChars(V)}),N._parser.registerCsiHandler({final:"Z"},function(V){return N.cursorBackwardTab(V)}),N._parser.registerCsiHandler({final:"`"},function(V){return N.charPosAbsolute(V)}),N._parser.registerCsiHandler({final:"a"},function(V){return N.hPositionRelative(V)}),N._parser.registerCsiHandler({final:"b"},function(V){return N.repeatPrecedingCharacter(V)}),N._parser.registerCsiHandler({final:"c"},function(V){return N.sendDeviceAttributesPrimary(V)}),N._parser.registerCsiHandler({prefix:">",final:"c"},function(V){return N.sendDeviceAttributesSecondary(V)}),N._parser.registerCsiHandler({final:"d"},function(V){return N.linePosAbsolute(V)}),N._parser.registerCsiHandler({final:"e"},function(V){return N.vPositionRelative(V)}),N._parser.registerCsiHandler({final:"f"},function(V){return N.hVPosition(V)}),N._parser.registerCsiHandler({final:"g"},function(V){return N.tabClear(V)}),N._parser.registerCsiHandler({final:"h"},function(V){return N.setMode(V)}),N._parser.registerCsiHandler({prefix:"?",final:"h"},function(V){return N.setModePrivate(V)}),N._parser.registerCsiHandler({final:"l"},function(V){return N.resetMode(V)}),N._parser.registerCsiHandler({prefix:"?",final:"l"},function(V){return N.resetModePrivate(V)}),N._parser.registerCsiHandler({final:"m"},function(V){return N.charAttributes(V)}),N._parser.registerCsiHandler({final:"n"},function(V){return N.deviceStatus(V)}),N._parser.registerCsiHandler({prefix:"?",final:"n"},function(V){return N.deviceStatusPrivate(V)}),N._parser.registerCsiHandler({intermediates:"!",final:"p"},function(V){return N.softReset(V)}),N._parser.registerCsiHandler({intermediates:" ",final:"q"},function(V){return N.setCursorStyle(V)}),N._parser.registerCsiHandler({final:"r"},function(V){return N.setScrollRegion(V)}),N._parser.registerCsiHandler({final:"s"},function(V){return N.saveCursor(V)}),N._parser.registerCsiHandler({final:"t"},function(V){return N.windowOptions(V)}),N._parser.registerCsiHandler({final:"u"},function(V){return N.restoreCursor(V)}),N._parser.registerCsiHandler({intermediates:"'",final:"}"},function(V){return N.insertColumns(V)}),N._parser.registerCsiHandler({intermediates:"'",final:"~"},function(V){return N.deleteColumns(V)}),N._parser.setExecuteHandler(y.C0.BEL,function(){return N.bell()}),N._parser.setExecuteHandler(y.C0.LF,function(){return N.lineFeed()}),N._parser.setExecuteHandler(y.C0.VT,function(){return N.lineFeed()}),N._parser.setExecuteHandler(y.C0.FF,function(){return N.lineFeed()}),N._parser.setExecuteHandler(y.C0.CR,function(){return N.carriageReturn()}),N._parser.setExecuteHandler(y.C0.BS,function(){return N.backspace()}),N._parser.setExecuteHandler(y.C0.HT,function(){return N.tab()}),N._parser.setExecuteHandler(y.C0.SO,function(){return N.shiftOut()}),N._parser.setExecuteHandler(y.C0.SI,function(){return N.shiftIn()}),N._parser.setExecuteHandler(y.C1.IND,function(){return N.index()}),N._parser.setExecuteHandler(y.C1.NEL,function(){return N.nextLine()}),N._parser.setExecuteHandler(y.C1.HTS,function(){return N.tabSet()}),N._parser.registerOscHandler(0,new D.OscHandler(function(V){return N.setTitle(V),N.setIconName(V),!0})),N._parser.registerOscHandler(1,new D.OscHandler(function(V){return N.setIconName(V)})),N._parser.registerOscHandler(2,new D.OscHandler(function(V){return N.setTitle(V)})),N._parser.registerOscHandler(4,new D.OscHandler(function(V){return N.setOrReportIndexedColor(V)})),N._parser.registerOscHandler(10,new D.OscHandler(function(V){return N.setOrReportFgColor(V)})),N._parser.registerOscHandler(11,new D.OscHandler(function(V){return N.setOrReportBgColor(V)})),N._parser.registerOscHandler(12,new D.OscHandler(function(V){return N.setOrReportCursorColor(V)})),N._parser.registerOscHandler(104,new D.OscHandler(function(V){return N.restoreIndexedColor(V)})),N._parser.registerOscHandler(110,new D.OscHandler(function(V){return N.restoreFgColor(V)})),N._parser.registerOscHandler(111,new D.OscHandler(function(V){return N.restoreBgColor(V)})),N._parser.registerOscHandler(112,new D.OscHandler(function(V){return N.restoreCursorColor(V)})),N._parser.registerEscHandler({final:"7"},function(){return N.saveCursor()}),N._parser.registerEscHandler({final:"8"},function(){return N.restoreCursor()}),N._parser.registerEscHandler({final:"D"},function(){return N.index()}),N._parser.registerEscHandler({final:"E"},function(){return N.nextLine()}),N._parser.registerEscHandler({final:"H"},function(){return N.tabSet()}),N._parser.registerEscHandler({final:"M"},function(){return N.reverseIndex()}),N._parser.registerEscHandler({final:"="},function(){return N.keypadApplicationMode()}),N._parser.registerEscHandler({final:">"},function(){return N.keypadNumericMode()}),N._parser.registerEscHandler({final:"c"},function(){return N.fullReset()}),N._parser.registerEscHandler({final:"n"},function(){return N.setgLevel(2)}),N._parser.registerEscHandler({final:"o"},function(){return N.setgLevel(3)}),N._parser.registerEscHandler({final:"|"},function(){return N.setgLevel(3)}),N._parser.registerEscHandler({final:"}"},function(){return N.setgLevel(2)}),N._parser.registerEscHandler({final:"~"},function(){return N.setgLevel(1)}),N._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return N.selectDefaultCharset()}),N._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return N.selectDefaultCharset()});var ee=function(V){z._parser.registerEscHandler({intermediates:"(",final:V},function(){return N.selectCharset("("+V)}),z._parser.registerEscHandler({intermediates:")",final:V},function(){return N.selectCharset(")"+V)}),z._parser.registerEscHandler({intermediates:"*",final:V},function(){return N.selectCharset("*"+V)}),z._parser.registerEscHandler({intermediates:"+",final:V},function(){return N.selectCharset("+"+V)}),z._parser.registerEscHandler({intermediates:"-",final:V},function(){return N.selectCharset("-"+V)}),z._parser.registerEscHandler({intermediates:".",final:V},function(){return N.selectCharset("."+V)}),z._parser.registerEscHandler({intermediates:"/",final:V},function(){return N.selectCharset("/"+V)})},z=this;for(var W in I.CHARSETS)ee(W);return N._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return N.screenAlignmentPattern()}),N._parser.setErrorHandler(function(V){return N._logService.error("Parsing error: ",V),V}),N._parser.registerDcsHandler({intermediates:"$",final:"q"},new B(N._bufferService,N._coreService,N._logService,N._optionsService)),N}return S(U,G),Object.defineProperty(U.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),U.prototype.dispose=function(){G.prototype.dispose.call(this)},U.prototype._preserveStack=function(k,H,$,K){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=H,this._parseStack.decodedLength=$,this._parseStack.position=K},U.prototype._logSlowResolvingAsync=function(k){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([k,new Promise(function(H,$){return setTimeout(function(){return $("#SLOW_TIMEOUT")},5e3)})]).catch(function(H){if("#SLOW_TIMEOUT"!==H)throw H;console.warn("async parser handler taking longer than 5000 ms")})},U.prototype.parse=function(k,H){var $,K=this._activeBuffer.x,ne=this._activeBuffer.y,ie=0,Se=this._parseStack.paused;if(Se){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,H))return this._logSlowResolvingAsync($),$;K=this._parseStack.cursorStartX,ne=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>T&&(ie=this._parseStack.position+T)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof k?' "'+k+'"':' "'+Array.prototype.map.call(k,function(ee){return String.fromCharCode(ee)}).join("")+'"'),"string"==typeof k?k.split("").map(function(ee){return ee.charCodeAt(0)}):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<T&&(this._parseBuffer=new Uint32Array(Math.min(k.length,T))),Se||this._dirtyRowService.clearRange(),k.length>T)for(var _e=ie;_e<k.length;_e+=T){var Ne=_e+T<k.length?_e+T:k.length,N="string"==typeof k?this._stringDecoder.decode(k.substring(_e,Ne),this._parseBuffer):this._utf8Decoder.decode(k.subarray(_e,Ne),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(K,ne,N,_e),this._logSlowResolvingAsync($),$}else if(!Se&&(N="string"==typeof k?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer),$=this._parser.parse(this._parseBuffer,N)))return this._preserveStack(K,ne,N,0),this._logSlowResolvingAsync($),$;this._activeBuffer.x===K&&this._activeBuffer.y===ne||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},U.prototype.print=function(k,H,$){var K,ne,ie=this._charsetService.charset,Se=this._optionsService.rawOptions.screenReaderMode,_e=this._bufferService.cols,Ne=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,ee=this._curAttrData,z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-H>0&&2===z.getWidth(this._activeBuffer.x-1)&&z.setCellFromCodePoint(this._activeBuffer.x-1,0,1,ee.fg,ee.bg,ee.extended);for(var W=H;W<$;++W){if(ne=this._unicodeService.wcwidth(K=k[W]),K<127&&ie){var V=ie[String.fromCharCode(K)];V&&(K=V.charCodeAt(0))}if(Se&&this._onA11yChar.fire((0,b.stringFromCodePoint)(K)),ne||!this._activeBuffer.x){if(this._activeBuffer.x+ne-1>=_e)if(Ne){for(;this._activeBuffer.x<_e;)z.setCellFromCodePoint(this._activeBuffer.x++,0,1,ee.fg,ee.bg,ee.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),z=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=_e-1,2===ne)continue;if(N&&(z.insertCells(this._activeBuffer.x,ne,this._activeBuffer.getNullCell(ee),ee),2===z.getWidth(_e-1)&&z.setCellFromCodePoint(_e-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,ee.fg,ee.bg,ee.extended)),z.setCellFromCodePoint(this._activeBuffer.x++,K,ne,ee.fg,ee.bg,ee.extended),ne>0)for(;--ne;)z.setCellFromCodePoint(this._activeBuffer.x++,0,0,ee.fg,ee.bg,ee.extended)}else z.getWidth(this._activeBuffer.x-1)?z.addCodepointToCell(this._activeBuffer.x-1,K):z.addCodepointToCell(this._activeBuffer.x-2,K)}$-H>0&&(z.loadCell(this._activeBuffer.x-1,this._workCell),this._parser.precedingCodepoint=2===this._workCell.getWidth()||this._workCell.getCode()>65535?0:this._workCell.isCombined()?this._workCell.getChars().charCodeAt(0):this._workCell.content),this._activeBuffer.x<_e&&$-H>0&&0===z.getWidth(this._activeBuffer.x)&&!z.hasContent(this._activeBuffer.x)&&z.setCellFromCodePoint(this._activeBuffer.x,0,1,ee.fg,ee.bg,ee.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype.registerCsiHandler=function(k,H){var $=this;return this._parser.registerCsiHandler(k,"t"!==k.final||k.prefix||k.intermediates?H:function(K){return!L(K.params[0],$._optionsService.rawOptions.windowOptions)||H(K)})},U.prototype.registerDcsHandler=function(k,H){return this._parser.registerDcsHandler(k,new M.DcsHandler(H))},U.prototype.registerEscHandler=function(k,H){return this._parser.registerEscHandler(k,H)},U.prototype.registerOscHandler=function(k,H){return this._parser.registerOscHandler(k,new D.OscHandler(H))},U.prototype.bell=function(){return this._onRequestBell.fire(),!0},U.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},U.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},U.prototype.backspace=function(){var k;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(null===(k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))||void 0===k?void 0:k.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);H.hasWidth(this._activeBuffer.x)&&!H.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},U.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0},U.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},U.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},U.prototype._restrictCursor=function(k){void 0===k&&(k=this._bufferService.cols-1),this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype._setCursor=function(k,H){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+H):(this._activeBuffer.x=k,this._activeBuffer.y=H),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},U.prototype._moveCursor=function(k,H){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+H)},U.prototype.cursorUp=function(k){var H=this._activeBuffer.y-this._activeBuffer.scrollTop;return this._moveCursor(0,H>=0?-Math.min(H,k.params[0]||1):-(k.params[0]||1)),!0},U.prototype.cursorDown=function(k){var H=this._activeBuffer.scrollBottom-this._activeBuffer.y;return this._moveCursor(0,H>=0?Math.min(H,k.params[0]||1):k.params[0]||1),!0},U.prototype.cursorForward=function(k){return this._moveCursor(k.params[0]||1,0),!0},U.prototype.cursorBackward=function(k){return this._moveCursor(-(k.params[0]||1),0),!0},U.prototype.cursorNextLine=function(k){return this.cursorDown(k),this._activeBuffer.x=0,!0},U.prototype.cursorPrecedingLine=function(k){return this.cursorUp(k),this._activeBuffer.x=0,!0},U.prototype.cursorCharAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},U.prototype.cursorPosition=function(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0},U.prototype.charPosAbsolute=function(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0},U.prototype.hPositionRelative=function(k){return this._moveCursor(k.params[0]||1,0),!0},U.prototype.linePosAbsolute=function(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0},U.prototype.vPositionRelative=function(k){return this._moveCursor(0,k.params[0]||1),!0},U.prototype.hVPosition=function(k){return this.cursorPosition(k),!0},U.prototype.tabClear=function(k){var H=k.params[0];return 0===H?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===H&&(this._activeBuffer.tabs={}),!0},U.prototype.cursorForwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var H=k.params[0]||1;H--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},U.prototype.cursorBackwardTab=function(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var H=k.params[0]||1;H--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},U.prototype._eraseInBufferLine=function(k,H,$,K){void 0===K&&(K=!1);var ne=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);ne.replaceCells(H,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K&&(ne.isWrapped=!1)},U.prototype._resetBufferLine=function(k){var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);H.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),H.isWrapped=!1},U.prototype.eraseInDisplay=function(k){var H;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(this._dirtyRowService.markDirty(H=this._activeBuffer.y),this._eraseInBufferLine(H++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);H<this._bufferService.rows;H++)this._resetBufferLine(H);this._dirtyRowService.markDirty(H);break;case 1:for(this._dirtyRowService.markDirty(H=this._activeBuffer.y),this._eraseInBufferLine(H,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(H+1).isWrapped=!1);H--;)this._resetBufferLine(H);this._dirtyRowService.markDirty(0);break;case 2:for(this._dirtyRowService.markDirty((H=this._bufferService.rows)-1);H--;)this._resetBufferLine(H);this._dirtyRowService.markDirty(0);break;case 3:var $=this._activeBuffer.lines.length-this._bufferService.rows;$>0&&(this._activeBuffer.lines.trimStart($),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-$,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-$,0),this._onScroll.fire(0))}return!0},U.prototype.eraseInLine=function(k){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},U.prototype.insertLines=function(k){this._restrictCursor();var H=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var $=this._activeBuffer.ybase+this._activeBuffer.y,ne=this._bufferService.rows-1+this._activeBuffer.ybase-(this._bufferService.rows-1-this._activeBuffer.scrollBottom)+1;H--;)this._activeBuffer.lines.splice(ne-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},U.prototype.deleteLines=function(k){this._restrictCursor();var H=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var $,K=this._activeBuffer.ybase+this._activeBuffer.y;for($=this._bufferService.rows-1+this._activeBuffer.ybase-($=this._bufferService.rows-1-this._activeBuffer.scrollBottom);H--;)this._activeBuffer.lines.splice(K,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},U.prototype.insertChars=function(k){this._restrictCursor();var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.deleteChars=function(k){this._restrictCursor();var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.scrollUp=function(k){for(var H=k.params[0]||1;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollDown=function(k){for(var H=k.params[0]||1;H--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(f.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollLeft=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=k.params[0]||1,$=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);K.deleteCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.scrollRight=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=k.params[0]||1,$=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);K.insertCells(0,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.insertColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=k.params[0]||1,$=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);K.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.deleteColumns=function(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var H=k.params[0]||1,$=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);K.deleteCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),K.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},U.prototype.eraseChars=function(k){this._restrictCursor();var H=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return H&&(H.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},U.prototype.repeatPrecedingCharacter=function(k){if(!this._parser.precedingCodepoint)return!0;for(var H=k.params[0]||1,$=new Uint32Array(H),K=0;K<H;++K)$[K]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0},U.prototype.sendDeviceAttributesPrimary=function(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(y.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(y.C0.ESC+"[?6c")),!0},U.prototype.sendDeviceAttributesSecondary=function(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(y.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(y.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(y.C0.ESC+"[>83;40003;0c")),!0},U.prototype._is=function(k){return 0===(this._optionsService.rawOptions.termName+"").indexOf(k)},U.prototype.setMode=function(k){for(var H=0;H<k.length;H++)4===k.params[H]&&(this._coreService.modes.insertMode=!0);return!0},U.prototype.setModePrivate=function(k){for(var H=0;H<k.length;H++)switch(k.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,I.DEFAULT_CHARSET),this._charsetService.setgCharset(1,I.DEFAULT_CHARSET),this._charsetService.setgCharset(2,I.DEFAULT_CHARSET),this._charsetService.setgCharset(3,I.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},U.prototype.resetMode=function(k){for(var H=0;H<k.length;H++)4===k.params[H]&&(this._coreService.modes.insertMode=!1);return!0},U.prototype.resetModePrivate=function(k){for(var H=0;H<k.length;H++)switch(k.params[H]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===k.params[H]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},U.prototype._updateAttrColor=function(k,H,$,K,ne){return 2===H?(k|=50331648,k&=-16777216,k|=d.AttributeData.fromColorRGB([$,K,ne])):5===H&&(k&=-50331904,k|=33554432|255&$),k},U.prototype._extractColor=function(k,H,$){var K=[0,0,-1,0,0,0],ne=0,ie=0;do{if(K[ie+ne]=k.params[H+ie],k.hasSubParams(H+ie)){var Se=k.getSubParams(H+ie),_e=0;do{5===K[1]&&(ne=1),K[ie+_e+1+ne]=Se[_e]}while(++_e<Se.length&&_e+ie+1+ne<K.length);break}if(5===K[1]&&ie+ne>=2||2===K[1]&&ie+ne>=5)break;K[1]&&(ne=1)}while(++ie+H<k.length&&ie+ne<K.length);for(_e=2;_e<K.length;++_e)-1===K[_e]&&(K[_e]=0);switch(K[0]){case 38:$.fg=this._updateAttrColor($.fg,K[1],K[3],K[4],K[5]);break;case 48:$.bg=this._updateAttrColor($.bg,K[1],K[3],K[4],K[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,K[1],K[3],K[4],K[5])}return ie},U.prototype._processUnderline=function(k,H){H.extended=H.extended.clone(),(!~k||k>5)&&(k=1),H.extended.underlineStyle=k,H.fg|=268435456,0===k&&(H.fg&=-268435457),H.updateExtended()},U.prototype.charAttributes=function(k){if(1===k.length&&0===k.params[0])return this._curAttrData.fg=f.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=f.DEFAULT_ATTR_DATA.bg,!0;for(var H,$=k.length,K=this._curAttrData,ne=0;ne<$;ne++)(H=k.params[ne])>=30&&H<=37?(K.fg&=-50331904,K.fg|=16777216|H-30):H>=40&&H<=47?(K.bg&=-50331904,K.bg|=16777216|H-40):H>=90&&H<=97?(K.fg&=-50331904,K.fg|=16777224|H-90):H>=100&&H<=107?(K.bg&=-50331904,K.bg|=16777224|H-100):0===H?(K.fg=f.DEFAULT_ATTR_DATA.fg,K.bg=f.DEFAULT_ATTR_DATA.bg):1===H?K.fg|=134217728:3===H?K.bg|=67108864:4===H?(K.fg|=268435456,this._processUnderline(k.hasSubParams(ne)?k.getSubParams(ne)[0]:1,K)):5===H?K.fg|=536870912:7===H?K.fg|=67108864:8===H?K.fg|=1073741824:9===H?K.fg|=2147483648:2===H?K.bg|=134217728:21===H?this._processUnderline(2,K):22===H?(K.fg&=-134217729,K.bg&=-134217729):23===H?K.bg&=-67108865:24===H?K.fg&=-268435457:25===H?K.fg&=-536870913:27===H?K.fg&=-67108865:28===H?K.fg&=-1073741825:29===H?K.fg&=2147483647:39===H?(K.fg&=-67108864,K.fg|=16777215&f.DEFAULT_ATTR_DATA.fg):49===H?(K.bg&=-67108864,K.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):38===H||48===H||58===H?ne+=this._extractColor(k,ne,K):59===H?(K.extended=K.extended.clone(),K.extended.underlineColor=-1,K.updateExtended()):100===H?(K.fg&=-67108864,K.fg|=16777215&f.DEFAULT_ATTR_DATA.fg,K.bg&=-67108864,K.bg|=16777215&f.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",H);return!0},U.prototype.deviceStatus=function(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(y.C0.ESC+"[0n");break;case 6:this._coreService.triggerDataEvent(y.C0.ESC+"["+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R")}return!0},U.prototype.deviceStatusPrivate=function(k){return 6===k.params[0]&&this._coreService.triggerDataEvent(y.C0.ESC+"[?"+(this._activeBuffer.y+1)+";"+(this._activeBuffer.x+1)+"R"),!0},U.prototype.softReset=function(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},U.prototype.setCursorStyle=function(k){var H=k.params[0]||1;switch(H){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}return this._optionsService.options.cursorBlink=H%2==1,!0},U.prototype.setScrollRegion=function(k){var H,$=k.params[0]||1;return(k.length<2||(H=k.params[1])>this._bufferService.rows||0===H)&&(H=this._bufferService.rows),H>$&&(this._activeBuffer.scrollTop=$-1,this._activeBuffer.scrollBottom=H-1,this._setCursor(0,0)),!0},U.prototype.windowOptions=function(k){if(!L(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;var H=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:2!==H&&this._onRequestWindowsOptionsReport.fire(w.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(w.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(y.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==H&&2!==H||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==H&&1!==H||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==H&&2!==H||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==H&&1!==H||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},U.prototype.saveCursor=function(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},U.prototype.restoreCursor=function(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},U.prototype.setTitle=function(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0},U.prototype.setIconName=function(k){return this._iconName=k,!0},U.prototype.setOrReportIndexedColor=function(k){for(var H=[],$=k.split(";");$.length>1;){var K=$.shift(),ne=$.shift();if(/^\d+$/.exec(K)){var ie=parseInt(K);if(0<=ie&&ie<256)if("?"===ne)H.push({type:0,index:ie});else{var Se=(0,O.parseColor)(ne);Se&&H.push({type:1,index:ie,color:Se})}}}return H.length&&this._onColor.fire(H),!0},U.prototype._setOrReportSpecialColor=function(k,H){for(var $=k.split(";"),K=0;K<$.length&&!(H>=this._specialColors.length);++K,++H)if("?"===$[K])this._onColor.fire([{type:0,index:this._specialColors[H]}]);else{var ne=(0,O.parseColor)($[K]);ne&&this._onColor.fire([{type:1,index:this._specialColors[H],color:ne}])}return!0},U.prototype.setOrReportFgColor=function(k){return this._setOrReportSpecialColor(k,0)},U.prototype.setOrReportBgColor=function(k){return this._setOrReportSpecialColor(k,1)},U.prototype.setOrReportCursorColor=function(k){return this._setOrReportSpecialColor(k,2)},U.prototype.restoreIndexedColor=function(k){if(!k)return this._onColor.fire([{type:2}]),!0;for(var H=[],$=k.split(";"),K=0;K<$.length;++K)if(/^\d+$/.exec($[K])){var ne=parseInt($[K]);0<=ne&&ne<256&&H.push({type:2,index:ne})}return H.length&&this._onColor.fire(H),!0},U.prototype.restoreFgColor=function(k){return this._onColor.fire([{type:2,index:256}]),!0},U.prototype.restoreBgColor=function(k){return this._onColor.fire([{type:2,index:257}]),!0},U.prototype.restoreCursorColor=function(k){return this._onColor.fire([{type:2,index:258}]),!0},U.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},U.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},U.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},U.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,I.DEFAULT_CHARSET),!0},U.prototype.selectCharset=function(k){return 2!==k.length?(this.selectDefaultCharset(),!0):("/"===k[0]||this._charsetService.setgCharset(R[k[0]],I.CHARSETS[k[1]]||I.DEFAULT_CHARSET),!0)},U.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},U.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},U.prototype.reverseIndex=function(){return this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop?(this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)):(this._activeBuffer.y--,this._restrictCursor()),!0},U.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},U.prototype.reset=function(){this._curAttrData=f.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=f.DEFAULT_ATTR_DATA.clone()},U.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},U.prototype.setgLevel=function(k){return this._charsetService.setgLevel(k),!0},U.prototype.screenAlignmentPattern=function(){var k=new l.CellData;k.content=1<<22|"E".charCodeAt(0),k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(var H=0;H<this._bufferService.rows;++H){var K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y+H);K&&(K.fill(k),K.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},U}(p.Disposable);_.InputHandler=F},844:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getDisposeArrayDisposable=_.disposeArray=_.Disposable=void 0;var A=function(){function S(){this._disposables=[],this._isDisposed=!1}return S.prototype.dispose=function(){this._isDisposed=!0;for(var w=0,y=this._disposables;w<y.length;w++)y[w].dispose();this._disposables.length=0},S.prototype.register=function(w){return this._disposables.push(w),w},S.prototype.unregister=function(w){var y=this._disposables.indexOf(w);-1!==y&&this._disposables.splice(y,1)},S}();function m(S){for(var w=0,y=S;w<y.length;w++)y[w].dispose();S.length=0}_.Disposable=A,_.disposeArray=m,_.getDisposeArrayDisposable=function(S){return{dispose:function(){return m(S)}}}},6114:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.isLinux=_.isWindows=_.isIphone=_.isIpad=_.isMac=_.isSafari=_.isLegacyEdge=_.isFirefox=void 0;var A="undefined"==typeof navigator,m=A?"node":navigator.userAgent,S=A?"node":navigator.platform;_.isFirefox=m.includes("Firefox"),_.isLegacyEdge=m.includes("Edge"),_.isSafari=/^((?!chrome|android).)*safari/i.test(m),_.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(S),_.isIpad="iPad"===S,_.isIphone="iPhone"===S,_.isWindows=["Windows","Win16","Win32","WinCE"].includes(S),_.isLinux=S.indexOf("Linux")>=0},8273:(J,_)=>{function A(m,S,w,y){if(void 0===w&&(w=0),void 0===y&&(y=m.length),w>=m.length)return m;y=y>=m.length?m.length:(m.length+y)%m.length;for(var I=w=(m.length+w)%m.length;I<y;++I)m[I]=S;return m}Object.defineProperty(_,"__esModule",{value:!0}),_.concat=_.fillFallback=_.fill=void 0,_.fill=function(m,S,w,y){return m.fill?m.fill(S,w,y):A(m,S,w,y)},_.fillFallback=A,_.concat=function(m,S){var w=new m.constructor(m.length+S.length);return w.set(m),w.set(S,m.length),w}},9282:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.updateWindowsModeWrappedState=void 0;var m=A(643);_.updateWindowsModeWrappedState=function(S){var w=S.buffer.lines.get(S.buffer.ybase+S.buffer.y-1),y=null==w?void 0:w.get(S.cols-1),I=S.buffer.lines.get(S.buffer.ybase+S.buffer.y);I&&y&&(I.isWrapped=y[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&y[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ExtendedAttrs=_.AttributeData=void 0;var A=function(){function S(){this.fg=0,this.bg=0,this.extended=new m}return S.toColorRGB=function(w){return[w>>>16&255,w>>>8&255,255&w]},S.fromColorRGB=function(w){return(255&w[0])<<16|(255&w[1])<<8|255&w[2]},S.prototype.clone=function(){var w=new S;return w.fg=this.fg,w.bg=this.bg,w.extended=this.extended.clone(),w},S.prototype.isInverse=function(){return 67108864&this.fg},S.prototype.isBold=function(){return 134217728&this.fg},S.prototype.isUnderline=function(){return 268435456&this.fg},S.prototype.isBlink=function(){return 536870912&this.fg},S.prototype.isInvisible=function(){return 1073741824&this.fg},S.prototype.isItalic=function(){return 67108864&this.bg},S.prototype.isDim=function(){return 134217728&this.bg},S.prototype.isStrikethrough=function(){return 2147483648&this.fg},S.prototype.getFgColorMode=function(){return 50331648&this.fg},S.prototype.getBgColorMode=function(){return 50331648&this.bg},S.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},S.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},S.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},S.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},S.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},S.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},S.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},S.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},S.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},S.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},S.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},S.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},S.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},S.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},S.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},S.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},S.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},S}();_.AttributeData=A;var m=function(){function S(w,y){void 0===w&&(w=0),void 0===y&&(y=-1),this.underlineStyle=w,this.underlineColor=y}return S.prototype.clone=function(){return new S(this.underlineStyle,this.underlineColor)},S.prototype.isEmpty=function(){return 0===this.underlineStyle},S}();_.ExtendedAttrs=m},9092:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BufferStringIterator=_.Buffer=_.MAX_BUFFER_SIZE=void 0;var m=A(6349),S=A(8437),w=A(511),y=A(643),I=A(4634),E=A(4863),p=A(7116),v=A(3734);_.MAX_BUFFER_SIZE=4294967295;var b=function(){function c(a,l,d){this._hasScrollback=a,this._optionsService=l,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=S.DEFAULT_ATTR_DATA.clone(),this.savedCharset=p.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return c.prototype.getNullCell=function(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new v.ExtendedAttrs),this._nullCell},c.prototype.getWhitespaceCell=function(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new v.ExtendedAttrs),this._whitespaceCell},c.prototype.getBlankLine=function(a,l){return new S.BufferLine(this._bufferService.cols,this.getNullCell(a),l)},Object.defineProperty(c.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isCursorInViewport",{get:function(){var a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows},enumerable:!1,configurable:!0}),c.prototype._getCorrectBufferLength=function(a){if(!this._hasScrollback)return a;var l=a+this._optionsService.rawOptions.scrollback;return l>_.MAX_BUFFER_SIZE?_.MAX_BUFFER_SIZE:l},c.prototype.fillViewportRows=function(a){if(0===this.lines.length){void 0===a&&(a=S.DEFAULT_ATTR_DATA);for(var l=this._rows;l--;)this.lines.push(this.getBlankLine(a))}},c.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},c.prototype.resize=function(a,l){var d=this.getNullCell(S.DEFAULT_ATTR_DATA),g=this._getCorrectBufferLength(l);if(g>this.lines.maxLength&&(this.lines.maxLength=g),this.lines.length>0){if(this._cols<a)for(var D=0;D<this.lines.length;D++)this.lines.get(D).resize(a,d);var M=0;if(this._rows<l)for(var O=this._rows;O<l;O++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new S.BufferLine(a,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+M+1?(this.ybase--,M++,this.ydisp>0&&this.ydisp--):this.lines.push(new S.BufferLine(a,d)));else for(O=this._rows;O>l;O--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(g<this.lines.maxLength){var R=this.lines.length-g;R>0&&(this.lines.trimStart(R),this.ybase=Math.max(this.ybase-R,0),this.ydisp=Math.max(this.ydisp-R,0),this.savedY=Math.max(this.savedY-R,0)),this.lines.maxLength=g}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,l-1),M&&(this.y+=M),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(a,l),this._cols>a))for(D=0;D<this.lines.length;D++)this.lines.get(D).resize(a,d);this._cols=a,this._rows=l},Object.defineProperty(c.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),c.prototype._reflow=function(a,l){this._cols!==a&&(a>this._cols?this._reflowLarger(a,l):this._reflowSmaller(a,l))},c.prototype._reflowLarger=function(a,l){var d=(0,I.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(S.DEFAULT_ATTR_DATA));if(d.length>0){var g=(0,I.reflowLargerCreateNewLayout)(this.lines,d);(0,I.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(a,l,g.countRemoved)}},c.prototype._reflowLargerAdjustViewport=function(a,l,d){for(var g=this.getNullCell(S.DEFAULT_ATTR_DATA),D=d;D-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new S.BufferLine(a,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)},c.prototype._reflowSmaller=function(a,l){for(var d=this.getNullCell(S.DEFAULT_ATTR_DATA),g=[],D=0,M=this.lines.length-1;M>=0;M--){var O=this.lines.get(M);if(!(!O||!O.isWrapped&&O.getTrimmedLength()<=a)){for(var R=[O];O.isWrapped&&M>0;)O=this.lines.get(--M),R.unshift(O);var T=this.ybase+this.y;if(!(T>=M&&T<M+R.length)){var L,B=R[R.length-1].getTrimmedLength(),F=(0,I.reflowSmallerGetNewLineLengths)(R,this._cols,a),G=F.length-R.length;L=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+G):Math.max(0,this.lines.length-this.lines.maxLength+G);for(var U=[],k=0;k<G;k++){var H=this.getBlankLine(S.DEFAULT_ATTR_DATA,!0);U.push(H)}U.length>0&&(g.push({start:M+R.length+D,newLines:U}),D+=U.length),R.push.apply(R,U);var $=F.length-1,K=F[$];0===K&&(K=F[--$]);for(var ne=R.length-G-1,ie=B;ne>=0;){var Se=Math.min(ie,K);if(void 0===R[$])break;if(R[$].copyCellsFrom(R[ne],ie-Se,K-Se,Se,!0),0==(K-=Se)&&(K=F[--$]),0==(ie-=Se)){ne--;var _e=Math.max(ne,0);ie=(0,I.getWrappedLineTrimmedLength)(R,_e,this._cols)}}for(k=0;k<R.length;k++)F[k]<a&&R[k].setCell(F[k],d);for(var Ne=G-L;Ne-- >0;)0===this.ybase?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+D)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+G,this.ybase+l-1)}}}if(g.length>0){var N=[],ee=[];for(k=0;k<this.lines.length;k++)ee.push(this.lines.get(k));var z=this.lines.length,W=z-1,V=0,de=g[V];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+D);var he=0;for(k=Math.min(this.lines.maxLength-1,z+D-1);k>=0;k--)if(de&&de.start>W+he){for(var ye=de.newLines.length-1;ye>=0;ye--)this.lines.set(k--,de.newLines[ye]);k++,N.push({index:W+1,amount:de.newLines.length}),he+=de.newLines.length,de=g[++V]}else this.lines.set(k,ee[W--]);var $e=0;for(k=N.length-1;k>=0;k--)N[k].index+=$e,this.lines.onInsertEmitter.fire(N[k]),$e+=N[k].amount;var Ke=Math.max(0,z+D-this.lines.maxLength);Ke>0&&this.lines.onTrimEmitter.fire(Ke)}},c.prototype.stringIndexToBufferIndex=function(a,l,d){for(void 0===d&&(d=!1);l;){var g=this.lines.get(a);if(!g)return[-1,-1];for(var D=d?g.getTrimmedLength():g.length,M=0;M<D;++M)if(g.get(M)[y.CHAR_DATA_WIDTH_INDEX]&&(l-=g.get(M)[y.CHAR_DATA_CHAR_INDEX].length||1),l<0)return[a,M];a++}return[a,0]},c.prototype.translateBufferLineToString=function(a,l,d,g){void 0===d&&(d=0);var D=this.lines.get(a);return D?D.translateToString(l,d,g):""},c.prototype.getWrappedRangeForLine=function(a){for(var l=a,d=a;l>0&&this.lines.get(l).isWrapped;)l--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:l,last:d}},c.prototype.setupTabStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0},c.prototype.prevStop=function(a){for(null==a&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a},c.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a},c.prototype.clearMarkers=function(a){if(this._isClearing=!0,void 0!==a)for(var l=0;l<this.markers.length;l++)this.markers[l].line===a&&(this.markers[l].dispose(),this.markers.splice(l--,1));else{for(var d=0,g=this.markers;d<g.length;d++)g[d].dispose();this.markers=[]}this._isClearing=!1},c.prototype.addMarker=function(a){var l=this,d=new E.Marker(a);return this.markers.push(d),d.register(this.lines.onTrim(function(g){d.line-=g,d.line<0&&d.dispose()})),d.register(this.lines.onInsert(function(g){d.line>=g.index&&(d.line+=g.amount)})),d.register(this.lines.onDelete(function(g){d.line>=g.index&&d.line<g.index+g.amount&&d.dispose(),d.line>g.index&&(d.line-=g.amount)})),d.register(d.onDispose(function(){return l._removeMarker(d)})),d},c.prototype._removeMarker=function(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)},c.prototype.iterator=function(a,l,d,g,D){return new f(this,a,l,d,g,D)},c}();_.Buffer=b;var f=function(){function c(a,l,d,g,D,M){void 0===d&&(d=0),void 0===g&&(g=a.lines.length),void 0===D&&(D=0),void 0===M&&(M=0),this._buffer=a,this._trimRight=l,this._startIndex=d,this._endIndex=g,this._startOverscan=D,this._endOverscan=M,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return c.prototype.hasNext=function(){return this._current<this._endIndex},c.prototype.next=function(){var a=this._buffer.getWrappedRangeForLine(this._current);a.first<this._startIndex-this._startOverscan&&(a.first=this._startIndex-this._startOverscan),a.last>this._endIndex+this._endOverscan&&(a.last=this._endIndex+this._endOverscan),a.first=Math.max(a.first,0),a.last=Math.min(a.last,this._buffer.lines.length);for(var l="",d=a.first;d<=a.last;++d)l+=this._buffer.translateBufferLineToString(d,this._trimRight);return this._current=a.last+1,{range:a,content:l}},c}();_.BufferStringIterator=f},8437:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BufferLine=_.DEFAULT_ATTR_DATA=void 0;var m=A(482),S=A(643),w=A(511),y=A(3734);_.DEFAULT_ATTR_DATA=Object.freeze(new y.AttributeData);var I=function(){function E(p,v,b){void 0===b&&(b=!1),this.isWrapped=b,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*p);for(var f=v||w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),c=0;c<p;++c)this.setCell(c,f);this.length=p}return E.prototype.get=function(p){var v=this._data[3*p+0],b=2097151&v;return[this._data[3*p+1],2097152&v?this._combined[p]:b?(0,m.stringFromCodePoint)(b):"",v>>22,2097152&v?this._combined[p].charCodeAt(this._combined[p].length-1):b]},E.prototype.set=function(p,v){this._data[3*p+1]=v[S.CHAR_DATA_ATTR_INDEX],v[S.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[p]=v[1],this._data[3*p+0]=2097152|p|v[S.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*p+0]=v[S.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|v[S.CHAR_DATA_WIDTH_INDEX]<<22},E.prototype.getWidth=function(p){return this._data[3*p+0]>>22},E.prototype.hasWidth=function(p){return 12582912&this._data[3*p+0]},E.prototype.getFg=function(p){return this._data[3*p+1]},E.prototype.getBg=function(p){return this._data[3*p+2]},E.prototype.hasContent=function(p){return 4194303&this._data[3*p+0]},E.prototype.getCodePoint=function(p){var v=this._data[3*p+0];return 2097152&v?this._combined[p].charCodeAt(this._combined[p].length-1):2097151&v},E.prototype.isCombined=function(p){return 2097152&this._data[3*p+0]},E.prototype.getString=function(p){var v=this._data[3*p+0];return 2097152&v?this._combined[p]:2097151&v?(0,m.stringFromCodePoint)(2097151&v):""},E.prototype.loadCell=function(p,v){var b=3*p;return v.content=this._data[b+0],v.fg=this._data[b+1],v.bg=this._data[b+2],2097152&v.content&&(v.combinedData=this._combined[p]),268435456&v.bg&&(v.extended=this._extendedAttrs[p]),v},E.prototype.setCell=function(p,v){2097152&v.content&&(this._combined[p]=v.combinedData),268435456&v.bg&&(this._extendedAttrs[p]=v.extended),this._data[3*p+0]=v.content,this._data[3*p+1]=v.fg,this._data[3*p+2]=v.bg},E.prototype.setCellFromCodePoint=function(p,v,b,f,c,a){268435456&c&&(this._extendedAttrs[p]=a),this._data[3*p+0]=v|b<<22,this._data[3*p+1]=f,this._data[3*p+2]=c},E.prototype.addCodepointToCell=function(p,v){var b=this._data[3*p+0];2097152&b?this._combined[p]+=(0,m.stringFromCodePoint)(v):(2097151&b?(this._combined[p]=(0,m.stringFromCodePoint)(2097151&b)+(0,m.stringFromCodePoint)(v),b&=-2097152,b|=2097152):b=v|1<<22,this._data[3*p+0]=b)},E.prototype.insertCells=function(p,v,b,f){if((p%=this.length)&&2===this.getWidth(p-1)&&this.setCellFromCodePoint(p-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs),v<this.length-p){for(var c=new w.CellData,a=this.length-p-v-1;a>=0;--a)this.setCell(p+v+a,this.loadCell(p+a,c));for(a=0;a<v;++a)this.setCell(p+a,b)}else for(a=p;a<this.length;++a)this.setCell(a,b);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs)},E.prototype.deleteCells=function(p,v,b,f){if(v<this.length-(p%=this.length)){for(var c=new w.CellData,a=0;a<this.length-p-v;++a)this.setCell(p+a,this.loadCell(p+v+a,c));for(a=this.length-v;a<this.length;++a)this.setCell(a,b)}else for(a=p;a<this.length;++a)this.setCell(a,b);p&&2===this.getWidth(p-1)&&this.setCellFromCodePoint(p-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs),0!==this.getWidth(p)||this.hasContent(p)||this.setCellFromCodePoint(p,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs)},E.prototype.replaceCells=function(p,v,b,f){for(p&&2===this.getWidth(p-1)&&this.setCellFromCodePoint(p-1,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs),v<this.length&&2===this.getWidth(v-1)&&this.setCellFromCodePoint(v,0,1,(null==f?void 0:f.fg)||0,(null==f?void 0:f.bg)||0,(null==f?void 0:f.extended)||new y.ExtendedAttrs);p<v&&p<this.length;)this.setCell(p++,b)},E.prototype.resize=function(p,v){if(p!==this.length){if(p>this.length){var b=new Uint32Array(3*p);this.length&&b.set(3*p<this._data.length?this._data.subarray(0,3*p):this._data),this._data=b;for(var f=this.length;f<p;++f)this.setCell(f,v)}else if(p){(b=new Uint32Array(3*p)).set(this._data.subarray(0,3*p)),this._data=b;var c=Object.keys(this._combined);for(f=0;f<c.length;f++){var a=parseInt(c[f],10);a>=p&&delete this._combined[a]}}else this._data=new Uint32Array(0),this._combined={};this.length=p}},E.prototype.fill=function(p){this._combined={},this._extendedAttrs={};for(var v=0;v<this.length;++v)this.setCell(v,p)},E.prototype.copyFrom=function(p){for(var v in this.length!==p.length?this._data=new Uint32Array(p._data):this._data.set(p._data),this.length=p.length,this._combined={},p._combined)this._combined[v]=p._combined[v];for(var v in this._extendedAttrs={},p._extendedAttrs)this._extendedAttrs[v]=p._extendedAttrs[v];this.isWrapped=p.isWrapped},E.prototype.clone=function(){var p=new E(0);for(var v in p._data=new Uint32Array(this._data),p.length=this.length,this._combined)p._combined[v]=this._combined[v];for(var v in this._extendedAttrs)p._extendedAttrs[v]=this._extendedAttrs[v];return p.isWrapped=this.isWrapped,p},E.prototype.getTrimmedLength=function(){for(var p=this.length-1;p>=0;--p)if(4194303&this._data[3*p+0])return p+(this._data[3*p+0]>>22);return 0},E.prototype.copyCellsFrom=function(p,v,b,f,c){var a=p._data;if(c)for(var l=f-1;l>=0;l--)for(var d=0;d<3;d++)this._data[3*(b+l)+d]=a[3*(v+l)+d];else for(l=0;l<f;l++)for(d=0;d<3;d++)this._data[3*(b+l)+d]=a[3*(v+l)+d];var g=Object.keys(p._combined);for(d=0;d<g.length;d++){var D=parseInt(g[d],10);D>=v&&(this._combined[D-v+b]=p._combined[D])}},E.prototype.translateToString=function(p,v,b){void 0===p&&(p=!1),void 0===v&&(v=0),void 0===b&&(b=this.length),p&&(b=Math.min(b,this.getTrimmedLength()));for(var f="";v<b;){var c=this._data[3*v+0],a=2097151&c;f+=2097152&c?this._combined[v]:a?(0,m.stringFromCodePoint)(a):S.WHITESPACE_CELL_CHAR,v+=c>>22||1}return f},E}();_.BufferLine=I},4841:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.getRangeLength=void 0,_.getRangeLength=function(A,m){if(A.start.y>A.end.y)throw new Error("Buffer range end ("+A.end.x+", "+A.end.y+") cannot be before start ("+A.start.x+", "+A.start.y+")");return m*(A.end.y-A.start.y)+(A.end.x-A.start.x+1)}},4634:(J,_)=>{function A(m,S,w){if(S===m.length-1)return m[S].getTrimmedLength();var y=!m[S].hasContent(w-1)&&1===m[S].getWidth(w-1),I=2===m[S+1].getWidth(0);return y&&I?w-1:w}Object.defineProperty(_,"__esModule",{value:!0}),_.getWrappedLineTrimmedLength=_.reflowSmallerGetNewLineLengths=_.reflowLargerApplyNewLayout=_.reflowLargerCreateNewLayout=_.reflowLargerGetLinesToRemove=void 0,_.reflowLargerGetLinesToRemove=function(m,S,w,y,I){for(var E=[],p=0;p<m.length-1;p++){var v=p,b=m.get(++v);if(b.isWrapped){for(var f=[m.get(p)];v<m.length&&b.isWrapped;)f.push(b),b=m.get(++v);if(y>=p&&y<v)p+=f.length-1;else{for(var c=0,a=A(f,c,S),l=1,d=0;l<f.length;){var g=A(f,l,S),O=Math.min(g-d,w-a);f[c].copyCellsFrom(f[l],d,a,O,!1),(a+=O)===w&&(c++,a=0),(d+=O)===g&&(l++,d=0),0===a&&0!==c&&2===f[c-1].getWidth(w-1)&&(f[c].copyCellsFrom(f[c-1],w-1,a++,1,!1),f[c-1].setCell(w-1,I))}f[c].replaceCells(a,w,I);for(var R=0,T=f.length-1;T>0&&(T>c||0===f[T].getTrimmedLength());T--)R++;R>0&&(E.push(p+f.length-R),E.push(R)),p+=f.length-1}}}return E},_.reflowLargerCreateNewLayout=function(m,S){for(var w=[],y=0,I=S[y],E=0,p=0;p<m.length;p++)if(I===p){var v=S[++y];m.onDeleteEmitter.fire({index:p-E,amount:v}),p+=v-1,E+=v,I=S[++y]}else w.push(p);return{layout:w,countRemoved:E}},_.reflowLargerApplyNewLayout=function(m,S){for(var w=[],y=0;y<S.length;y++)w.push(m.get(S[y]));for(y=0;y<w.length;y++)m.set(y,w[y]);m.length=S.length},_.reflowSmallerGetNewLineLengths=function(m,S,w){for(var y=[],I=m.map(function(a,l){return A(m,l,S)}).reduce(function(a,l){return a+l}),E=0,p=0,v=0;v<I;){if(I-v<w){y.push(I-v);break}E+=w;var b=A(m,p,S);E>b&&(E-=b,p++);var f=2===m[p].getWidth(E-1);f&&E--;var c=f?w-1:w;y.push(c),v+=c}return y},_.getWrappedLineTrimmedLength=A},5295:function(J,_,A){var m,S=this&&this.__extends||(m=function(E,p){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(v[f]=b[f])})(E,p)},function(E,p){if("function"!=typeof p&&null!==p)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function v(){this.constructor=E}m(E,p),E.prototype=null===p?Object.create(p):(v.prototype=p.prototype,new v)});Object.defineProperty(_,"__esModule",{value:!0}),_.BufferSet=void 0;var w=A(9092),y=A(8460),I=function(E){function p(v,b){var f=E.call(this)||this;return f._optionsService=v,f._bufferService=b,f._onBufferActivate=f.register(new y.EventEmitter),f.reset(),f}return S(p,E),Object.defineProperty(p.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),p.prototype.reset=function(){this._normal=new w.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new w.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(p.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),p.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},p.prototype.activateAltBuffer=function(v){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(v),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},p.prototype.resize=function(v,b){this._normal.resize(v,b),this._alt.resize(v,b)},p.prototype.setupTabStops=function(v){this._normal.setupTabStops(v),this._alt.setupTabStops(v)},p}(A(844).Disposable);_.BufferSet=I},511:function(J,_,A){var m,S=this&&this.__extends||(m=function(p,v){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,f){b.__proto__=f}||function(b,f){for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&(b[c]=f[c])})(p,v)},function(p,v){if("function"!=typeof v&&null!==v)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function b(){this.constructor=p}m(p,v),p.prototype=null===v?Object.create(v):(b.prototype=v.prototype,new b)});Object.defineProperty(_,"__esModule",{value:!0}),_.CellData=void 0;var w=A(482),y=A(643),I=A(3734),E=function(p){function v(){var b=null!==p&&p.apply(this,arguments)||this;return b.content=0,b.fg=0,b.bg=0,b.extended=new I.ExtendedAttrs,b.combinedData="",b}return S(v,p),v.fromCharData=function(b){var f=new v;return f.setFromCharData(b),f},v.prototype.isCombined=function(){return 2097152&this.content},v.prototype.getWidth=function(){return this.content>>22},v.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,w.stringFromCodePoint)(2097151&this.content):""},v.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},v.prototype.setFromCharData=function(b){this.fg=b[y.CHAR_DATA_ATTR_INDEX],this.bg=0;var f=!1;if(b[y.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(2===b[y.CHAR_DATA_CHAR_INDEX].length){var c=b[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){var a=b[y.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=a&&a<=57343?this.content=1024*(c-55296)+a-56320+65536|b[y.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=b[y.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|b[y.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=b[y.CHAR_DATA_CHAR_INDEX],this.content=2097152|b[y.CHAR_DATA_WIDTH_INDEX]<<22)},v.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},v}(I.AttributeData);_.CellData=E},643:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WHITESPACE_CELL_CODE=_.WHITESPACE_CELL_WIDTH=_.WHITESPACE_CELL_CHAR=_.NULL_CELL_CODE=_.NULL_CELL_WIDTH=_.NULL_CELL_CHAR=_.CHAR_DATA_CODE_INDEX=_.CHAR_DATA_WIDTH_INDEX=_.CHAR_DATA_CHAR_INDEX=_.CHAR_DATA_ATTR_INDEX=_.DEFAULT_ATTR=_.DEFAULT_COLOR=void 0,_.DEFAULT_COLOR=256,_.DEFAULT_ATTR=256|_.DEFAULT_COLOR<<9,_.CHAR_DATA_ATTR_INDEX=0,_.CHAR_DATA_CHAR_INDEX=1,_.CHAR_DATA_WIDTH_INDEX=2,_.CHAR_DATA_CODE_INDEX=3,_.NULL_CELL_CHAR="",_.NULL_CELL_WIDTH=1,_.NULL_CELL_CODE=0,_.WHITESPACE_CELL_CHAR=" ",_.WHITESPACE_CELL_WIDTH=1,_.WHITESPACE_CELL_CODE=32},4863:function(J,_,A){var m,S=this&&this.__extends||(m=function(I,E){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,v){p.__proto__=v}||function(p,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(p[b]=v[b])})(I,E)},function(I,E){if("function"!=typeof E&&null!==E)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");function p(){this.constructor=I}m(I,E),I.prototype=null===E?Object.create(E):(p.prototype=E.prototype,new p)});Object.defineProperty(_,"__esModule",{value:!0}),_.Marker=void 0;var w=A(8460),y=function(I){function E(p){var v=I.call(this)||this;return v.line=p,v._id=E._nextId++,v.isDisposed=!1,v._onDispose=new w.EventEmitter,v}return S(E,I),Object.defineProperty(E.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),E.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),I.prototype.dispose.call(this))},E._nextId=1,E}(A(844).Disposable);_.Marker=y},7116:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DEFAULT_CHARSET=_.CHARSETS=void 0,_.CHARSETS={},_.DEFAULT_CHARSET=_.CHARSETS.B,_.CHARSETS[0]={"`":"\u25c6",a:"\u2592",b:"\u2409",c:"\u240c",d:"\u240d",e:"\u240a",f:"\xb0",g:"\xb1",h:"\u2424",i:"\u240b",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\xa3","~":"\xb7"},_.CHARSETS.A={"#":"\xa3"},_.CHARSETS.B=void 0,_.CHARSETS[4]={"#":"\xa3","@":"\xbe","[":"ij","\\":"\xbd","]":"|","{":"\xa8","|":"f","}":"\xbc","~":"\xb4"},_.CHARSETS.C=_.CHARSETS[5]={"[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},_.CHARSETS.R={"#":"\xa3","@":"\xe0","[":"\xb0","\\":"\xe7","]":"\xa7","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xa8"},_.CHARSETS.Q={"@":"\xe0","[":"\xe2","\\":"\xe7","]":"\xea","^":"\xee","`":"\xf4","{":"\xe9","|":"\xf9","}":"\xe8","~":"\xfb"},_.CHARSETS.K={"@":"\xa7","[":"\xc4","\\":"\xd6","]":"\xdc","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xdf"},_.CHARSETS.Y={"#":"\xa3","@":"\xa7","[":"\xb0","\\":"\xe7","]":"\xe9","`":"\xf9","{":"\xe0","|":"\xf2","}":"\xe8","~":"\xec"},_.CHARSETS.E=_.CHARSETS[6]={"@":"\xc4","[":"\xc6","\\":"\xd8","]":"\xc5","^":"\xdc","`":"\xe4","{":"\xe6","|":"\xf8","}":"\xe5","~":"\xfc"},_.CHARSETS.Z={"#":"\xa3","@":"\xa7","[":"\xa1","\\":"\xd1","]":"\xbf","{":"\xb0","|":"\xf1","}":"\xe7"},_.CHARSETS.H=_.CHARSETS[7]={"@":"\xc9","[":"\xc4","\\":"\xd6","]":"\xc5","^":"\xdc","`":"\xe9","{":"\xe4","|":"\xf6","}":"\xe5","~":"\xfc"},_.CHARSETS["="]={"#":"\xf9","@":"\xe0","[":"\xe9","\\":"\xe7","]":"\xea","^":"\xee",_:"\xe8","`":"\xf4","{":"\xe4","|":"\xf6","}":"\xfc","~":"\xfb"}},2584:(J,_)=>{var A,m;Object.defineProperty(_,"__esModule",{value:!0}),_.C1=_.C0=void 0,(m=_.C0||(_.C0={})).NUL="\0",m.SOH="\x01",m.STX="\x02",m.ETX="\x03",m.EOT="\x04",m.ENQ="\x05",m.ACK="\x06",m.BEL="\x07",m.BS="\b",m.HT="\t",m.LF="\n",m.VT="\v",m.FF="\f",m.CR="\r",m.SO="\x0e",m.SI="\x0f",m.DLE="\x10",m.DC1="\x11",m.DC2="\x12",m.DC3="\x13",m.DC4="\x14",m.NAK="\x15",m.SYN="\x16",m.ETB="\x17",m.CAN="\x18",m.EM="\x19",m.SUB="\x1a",m.ESC="\x1b",m.FS="\x1c",m.GS="\x1d",m.RS="\x1e",m.US="\x1f",m.SP=" ",m.DEL="\x7f",(A=_.C1||(_.C1={})).PAD="\x80",A.HOP="\x81",A.BPH="\x82",A.NBH="\x83",A.IND="\x84",A.NEL="\x85",A.SSA="\x86",A.ESA="\x87",A.HTS="\x88",A.HTJ="\x89",A.VTS="\x8a",A.PLD="\x8b",A.PLU="\x8c",A.RI="\x8d",A.SS2="\x8e",A.SS3="\x8f",A.DCS="\x90",A.PU1="\x91",A.PU2="\x92",A.STS="\x93",A.CCH="\x94",A.MW="\x95",A.SPA="\x96",A.EPA="\x97",A.SOS="\x98",A.SGCI="\x99",A.SCI="\x9a",A.CSI="\x9b",A.ST="\x9c",A.OSC="\x9d",A.PM="\x9e",A.APC="\x9f"},7399:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.evaluateKeyboardEvent=void 0;var m=A(2584),S={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};_.evaluateKeyboardEvent=function(w,y,I,E){var p={type:0,cancel:!1,key:void 0},v=(w.shiftKey?1:0)|(w.altKey?2:0)|(w.ctrlKey?4:0)|(w.metaKey?8:0);switch(w.keyCode){case 0:"UIKeyInputUpArrow"===w.key?p.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A":"UIKeyInputLeftArrow"===w.key?p.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D":"UIKeyInputRightArrow"===w.key?p.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C":"UIKeyInputDownArrow"===w.key&&(p.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:if(w.shiftKey){p.key=m.C0.BS;break}if(w.altKey){p.key=m.C0.ESC+m.C0.DEL;break}p.key=m.C0.DEL;break;case 9:if(w.shiftKey){p.key=m.C0.ESC+"[Z";break}p.key=m.C0.HT,p.cancel=!0;break;case 13:p.key=w.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,p.cancel=!0;break;case 27:p.key=m.C0.ESC,w.altKey&&(p.key=m.C0.ESC+m.C0.ESC),p.cancel=!0;break;case 37:if(w.metaKey)break;v?(p.key=m.C0.ESC+"[1;"+(v+1)+"D",p.key===m.C0.ESC+"[1;3D"&&(p.key=m.C0.ESC+(I?"b":"[1;5D"))):p.key=y?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(w.metaKey)break;v?(p.key=m.C0.ESC+"[1;"+(v+1)+"C",p.key===m.C0.ESC+"[1;3C"&&(p.key=m.C0.ESC+(I?"f":"[1;5C"))):p.key=y?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(w.metaKey)break;v?(p.key=m.C0.ESC+"[1;"+(v+1)+"A",I||p.key!==m.C0.ESC+"[1;3A"||(p.key=m.C0.ESC+"[1;5A")):p.key=y?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(w.metaKey)break;v?(p.key=m.C0.ESC+"[1;"+(v+1)+"B",I||p.key!==m.C0.ESC+"[1;3B"||(p.key=m.C0.ESC+"[1;5B")):p.key=y?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:w.shiftKey||w.ctrlKey||(p.key=m.C0.ESC+"[2~");break;case 46:p.key=v?m.C0.ESC+"[3;"+(v+1)+"~":m.C0.ESC+"[3~";break;case 36:p.key=v?m.C0.ESC+"[1;"+(v+1)+"H":y?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:p.key=v?m.C0.ESC+"[1;"+(v+1)+"F":y?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:w.shiftKey?p.type=2:p.key=m.C0.ESC+"[5~";break;case 34:w.shiftKey?p.type=3:p.key=m.C0.ESC+"[6~";break;case 112:p.key=v?m.C0.ESC+"[1;"+(v+1)+"P":m.C0.ESC+"OP";break;case 113:p.key=v?m.C0.ESC+"[1;"+(v+1)+"Q":m.C0.ESC+"OQ";break;case 114:p.key=v?m.C0.ESC+"[1;"+(v+1)+"R":m.C0.ESC+"OR";break;case 115:p.key=v?m.C0.ESC+"[1;"+(v+1)+"S":m.C0.ESC+"OS";break;case 116:p.key=v?m.C0.ESC+"[15;"+(v+1)+"~":m.C0.ESC+"[15~";break;case 117:p.key=v?m.C0.ESC+"[17;"+(v+1)+"~":m.C0.ESC+"[17~";break;case 118:p.key=v?m.C0.ESC+"[18;"+(v+1)+"~":m.C0.ESC+"[18~";break;case 119:p.key=v?m.C0.ESC+"[19;"+(v+1)+"~":m.C0.ESC+"[19~";break;case 120:p.key=v?m.C0.ESC+"[20;"+(v+1)+"~":m.C0.ESC+"[20~";break;case 121:p.key=v?m.C0.ESC+"[21;"+(v+1)+"~":m.C0.ESC+"[21~";break;case 122:p.key=v?m.C0.ESC+"[23;"+(v+1)+"~":m.C0.ESC+"[23~";break;case 123:p.key=v?m.C0.ESC+"[24;"+(v+1)+"~":m.C0.ESC+"[24~";break;default:if(!w.ctrlKey||w.shiftKey||w.altKey||w.metaKey)if(I&&!E||!w.altKey||w.metaKey)!I||w.altKey||w.ctrlKey||w.shiftKey||!w.metaKey?w.key&&!w.ctrlKey&&!w.altKey&&!w.metaKey&&w.keyCode>=48&&1===w.key.length?p.key=w.key:w.key&&w.ctrlKey&&"_"===w.key&&(p.key=m.C0.US):65===w.keyCode&&(p.type=1);else{var b=S[w.keyCode],f=null==b?void 0:b[w.shiftKey?1:0];f?p.key=m.C0.ESC+f:w.keyCode>=65&&w.keyCode<=90&&(p.key=m.C0.ESC+String.fromCharCode(w.ctrlKey?w.keyCode-64:w.keyCode+32))}else w.keyCode>=65&&w.keyCode<=90?p.key=String.fromCharCode(w.keyCode-64):32===w.keyCode?p.key=m.C0.NUL:w.keyCode>=51&&w.keyCode<=55?p.key=String.fromCharCode(w.keyCode-51+27):56===w.keyCode?p.key=m.C0.DEL:219===w.keyCode?p.key=m.C0.ESC:220===w.keyCode?p.key=m.C0.FS:221===w.keyCode&&(p.key=m.C0.GS)}return p}},482:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Utf8ToUtf32=_.StringToUtf32=_.utf32ToString=_.stringFromCodePoint=void 0,_.stringFromCodePoint=function(S){return S>65535?(S-=65536,String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):String.fromCharCode(S)},_.utf32ToString=function(S,w,y){void 0===w&&(w=0),void 0===y&&(y=S.length);for(var I="",E=w;E<y;++E){var p=S[E];p>65535?(p-=65536,I+=String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):I+=String.fromCharCode(p)}return I};var A=function(){function S(){this._interim=0}return S.prototype.clear=function(){this._interim=0},S.prototype.decode=function(w,y){var I=w.length;if(!I)return 0;var E=0,p=0;this._interim&&(56320<=(f=w.charCodeAt(p++))&&f<=57343?y[E++]=1024*(this._interim-55296)+f-56320+65536:(y[E++]=this._interim,y[E++]=f),this._interim=0);for(var v=p;v<I;++v){var b=w.charCodeAt(v);if(55296<=b&&b<=56319){if(++v>=I)return this._interim=b,E;var f;56320<=(f=w.charCodeAt(v))&&f<=57343?y[E++]=1024*(b-55296)+f-56320+65536:(y[E++]=b,y[E++]=f)}else 65279!==b&&(y[E++]=b)}return E},S}();_.StringToUtf32=A;var m=function(){function S(){this.interim=new Uint8Array(3)}return S.prototype.clear=function(){this.interim.fill(0)},S.prototype.decode=function(w,y){var I=w.length;if(!I)return 0;var E,p,v,b,f=0,c=0,a=0;if(this.interim[0]){var l=!1,d=this.interim[0];d&=192==(224&d)?31:224==(240&d)?15:7;for(var g=0,D=void 0;(D=63&this.interim[++g])&&g<4;)d<<=6,d|=D;for(var M=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,O=M-g;a<O;){if(a>=I)return 0;if(128!=(192&(D=w[a++]))){a--,l=!0;break}this.interim[g++]=D,d<<=6,d|=63&D}l||(2===M?d<128?a--:y[f++]=d:3===M?d<2048||d>=55296&&d<=57343||65279===d||(y[f++]=d):d<65536||d>1114111||(y[f++]=d)),this.interim.fill(0)}for(var R=I-4,T=a;T<I;){for(;!(!(T<R)||128&(E=w[T])||128&(p=w[T+1])||128&(v=w[T+2])||128&(b=w[T+3]));)y[f++]=E,y[f++]=p,y[f++]=v,y[f++]=b,T+=4;if((E=w[T++])<128)y[f++]=E;else if(192==(224&E)){if(T>=I)return this.interim[0]=E,f;if(128!=(192&(p=w[T++]))){T--;continue}if((c=(31&E)<<6|63&p)<128){T--;continue}y[f++]=c}else if(224==(240&E)){if(T>=I)return this.interim[0]=E,f;if(128!=(192&(p=w[T++]))){T--;continue}if(T>=I)return this.interim[0]=E,this.interim[1]=p,f;if(128!=(192&(v=w[T++]))){T--;continue}if((c=(15&E)<<12|(63&p)<<6|63&v)<2048||c>=55296&&c<=57343||65279===c)continue;y[f++]=c}else if(240==(248&E)){if(T>=I)return this.interim[0]=E,f;if(128!=(192&(p=w[T++]))){T--;continue}if(T>=I)return this.interim[0]=E,this.interim[1]=p,f;if(128!=(192&(v=w[T++]))){T--;continue}if(T>=I)return this.interim[0]=E,this.interim[1]=p,this.interim[2]=v,f;if(128!=(192&(b=w[T++]))){T--;continue}if((c=(7&E)<<18|(63&p)<<12|(63&v)<<6|63&b)<65536||c>1114111)continue;y[f++]=c}}return f},S}();_.Utf8ToUtf32=m},225:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UnicodeV6=void 0;var m,S=A(8273),w=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],y=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],I=function(){function E(){if(this.version="6",!m){m=new Uint8Array(65536),(0,S.fill)(m,1),m[0]=0,(0,S.fill)(m,0,1,32),(0,S.fill)(m,0,127,160),(0,S.fill)(m,2,4352,4448),m[9001]=2,m[9002]=2,(0,S.fill)(m,2,11904,42192),m[12351]=1,(0,S.fill)(m,2,44032,55204),(0,S.fill)(m,2,63744,64256),(0,S.fill)(m,2,65040,65050),(0,S.fill)(m,2,65072,65136),(0,S.fill)(m,2,65280,65377),(0,S.fill)(m,2,65504,65511);for(var p=0;p<w.length;++p)(0,S.fill)(m,0,w[p][0],w[p][1]+1)}}return E.prototype.wcwidth=function(p){return p<32?0:p<127?1:p<65536?m[p]:function(v,b){var f,c=0,a=b.length-1;if(v<b[0][0]||v>b[a][1])return!1;for(;a>=c;)if(v>b[f=c+a>>1][1])c=f+1;else{if(!(v<b[f][0]))return!0;a=f-1}return!1}(p,y)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1},E}();_.UnicodeV6=I},5981:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.WriteBuffer=void 0;var A="undefined"==typeof queueMicrotask?function(S){Promise.resolve().then(S)}:queueMicrotask,m=function(){function S(w){this._action=w,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return S.prototype.writeSync=function(w,y){if(void 0!==y&&this._syncCalls>y)this._syncCalls=0;else if(this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var I;for(this._isSyncWriting=!0;I=this._writeBuffer.shift();){this._action(I);var E=this._callbacks.shift();E&&E()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},S.prototype.write=function(w,y){var I=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return I._innerWrite()})),this._pendingData+=w.length,this._writeBuffer.push(w),this._callbacks.push(y)},S.prototype._innerWrite=function(w,y){var I=this;void 0===w&&(w=0),void 0===y&&(y=!0);for(var E=w||Date.now();this._writeBuffer.length>this._bufferOffset;){var p=this._writeBuffer[this._bufferOffset],v=this._action(p,y);if(v)return void v.catch(function(f){return A(function(){throw f}),Promise.resolve(!1)}).then(function(f){return Date.now()-E>=12?setTimeout(function(){return I._innerWrite(0,f)}):I._innerWrite(E,f)});var b=this._callbacks[this._bufferOffset];if(b&&b(),this._bufferOffset++,this._pendingData-=p.length,Date.now()-E>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return I._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},S}();_.WriteBuffer=m},5941:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.toRgbString=_.parseColor=void 0;var A=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function S(w,y){var I=w.toString(16),E=I.length<2?"0"+I:I;switch(y){case 4:return I[0];case 8:return E;case 12:return(E+E).slice(0,3);default:return E+E}}_.parseColor=function(w){if(w){var y=w.toLowerCase();if(0===y.indexOf("rgb:")){y=y.slice(4);var I=A.exec(y);if(I){var E=I[1]?15:I[4]?255:I[7]?4095:65535;return[Math.round(parseInt(I[1]||I[4]||I[7]||I[10],16)/E*255),Math.round(parseInt(I[2]||I[5]||I[8]||I[11],16)/E*255),Math.round(parseInt(I[3]||I[6]||I[9]||I[12],16)/E*255)]}}else if(0===y.indexOf("#")&&(y=y.slice(1),m.exec(y)&&[3,6,9,12].includes(y.length))){for(var p=y.length/3,v=[0,0,0],b=0;b<3;++b){var f=parseInt(y.slice(p*b,p*b+p),16);v[b]=1===p?f<<4:2===p?f:3===p?f>>4:f>>8}return v}}},_.toRgbString=function(w,y){void 0===y&&(y=16);var E=w[1],p=w[2];return"rgb:"+S(w[0],y)+"/"+S(E,y)+"/"+S(p,y)}},5770:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.PAYLOAD_LIMIT=void 0,_.PAYLOAD_LIMIT=1e7},6351:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.DcsHandler=_.DcsParser=void 0;var m=A(482),S=A(8742),w=A(5770),y=[],I=function(){function v(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return v.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=y},v.prototype.registerHandler=function(b,f){void 0===this._handlers[b]&&(this._handlers[b]=[]);var c=this._handlers[b];return c.push(f),{dispose:function(){var a=c.indexOf(f);-1!==a&&c.splice(a,1)}}},v.prototype.clearHandler=function(b){this._handlers[b]&&delete this._handlers[b]},v.prototype.setHandlerFallback=function(b){this._handlerFb=b},v.prototype.reset=function(){if(this._active.length)for(var b=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;b>=0;--b)this._active[b].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0},v.prototype.hook=function(b,f){if(this.reset(),this._ident=b,this._active=this._handlers[b]||y,this._active.length)for(var c=this._active.length-1;c>=0;c--)this._active[c].hook(f);else this._handlerFb(this._ident,"HOOK",f)},v.prototype.put=function(b,f,c){if(this._active.length)for(var a=this._active.length-1;a>=0;a--)this._active[a].put(b,f,c);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(b,f,c))},v.prototype.unhook=function(b,f){if(void 0===f&&(f=!0),this._active.length){var c=!1,a=this._active.length-1,l=!1;if(this._stack.paused&&(a=this._stack.loopPosition-1,c=f,l=this._stack.fallThrough,this._stack.paused=!1),!l&&!1===c){for(;a>=0&&!0!==(c=this._active[a].unhook(b));a--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!1,c;a--}for(;a>=0;a--)if((c=this._active[a].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=a,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",b);this._active=y,this._ident=0},v}();_.DcsParser=I;var E=new S.Params;E.addParam(0);var p=function(){function v(b){this._handler=b,this._data="",this._params=E,this._hitLimit=!1}return v.prototype.hook=function(b){this._params=b.length>1||b.params[0]?b.clone():E,this._data="",this._hitLimit=!1},v.prototype.put=function(b,f,c){this._hitLimit||(this._data+=(0,m.utf32ToString)(b,f,c),this._data.length>w.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},v.prototype.unhook=function(b){var f=this,c=!1;if(this._hitLimit)c=!1;else if(b&&(c=this._handler(this._data,this._params))instanceof Promise)return c.then(function(a){return f._params=E,f._data="",f._hitLimit=!1,a});return this._params=E,this._data="",this._hitLimit=!1,c},v}();_.DcsHandler=p},2015:function(J,_,A){var m,S=this&&this.__extends||(m=function(c,a){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(l[g]=d[g])})(c,a)},function(c,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function l(){this.constructor=c}m(c,a),c.prototype=null===a?Object.create(a):(l.prototype=a.prototype,new l)});Object.defineProperty(_,"__esModule",{value:!0}),_.EscapeSequenceParser=_.VT500_TRANSITION_TABLE=_.TransitionTable=void 0;var w=A(844),y=A(8273),I=A(8742),E=A(6242),p=A(6351),v=function(){function c(a){this.table=new Uint8Array(a)}return c.prototype.setDefault=function(a,l){(0,y.fill)(this.table,a<<4|l)},c.prototype.add=function(a,l,d,g){this.table[l<<8|a]=d<<4|g},c.prototype.addMany=function(a,l,d,g){for(var D=0;D<a.length;D++)this.table[l<<8|a[D]]=d<<4|g},c}();_.TransitionTable=v;var b=160;_.VT500_TRANSITION_TABLE=function(){var c=new v(4095),a=Array.apply(null,Array(256)).map(function(O,R){return R}),l=function(O,R){return a.slice(O,R)},d=l(32,127),g=l(0,24);g.push(25),g.push.apply(g,l(28,32));var D,M=l(0,14);for(D in c.setDefault(1,0),c.addMany(d,0,2,0),M)c.addMany([24,26,153,154],D,3,0),c.addMany(l(128,144),D,3,0),c.addMany(l(144,152),D,3,0),c.add(156,D,0,0),c.add(27,D,11,1),c.add(157,D,4,8),c.addMany([152,158,159],D,0,7),c.add(155,D,11,3),c.add(144,D,11,9);return c.addMany(g,0,3,0),c.addMany(g,1,3,1),c.add(127,1,0,1),c.addMany(g,8,0,8),c.addMany(g,3,3,3),c.add(127,3,0,3),c.addMany(g,4,3,4),c.add(127,4,0,4),c.addMany(g,6,3,6),c.addMany(g,5,3,5),c.add(127,5,0,5),c.addMany(g,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(d,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(l(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(d,7,0,7),c.addMany(g,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(l(64,127),3,7,0),c.addMany(l(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(l(48,60),4,8,4),c.addMany(l(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(l(32,64),6,0,6),c.add(127,6,0,6),c.addMany(l(64,127),6,0,0),c.addMany(l(32,48),3,9,5),c.addMany(l(32,48),5,9,5),c.addMany(l(48,64),5,0,6),c.addMany(l(64,127),5,7,0),c.addMany(l(32,48),4,9,5),c.addMany(l(32,48),1,9,2),c.addMany(l(32,48),2,9,2),c.addMany(l(48,127),2,10,0),c.addMany(l(48,80),1,10,0),c.addMany(l(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(l(96,127),1,10,0),c.add(80,1,11,9),c.addMany(g,9,0,9),c.add(127,9,0,9),c.addMany(l(28,32),9,0,9),c.addMany(l(32,48),9,9,12),c.addMany(l(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(g,11,0,11),c.addMany(l(32,128),11,0,11),c.addMany(l(28,32),11,0,11),c.addMany(g,10,0,10),c.add(127,10,0,10),c.addMany(l(28,32),10,0,10),c.addMany(l(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(l(32,48),10,9,12),c.addMany(g,12,0,12),c.add(127,12,0,12),c.addMany(l(28,32),12,0,12),c.addMany(l(32,48),12,9,12),c.addMany(l(48,64),12,0,11),c.addMany(l(64,127),12,12,13),c.addMany(l(64,127),10,12,13),c.addMany(l(64,127),9,12,13),c.addMany(g,13,13,13),c.addMany(d,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(b,0,2,0),c.add(b,8,5,8),c.add(b,6,0,6),c.add(b,11,0,11),c.add(b,13,13,13),c}();var f=function(c){function a(l){void 0===l&&(l=_.VT500_TRANSITION_TABLE);var d=c.call(this)||this;return d._transitions=l,d._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},d.initialState=0,d.currentState=d.initialState,d._params=new I.Params,d._params.addParam(0),d._collect=0,d.precedingCodepoint=0,d._printHandlerFb=function(g,D,M){},d._executeHandlerFb=function(g){},d._csiHandlerFb=function(g,D){},d._escHandlerFb=function(g){},d._errorHandlerFb=function(g){return g},d._printHandler=d._printHandlerFb,d._executeHandlers=Object.create(null),d._csiHandlers=Object.create(null),d._escHandlers=Object.create(null),d._oscParser=new E.OscParser,d._dcsParser=new p.DcsParser,d._errorHandler=d._errorHandlerFb,d.registerEscHandler({final:"\\"},function(){return!0}),d}return S(a,c),a.prototype._identifier=function(l,d){void 0===d&&(d=[64,126]);var g=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if((g=l.prefix.charCodeAt(0))&&60>g||g>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var D=0;D<l.intermediates.length;++D){var M=l.intermediates.charCodeAt(D);if(32>M||M>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");g<<=8,g|=M}}if(1!==l.final.length)throw new Error("final must be a single byte");var O=l.final.charCodeAt(0);if(d[0]>O||O>d[1])throw new Error("final must be in range "+d[0]+" .. "+d[1]);return(g<<=8)|O},a.prototype.identToString=function(l){for(var d=[];l;)d.push(String.fromCharCode(255&l)),l>>=8;return d.reverse().join("")},a.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},a.prototype.setPrintHandler=function(l){this._printHandler=l},a.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},a.prototype.registerEscHandler=function(l,d){var g=this._identifier(l,[48,126]);void 0===this._escHandlers[g]&&(this._escHandlers[g]=[]);var D=this._escHandlers[g];return D.push(d),{dispose:function(){var M=D.indexOf(d);-1!==M&&D.splice(M,1)}}},a.prototype.clearEscHandler=function(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]},a.prototype.setEscHandlerFallback=function(l){this._escHandlerFb=l},a.prototype.setExecuteHandler=function(l,d){this._executeHandlers[l.charCodeAt(0)]=d},a.prototype.clearExecuteHandler=function(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]},a.prototype.setExecuteHandlerFallback=function(l){this._executeHandlerFb=l},a.prototype.registerCsiHandler=function(l,d){var g=this._identifier(l);void 0===this._csiHandlers[g]&&(this._csiHandlers[g]=[]);var D=this._csiHandlers[g];return D.push(d),{dispose:function(){var M=D.indexOf(d);-1!==M&&D.splice(M,1)}}},a.prototype.clearCsiHandler=function(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]},a.prototype.setCsiHandlerFallback=function(l){this._csiHandlerFb=l},a.prototype.registerDcsHandler=function(l,d){return this._dcsParser.registerHandler(this._identifier(l),d)},a.prototype.clearDcsHandler=function(l){this._dcsParser.clearHandler(this._identifier(l))},a.prototype.setDcsHandlerFallback=function(l){this._dcsParser.setHandlerFallback(l)},a.prototype.registerOscHandler=function(l,d){return this._oscParser.registerHandler(l,d)},a.prototype.clearOscHandler=function(l){this._oscParser.clearHandler(l)},a.prototype.setOscHandlerFallback=function(l){this._oscParser.setHandlerFallback(l)},a.prototype.setErrorHandler=function(l){this._errorHandler=l},a.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},a.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])},a.prototype._preserveStack=function(l,d,g,D,M){this._parseStack.state=l,this._parseStack.handlers=d,this._parseStack.handlerPos=g,this._parseStack.transition=D,this._parseStack.chunkPos=M},a.prototype.parse=function(l,d,g){var D,M=0,O=0,R=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,R=this._parseStack.chunkPos+1;else{if(void 0===g||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var T=this._parseStack.handlers,L=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===g&&L>-1)for(;L>=0&&!0!==(D=T[L](this._params));L--)if(D instanceof Promise)return this._parseStack.handlerPos=L,D;this._parseStack.handlers=[];break;case 4:if(!1===g&&L>-1)for(;L>=0&&!0!==(D=T[L]());L--)if(D instanceof Promise)return this._parseStack.handlerPos=L,D;this._parseStack.handlers=[];break;case 6:if(D=this._dcsParser.unhook(24!==(M=l[this._parseStack.chunkPos])&&26!==M,g))return D;27===M&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(D=this._oscParser.end(24!==(M=l[this._parseStack.chunkPos])&&26!==M,g))return D;27===M&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,R=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var B=R;B<d;++B){switch((O=this._transitions.table[this.currentState<<8|((M=l[B])<160?M:b)])>>4){case 2:for(var F=B+1;;++F){if(F>=d||(M=l[F])<32||M>126&&M<b){this._printHandler(l,B,F),B=F-1;break}if(++F>=d||(M=l[F])<32||M>126&&M<b){this._printHandler(l,B,F),B=F-1;break}if(++F>=d||(M=l[F])<32||M>126&&M<b){this._printHandler(l,B,F),B=F-1;break}if(++F>=d||(M=l[F])<32||M>126&&M<b){this._printHandler(l,B,F),B=F-1;break}}break;case 3:this._executeHandlers[M]?this._executeHandlers[M]():this._executeHandlerFb(M),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:B,code:M,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var G=(T=this._csiHandlers[this._collect<<8|M])?T.length-1:-1;G>=0&&!0!==(D=T[G](this._params));G--)if(D instanceof Promise)return this._preserveStack(3,T,G,O,B),D;G<0&&this._csiHandlerFb(this._collect<<8|M,this._params),this.precedingCodepoint=0;break;case 8:do{switch(M){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(M-48)}}while(++B<d&&(M=l[B])>47&&M<60);B--;break;case 9:this._collect<<=8,this._collect|=M;break;case 10:for(var U=this._escHandlers[this._collect<<8|M],k=U?U.length-1:-1;k>=0&&!0!==(D=U[k]());k--)if(D instanceof Promise)return this._preserveStack(4,U,k,O,B),D;k<0&&this._escHandlerFb(this._collect<<8|M),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|M,this._params);break;case 13:for(var H=B+1;;++H)if(H>=d||24===(M=l[H])||26===M||27===M||M>127&&M<b){this._dcsParser.put(l,B,H),B=H-1;break}break;case 14:if(D=this._dcsParser.unhook(24!==M&&26!==M))return this._preserveStack(6,[],0,O,B),D;27===M&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var $=B+1;;$++)if($>=d||(M=l[$])<32||M>127&&M<b){this._oscParser.put(l,B,$),B=$-1;break}break;case 6:if(D=this._oscParser.end(24!==M&&26!==M))return this._preserveStack(5,[],0,O,B),D;27===M&&(O|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&O}},a}(w.Disposable);_.EscapeSequenceParser=f},6242:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.OscHandler=_.OscParser=void 0;var m=A(5770),S=A(482),w=[],y=function(){function E(){this._state=0,this._active=w,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return E.prototype.registerHandler=function(p,v){void 0===this._handlers[p]&&(this._handlers[p]=[]);var b=this._handlers[p];return b.push(v),{dispose:function(){var f=b.indexOf(v);-1!==f&&b.splice(f,1)}}},E.prototype.clearHandler=function(p){this._handlers[p]&&delete this._handlers[p]},E.prototype.setHandlerFallback=function(p){this._handlerFb=p},E.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=w},E.prototype.reset=function(){if(2===this._state)for(var p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=w,this._id=-1,this._state=0},E.prototype._start=function(){if(this._active=this._handlers[this._id]||w,this._active.length)for(var p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")},E.prototype._put=function(p,v,b){if(this._active.length)for(var f=this._active.length-1;f>=0;f--)this._active[f].put(p,v,b);else this._handlerFb(this._id,"PUT",(0,S.utf32ToString)(p,v,b))},E.prototype.start=function(){this.reset(),this._state=1},E.prototype.put=function(p,v,b){if(3!==this._state){if(1===this._state)for(;v<b;){var f=p[v++];if(59===f){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+f-48}2===this._state&&b-v>0&&this._put(p,v,b)}},E.prototype.end=function(p,v){if(void 0===v&&(v=!0),0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){var b=!1,f=this._active.length-1,c=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,b=v,c=this._stack.fallThrough,this._stack.paused=!1),!c&&!1===b){for(;f>=0&&!0!==(b=this._active[f].end(p));f--)if(b instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,b;f--}for(;f>=0;f--)if((b=this._active[f].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,b}else this._handlerFb(this._id,"END",p);this._active=w,this._id=-1,this._state=0}},E}();_.OscParser=y;var I=function(){function E(p){this._handler=p,this._data="",this._hitLimit=!1}return E.prototype.start=function(){this._data="",this._hitLimit=!1},E.prototype.put=function(p,v,b){this._hitLimit||(this._data+=(0,S.utf32ToString)(p,v,b),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},E.prototype.end=function(p){var v=this,b=!1;if(this._hitLimit)b=!1;else if(p&&(b=this._handler(this._data))instanceof Promise)return b.then(function(f){return v._data="",v._hitLimit=!1,f});return this._data="",this._hitLimit=!1,b},E}();_.OscHandler=I},8742:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.Params=void 0;var A=2147483647,m=function(){function S(w,y){if(void 0===w&&(w=32),void 0===y&&(y=32),this.maxLength=w,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(w),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(w),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return S.fromArray=function(w){var y=new S;if(!w.length)return y;for(var I=Array.isArray(w[0])?1:0;I<w.length;++I){var E=w[I];if(Array.isArray(E))for(var p=0;p<E.length;++p)y.addSubParam(E[p]);else y.addParam(E)}return y},S.prototype.clone=function(){var w=new S(this.maxLength,this.maxSubParamsLength);return w.params.set(this.params),w.length=this.length,w._subParams.set(this._subParams),w._subParamsLength=this._subParamsLength,w._subParamsIdx.set(this._subParamsIdx),w._rejectDigits=this._rejectDigits,w._rejectSubDigits=this._rejectSubDigits,w._digitIsSub=this._digitIsSub,w},S.prototype.toArray=function(){for(var w=[],y=0;y<this.length;++y){w.push(this.params[y]);var I=this._subParamsIdx[y]>>8,E=255&this._subParamsIdx[y];E-I>0&&w.push(Array.prototype.slice.call(this._subParams,I,E))}return w},S.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},S.prototype.addParam=function(w){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(w<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=w>A?A:w}},S.prototype.addSubParam=function(w){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(w<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=w>A?A:w,this._subParamsIdx[this.length-1]++}},S.prototype.hasSubParams=function(w){return(255&this._subParamsIdx[w])-(this._subParamsIdx[w]>>8)>0},S.prototype.getSubParams=function(w){var y=this._subParamsIdx[w]>>8,I=255&this._subParamsIdx[w];return I-y>0?this._subParams.subarray(y,I):null},S.prototype.getSubParamsAll=function(){for(var w={},y=0;y<this.length;++y){var I=this._subParamsIdx[y]>>8,E=255&this._subParamsIdx[y];E-I>0&&(w[y]=this._subParams.slice(I,E))}return w},S.prototype.addDigit=function(w){var y;if(!(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var I=this._digitIsSub?this._subParams:this.params,E=I[y-1];I[y-1]=~E?Math.min(10*E+w,A):w}},S}();_.Params=m},5741:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.AddonManager=void 0;var A=function(){function m(){this._addons=[]}return m.prototype.dispose=function(){for(var S=this._addons.length-1;S>=0;S--)this._addons[S].instance.dispose()},m.prototype.loadAddon=function(S,w){var y=this,I={instance:w,dispose:w.dispose,isDisposed:!1};this._addons.push(I),w.dispose=function(){return y._wrappedAddonDispose(I)},w.activate(S)},m.prototype._wrappedAddonDispose=function(S){if(!S.isDisposed){for(var w=-1,y=0;y<this._addons.length;y++)if(this._addons[y]===S){w=y;break}if(-1===w)throw new Error("Could not dispose an addon that has not been loaded");S.isDisposed=!0,S.dispose.apply(S.instance),this._addons.splice(w,1)}},m}();_.AddonManager=A},8771:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BufferApiView=void 0;var m=A(3785),S=A(511),w=function(){function y(I,E){this._buffer=I,this.type=E}return y.prototype.init=function(I){return this._buffer=I,this},Object.defineProperty(y.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),y.prototype.getLine=function(I){var E=this._buffer.lines.get(I);if(E)return new m.BufferLineApiView(E)},y.prototype.getNullCell=function(){return new S.CellData},y}();_.BufferApiView=w},3785:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BufferLineApiView=void 0;var m=A(511),S=function(){function w(y){this._line=y}return Object.defineProperty(w.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),w.prototype.getCell=function(y,I){if(!(y<0||y>=this._line.length))return I?(this._line.loadCell(y,I),I):this._line.loadCell(y,new m.CellData)},w.prototype.translateToString=function(y,I,E){return this._line.translateToString(y,I,E)},w}();_.BufferLineApiView=S},8285:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.BufferNamespaceApi=void 0;var m=A(8771),S=A(8460),w=function(){function y(I){var E=this;this._core=I,this._onBufferChange=new S.EventEmitter,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return E._onBufferChange.fire(E.active)})}return Object.defineProperty(y.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),y}();_.BufferNamespaceApi=w},7975:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.ParserApi=void 0;var A=function(){function m(S){this._core=S}return m.prototype.registerCsiHandler=function(S,w){return this._core.registerCsiHandler(S,function(y){return w(y.toArray())})},m.prototype.addCsiHandler=function(S,w){return this.registerCsiHandler(S,w)},m.prototype.registerDcsHandler=function(S,w){return this._core.registerDcsHandler(S,function(y,I){return w(y,I.toArray())})},m.prototype.addDcsHandler=function(S,w){return this.registerDcsHandler(S,w)},m.prototype.registerEscHandler=function(S,w){return this._core.registerEscHandler(S,w)},m.prototype.addEscHandler=function(S,w){return this.registerEscHandler(S,w)},m.prototype.registerOscHandler=function(S,w){return this._core.registerOscHandler(S,w)},m.prototype.addOscHandler=function(S,w){return this.registerOscHandler(S,w)},m}();_.ParserApi=A},7090:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UnicodeApi=void 0;var A=function(){function m(S){this._core=S}return m.prototype.register=function(S){this._core.unicodeService.register(S)},Object.defineProperty(m.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(S){this._core.unicodeService.activeVersion=S},enumerable:!1,configurable:!0}),m}();_.UnicodeApi=A},744:function(J,_,A){var m,S=this&&this.__extends||(m=function(f,c){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(a[d]=l[d])})(f,c)},function(f,c){if("function"!=typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function a(){this.constructor=f}m(f,c),f.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)}),w=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},y=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.BufferService=_.MINIMUM_ROWS=_.MINIMUM_COLS=void 0;var I=A(2585),E=A(5295),p=A(8460),v=A(844);_.MINIMUM_COLS=2,_.MINIMUM_ROWS=1;var b=function(f){function c(a){var l=f.call(this)||this;return l._optionsService=a,l.isUserScrolling=!1,l._onResize=new p.EventEmitter,l._onScroll=new p.EventEmitter,l.cols=Math.max(a.rawOptions.cols||0,_.MINIMUM_COLS),l.rows=Math.max(a.rawOptions.rows||0,_.MINIMUM_ROWS),l.buffers=new E.BufferSet(a,l),l}return S(c,f),Object.defineProperty(c.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),c.prototype.dispose=function(){f.prototype.dispose.call(this),this.buffers.dispose()},c.prototype.resize=function(a,l){this.cols=a,this.rows=l,this.buffers.resize(a,l),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:a,rows:l})},c.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},c.prototype.scroll=function(a,l){void 0===l&&(l=!1);var d,g=this.buffer;(d=this._cachedBlankLine)&&d.length===this.cols&&d.getFg(0)===a.fg&&d.getBg(0)===a.bg||(d=g.getBlankLine(a,l),this._cachedBlankLine=d),d.isWrapped=l;var D=g.ybase+g.scrollTop,M=g.ybase+g.scrollBottom;if(0===g.scrollTop){var O=g.lines.isFull;M===g.lines.length-1?O?g.lines.recycle().copyFrom(d):g.lines.push(d.clone()):g.lines.splice(M+1,0,d.clone()),O?this.isUserScrolling&&(g.ydisp=Math.max(g.ydisp-1,0)):(g.ybase++,this.isUserScrolling||g.ydisp++)}else g.lines.shiftElements(D+1,M-D+1-1,-1),g.lines.set(M,d.clone());this.isUserScrolling||(g.ydisp=g.ybase),this._onScroll.fire(g.ydisp)},c.prototype.scrollLines=function(a,l,d){var g=this.buffer;if(a<0){if(0===g.ydisp)return;this.isUserScrolling=!0}else a+g.ydisp>=g.ybase&&(this.isUserScrolling=!1);var D=g.ydisp;g.ydisp=Math.max(Math.min(g.ydisp+a,g.ybase),0),D!==g.ydisp&&(l||this._onScroll.fire(g.ydisp))},c.prototype.scrollPages=function(a){this.scrollLines(a*(this.rows-1))},c.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},c.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},c.prototype.scrollToLine=function(a){var l=a-this.buffer.ydisp;0!==l&&this.scrollLines(l)},w([y(0,I.IOptionsService)],c)}(v.Disposable);_.BufferService=b},7994:(J,_)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.CharsetService=void 0;var A=function(){function m(){this.glevel=0,this._charsets=[]}return m.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},m.prototype.setgLevel=function(S){this.glevel=S,this.charset=this._charsets[S]},m.prototype.setgCharset=function(S,w){this._charsets[S]=w,this.glevel===S&&(this.charset=w)},m}();_.CharsetService=A},1753:function(J,_,A){var m=this&&this.__decorate||function(f,c,a,l){var d,g=arguments.length,D=g<3?c:null===l?l=Object.getOwnPropertyDescriptor(c,a):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)D=Reflect.decorate(f,c,a,l);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(D=(g<3?d(D):g>3?d(c,a,D):d(c,a))||D);return g>3&&D&&Object.defineProperty(c,a,D),D},S=this&&this.__param||function(f,c){return function(a,l){c(a,l,f)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CoreMouseService=void 0;var w=A(2585),y=A(8460),I={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(f){return 4!==f.button&&1===f.action&&(f.ctrl=!1,f.alt=!1,f.shift=!1,!0)}},VT200:{events:19,restrict:function(f){return 32!==f.action}},DRAG:{events:23,restrict:function(f){return 32!==f.action||3!==f.button}},ANY:{events:31,restrict:function(f){return!0}}};function E(f,c){var a=(f.ctrl?16:0)|(f.shift?4:0)|(f.alt?8:0);return 4===f.button?(a|=64,a|=f.action):(a|=3&f.button,4&f.button&&(a|=64),8&f.button&&(a|=128),32===f.action?a|=32:0!==f.action||c||(a|=3)),a}var p=String.fromCharCode,v={DEFAULT:function(f){var c=[E(f,!1)+32,f.col+32,f.row+32];return c[0]>255||c[1]>255||c[2]>255?"":"\x1b[M"+p(c[0])+p(c[1])+p(c[2])},SGR:function(f){var c=0===f.action&&4!==f.button?"m":"M";return"\x1b[<"+E(f,!0)+";"+f.col+";"+f.row+c}},b=function(){function f(c,a){this._bufferService=c,this._coreService=a,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new y.EventEmitter,this._lastEvent=null;for(var l=0,d=Object.keys(I);l<d.length;l++){var g=d[l];this.addProtocol(g,I[g])}for(var D=0,M=Object.keys(v);D<M.length;D++){var O=M[D];this.addEncoding(O,v[O])}this.reset()}return f.prototype.addProtocol=function(c,a){this._protocols[c]=a},f.prototype.addEncoding=function(c,a){this._encodings[c]=a},Object.defineProperty(f.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(c){if(!this._protocols[c])throw new Error('unknown protocol "'+c+'"');this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(c){if(!this._encodings[c])throw new Error('unknown encoding "'+c+'"');this._activeEncoding=c},enumerable:!1,configurable:!0}),f.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(f.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),f.prototype.triggerMouseEvent=function(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||4===c.button&&32===c.action||3===c.button&&32!==c.action||4!==c.button&&(2===c.action||3===c.action)||(c.col++,c.row++,32===c.action&&this._lastEvent&&this._compareEvents(this._lastEvent,c))||!this._protocols[this._activeProtocol].restrict(c))return!1;var a=this._encodings[this._activeEncoding](c);return a&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(a):this._coreService.triggerDataEvent(a,!0)),this._lastEvent=c,!0},f.prototype.explainEvents=function(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}},f.prototype._compareEvents=function(c,a){return c.col===a.col&&c.row===a.row&&c.button===a.button&&c.action===a.action&&c.ctrl===a.ctrl&&c.alt===a.alt&&c.shift===a.shift},m([S(0,w.IBufferService),S(1,w.ICoreService)],f)}();_.CoreMouseService=b},6975:function(J,_,A){var m,S=this&&this.__extends||(m=function(a,l){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var D in g)Object.prototype.hasOwnProperty.call(g,D)&&(d[D]=g[D])})(a,l)},function(a,l){if("function"!=typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function d(){this.constructor=a}m(a,l),a.prototype=null===l?Object.create(l):(d.prototype=l.prototype,new d)}),w=this&&this.__decorate||function(a,l,d,g){var D,M=arguments.length,O=M<3?l:null===g?g=Object.getOwnPropertyDescriptor(l,d):g;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)O=Reflect.decorate(a,l,d,g);else for(var R=a.length-1;R>=0;R--)(D=a[R])&&(O=(M<3?D(O):M>3?D(l,d,O):D(l,d))||O);return M>3&&O&&Object.defineProperty(l,d,O),O},y=this&&this.__param||function(a,l){return function(d,g){l(d,g,a)}};Object.defineProperty(_,"__esModule",{value:!0}),_.CoreService=void 0;var I=A(2585),E=A(8460),p=A(1439),v=A(844),b=Object.freeze({insertMode:!1}),f=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),c=function(a){function l(d,g,D,M){var O=a.call(this)||this;return O._bufferService=g,O._logService=D,O._optionsService=M,O.isCursorInitialized=!1,O.isCursorHidden=!1,O._onData=O.register(new E.EventEmitter),O._onUserInput=O.register(new E.EventEmitter),O._onBinary=O.register(new E.EventEmitter),O._scrollToBottom=d,O.register({dispose:function(){return O._scrollToBottom=void 0}}),O.modes=(0,p.clone)(b),O.decPrivateModes=(0,p.clone)(f),O}return S(l,a),Object.defineProperty(l.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),l.prototype.reset=function(){this.modes=(0,p.clone)(b),this.decPrivateModes=(0,p.clone)(f)},l.prototype.triggerDataEvent=function(d,g){if(void 0===g&&(g=!1),!this._optionsService.rawOptions.disableStdin){var D=this._bufferService.buffer;D.ybase!==D.ydisp&&this._scrollToBottom(),g&&this._onUserInput.fire(),this._logService.debug('sending data "'+d+'"',function(){return d.split("").map(function(M){return M.charCodeAt(0)})}),this._onData.fire(d)}},l.prototype.triggerBinaryEvent=function(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+d+'"',function(){return d.split("").map(function(g){return g.charCodeAt(0)})}),this._onBinary.fire(d))},w([y(1,I.IBufferService),y(2,I.ILogService),y(3,I.IOptionsService)],l)}(v.Disposable);_.CoreService=c},3730:function(J,_,A){var m=this&&this.__decorate||function(I,E,p,v){var b,f=arguments.length,c=f<3?E:null===v?v=Object.getOwnPropertyDescriptor(E,p):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(I,E,p,v);else for(var a=I.length-1;a>=0;a--)(b=I[a])&&(c=(f<3?b(c):f>3?b(E,p,c):b(E,p))||c);return f>3&&c&&Object.defineProperty(E,p,c),c},S=this&&this.__param||function(I,E){return function(p,v){E(p,v,I)}};Object.defineProperty(_,"__esModule",{value:!0}),_.DirtyRowService=void 0;var w=A(2585),y=function(){function I(E){this._bufferService=E,this.clearRange()}return Object.defineProperty(I.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),I.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},I.prototype.markDirty=function(E){E<this._start?this._start=E:E>this._end&&(this._end=E)},I.prototype.markRangeDirty=function(E,p){if(E>p){var v=E;E=p,p=v}E<this._start&&(this._start=E),p>this._end&&(this._end=p)},I.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},m([S(0,w.IBufferService)],I)}();_.DirtyRowService=y},4348:function(J,_,A){var m=this&&this.__spreadArray||function(E,p,v){if(v||2===arguments.length)for(var b,f=0,c=p.length;f<c;f++)!b&&f in p||(b||(b=Array.prototype.slice.call(p,0,f)),b[f]=p[f]);return E.concat(b||Array.prototype.slice.call(p))};Object.defineProperty(_,"__esModule",{value:!0}),_.InstantiationService=_.ServiceCollection=void 0;var S=A(2585),w=A(8343),y=function(){function E(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];this._entries=new Map;for(var b=0,f=p;b<f.length;b++){var c=f[b];this.set(c[0],c[1])}}return E.prototype.set=function(p,v){var b=this._entries.get(p);return this._entries.set(p,v),b},E.prototype.forEach=function(p){this._entries.forEach(function(v,b){return p(b,v)})},E.prototype.has=function(p){return this._entries.has(p)},E.prototype.get=function(p){return this._entries.get(p)},E}();_.ServiceCollection=y;var I=function(){function E(){this._services=new y,this._services.set(S.IInstantiationService,this)}return E.prototype.setService=function(p,v){this._services.set(p,v)},E.prototype.getService=function(p){return this._services.get(p)},E.prototype.createInstance=function(p){for(var v=[],b=1;b<arguments.length;b++)v[b-1]=arguments[b];for(var f=(0,w.getServiceDependencies)(p).sort(function(M,O){return M.index-O.index}),c=[],a=0,l=f;a<l.length;a++){var d=l[a],g=this._services.get(d.id);if(!g)throw new Error("[createInstance] "+p.name+" depends on UNKNOWN service "+d.id+".");c.push(g)}var D=f.length>0?f[0].index:v.length;if(v.length!==D)throw new Error("[createInstance] First service dependency of "+p.name+" at position "+(D+1)+" conflicts with "+v.length+" static arguments");return new(p.bind.apply(p,m([void 0],m(m([],v,!0),c,!0),!1)))},E}();_.InstantiationService=I},7866:function(J,_,A){var m=this&&this.__decorate||function(p,v,b,f){var c,a=arguments.length,l=a<3?v:null===f?f=Object.getOwnPropertyDescriptor(v,b):f;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(p,v,b,f);else for(var d=p.length-1;d>=0;d--)(c=p[d])&&(l=(a<3?c(l):a>3?c(v,b,l):c(v,b))||l);return a>3&&l&&Object.defineProperty(v,b,l),l},S=this&&this.__param||function(p,v){return function(b,f){v(b,f,p)}},w=this&&this.__spreadArray||function(p,v,b){if(b||2===arguments.length)for(var f,c=0,a=v.length;c<a;c++)!f&&c in v||(f||(f=Array.prototype.slice.call(v,0,c)),f[c]=v[c]);return p.concat(f||Array.prototype.slice.call(v))};Object.defineProperty(_,"__esModule",{value:!0}),_.LogService=void 0;var y=A(2585),I={debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF},E=function(){function p(v){var b=this;this._optionsService=v,this.logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(f){"logLevel"===f&&b._updateLogLevel()})}return p.prototype._updateLogLevel=function(){this.logLevel=I[this._optionsService.rawOptions.logLevel]},p.prototype._evalLazyOptionalParams=function(v){for(var b=0;b<v.length;b++)"function"==typeof v[b]&&(v[b]=v[b]())},p.prototype._log=function(v,b,f){this._evalLazyOptionalParams(f),v.call.apply(v,w([console,"xterm.js: "+b],f,!1))},p.prototype.debug=function(v){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.logLevel<=y.LogLevelEnum.DEBUG&&this._log(console.log,v,b)},p.prototype.info=function(v){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.logLevel<=y.LogLevelEnum.INFO&&this._log(console.info,v,b)},p.prototype.warn=function(v){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.logLevel<=y.LogLevelEnum.WARN&&this._log(console.warn,v,b)},p.prototype.error=function(v){for(var b=[],f=1;f<arguments.length;f++)b[f-1]=arguments[f];this.logLevel<=y.LogLevelEnum.ERROR&&this._log(console.error,v,b)},m([S(0,y.IOptionsService)],p)}();_.LogService=E},7302:function(J,_,A){var m=this&&this.__assign||function(){return m=Object.assign||function(E){for(var p,v=1,b=arguments.length;v<b;v++)for(var f in p=arguments[v])Object.prototype.hasOwnProperty.call(p,f)&&(E[f]=p[f]);return E},m.apply(this,arguments)};Object.defineProperty(_,"__esModule",{value:!0}),_.OptionsService=_.DEFAULT_OPTIONS=_.DEFAULT_BELL_SOUND=void 0;var S=A(8460),w=A(6114);_.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",_.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:_.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:w.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var y=["normal","bold","100","200","300","400","500","600","700","800","900"],I=function(){function E(p){this._onOptionChange=new S.EventEmitter;var v=m({},_.DEFAULT_OPTIONS);for(var b in p)if(b in v)try{v[b]=this._sanitizeAndValidateOption(b,p[b])}catch(c){console.error(c)}this.rawOptions=v,this.options=m({},v),this._setupOptions()}return Object.defineProperty(E.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),E.prototype._setupOptions=function(){var p=this,v=function(a){if(!(a in _.DEFAULT_OPTIONS))throw new Error('No option with key "'+a+'"');return p.rawOptions[a]},b=function(a,l){if(!(a in _.DEFAULT_OPTIONS))throw new Error('No option with key "'+a+'"');l=p._sanitizeAndValidateOption(a,l),p.rawOptions[a]!==l&&(p.rawOptions[a]=l,p._onOptionChange.fire(a))};for(var f in this.rawOptions){var c={get:v.bind(this,f),set:b.bind(this,f)};Object.defineProperty(this.options,f,c)}},E.prototype.setOption=function(p,v){this.options[p]=v},E.prototype._sanitizeAndValidateOption=function(p,v){switch(p){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":v||(v=_.DEFAULT_OPTIONS[p]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof v&&1<=v&&v<=1e3)break;v=y.includes(v)?v:_.DEFAULT_OPTIONS[p];break;case"cursorWidth":v=Math.floor(v);case"lineHeight":case"tabStopWidth":if(v<1)throw new Error(p+" cannot be less than 1, value: "+v);break;case"minimumContrastRatio":v=Math.max(1,Math.min(21,Math.round(10*v)/10));break;case"scrollback":if((v=Math.min(v,4294967295))<0)throw new Error(p+" cannot be less than 0, value: "+v);break;case"fastScrollSensitivity":case"scrollSensitivity":if(v<=0)throw new Error(p+" cannot be less than or equal to 0, value: "+v);case"rows":case"cols":if(!v&&0!==v)throw new Error(p+" must be numeric, value: "+v)}return v},E.prototype.getOption=function(p){return this.options[p]},E}();_.OptionsService=I},8343:(J,_)=>{function A(m,S,w){S.di$target===S?S.di$dependencies.push({id:m,index:w}):(S.di$dependencies=[{id:m,index:w}],S.di$target=S)}Object.defineProperty(_,"__esModule",{value:!0}),_.createDecorator=_.getServiceDependencies=_.serviceRegistry=void 0,_.serviceRegistry=new Map,_.getServiceDependencies=function(m){return m.di$dependencies||[]},_.createDecorator=function(m){if(_.serviceRegistry.has(m))return _.serviceRegistry.get(m);var S=function(w,y,I){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");A(S,w,I)};return S.toString=function(){return m},_.serviceRegistry.set(m,S),S}},2585:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.IUnicodeService=_.IOptionsService=_.ILogService=_.LogLevelEnum=_.IInstantiationService=_.IDirtyRowService=_.ICharsetService=_.ICoreService=_.ICoreMouseService=_.IBufferService=void 0;var m,S=A(8343);_.IBufferService=(0,S.createDecorator)("BufferService"),_.ICoreMouseService=(0,S.createDecorator)("CoreMouseService"),_.ICoreService=(0,S.createDecorator)("CoreService"),_.ICharsetService=(0,S.createDecorator)("CharsetService"),_.IDirtyRowService=(0,S.createDecorator)("DirtyRowService"),_.IInstantiationService=(0,S.createDecorator)("InstantiationService"),(m=_.LogLevelEnum||(_.LogLevelEnum={}))[m.DEBUG=0]="DEBUG",m[m.INFO=1]="INFO",m[m.WARN=2]="WARN",m[m.ERROR=3]="ERROR",m[m.OFF=4]="OFF",_.ILogService=(0,S.createDecorator)("LogService"),_.IOptionsService=(0,S.createDecorator)("OptionsService"),_.IUnicodeService=(0,S.createDecorator)("UnicodeService")},1480:(J,_,A)=>{Object.defineProperty(_,"__esModule",{value:!0}),_.UnicodeService=void 0;var m=A(8460),S=A(225),w=function(){function y(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter;var I=new S.UnicodeV6;this.register(I),this._active=I.version,this._activeProvider=I}return Object.defineProperty(y.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"activeVersion",{get:function(){return this._active},set:function(I){if(!this._providers[I])throw new Error('unknown Unicode version "'+I+'"');this._active=I,this._activeProvider=this._providers[I],this._onChange.fire(I)},enumerable:!1,configurable:!0}),y.prototype.register=function(I){this._providers[I.version]=I},y.prototype.wcwidth=function(I){return this._activeProvider.wcwidth(I)},y.prototype.getStringCellWidth=function(I){for(var E=0,p=I.length,v=0;v<p;++v){var b=I.charCodeAt(v);if(55296<=b&&b<=56319){if(++v>=p)return E+this.wcwidth(b);var f=I.charCodeAt(v);56320<=f&&f<=57343?b=1024*(b-55296)+f-56320+65536:E+=this.wcwidth(f)}E+=this.wcwidth(b)}return E},y}();_.UnicodeService=w}},Rt={};return function J(_){var A=Rt[_];if(void 0!==A)return A.exports;var m=Rt[_]={exports:{}};return Xn[_].call(m.exports,m,m.exports,J),m.exports}(4389)})()}},_r=>{_r(_r.s=838)}]);